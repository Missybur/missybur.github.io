(function e$$0(h,g,e){function f(d,c){if(!g[d]){if(!h[d]){var l="function"==typeof require&&require;if(!c&&l)return l(d,!0);if(b)return b(d,!0);l=Error("Cannot find module '"+d+"'");throw l.code="MODULE_NOT_FOUND",l;}l=g[d]={exports:{}};h[d][0].call(l.exports,function(b){var c=h[d][1][b];return f(c?c:b)},l,l.exports,e$$0,h,g,e)}return g[d].exports}for(var b="function"==typeof require&&require,c=0;c<e.length;c++)f(e[c]);return f})({1:[function(a,h,g){g.assets={"http:":{},"https:":{}};g.assets["http:"].CASCADES_WEB_PLAYER_CSS=
"http://avodassets-a.akamaihd.net/playback/web_player/versions/1.0.560.6/css/cascadeswebplayer.css";g.assets["https:"].CASCADES_WEB_PLAYER_CSS="https://avodassets-a.akamaihd.net/playback/web_player/versions/1.0.560.6/css/cascadeswebplayer.css";g.assets["http:"].WEB_PLAYER_CSS="http://avodassets-a.akamaihd.net/playback/web_player/versions/1.0.560.6/css/webPlayer/webPlayer.css";g.assets["https:"].WEB_PLAYER_CSS="https://avodassets-a.akamaihd.net/playback/web_player/versions/1.0.560.6/css/webPlayer/webPlayer.css";
g.assets["http:"].WEB_PLAYER_JS="http://avodassets-a.akamaihd.net/playback/web_player/versions/1.0.560.6/js/webplayer.js";g.assets["https:"].WEB_PLAYER_JS="https://avodassets-a.akamaihd.net/playback/web_player/versions/1.0.560.6/js/webplayer.js";g.assets["http:"].STATELESS_WEB_PLAYER_JS="http://avodassets-a.akamaihd.net/playback/web_player/versions/1.0.560.6/js/StatelessWebPlayer.js";g.assets["https:"].STATELESS_WEB_PLAYER_JS="https://avodassets-a.akamaihd.net/playback/web_player/versions/1.0.560.6/js/StatelessWebPlayer.js";
g.assets["http:"].CASCADES_WEB_PLAYER_JS="http://avodassets-a.akamaihd.net/playback/web_player/versions/1.0.560.6/js/cascadeswebplayer.js";g.assets["https:"].CASCADES_WEB_PLAYER_JS="https://avodassets-a.akamaihd.net/playback/web_player/versions/1.0.560.6/js/cascadeswebplayer.js";g.assets["http:"].LEGACY_SILVERLIGHT_XAP="http://avodassets-a.akamaihd.net/playback/web_player/versions/1.0.560.6/xap/ATVSilverlightWebPlayer.xap";g.assets["https:"].LEGACY_SILVERLIGHT_XAP="https://avodassets-a.akamaihd.net/playback/web_player/versions/1.0.560.6/xap/ATVSilverlightWebPlayer.xap";
g.assets["http:"].HTML5_PARTNER_TEST_HTML="http://avodassets-a.akamaihd.net/playback/web_player/versions/1.0.560.6/HTML5PartnerTest.html";g.assets["https:"].HTML5_PARTNER_TEST_HTML="https://avodassets-a.akamaihd.net/playback/web_player/versions/1.0.560.6/HTML5PartnerTest.html";g.assets["http:"].EMBER_LT_FONT="http://avodassets-a.akamaihd.net/playback/web_player/versions/1.0.560.6/fonts/AmazonEmber_Lt.woff";g.assets["https:"].EMBER_LT_FONT="https://avodassets-a.akamaihd.net/playback/web_player/versions/1.0.560.6/fonts/AmazonEmber_Lt.woff";
g.assets["http:"].EMBER_RG_FONT="http://avodassets-a.akamaihd.net/playback/web_player/versions/1.0.560.6/fonts/AmazonEmber_Rg.woff";g.assets["https:"].EMBER_RG_FONT="https://avodassets-a.akamaihd.net/playback/web_player/versions/1.0.560.6/fonts/AmazonEmber_Rg.woff";g.assets["http:"].ORANGE_SPINNER_GIF="http://avodassets-a.akamaihd.net/playback/web_player/versions/1.0.560.6/img/orange_spinner_gif.gif";g.assets["https:"].ORANGE_SPINNER_GIF="https://avodassets-a.akamaihd.net/playback/web_player/versions/1.0.560.6/img/orange_spinner_gif.gif";
g.assets["http:"].ORANGE_SPINNER_SVG="http://avodassets-a.akamaihd.net/playback/web_player/versions/1.0.560.6/img/orange_spinner_svg.svg";g.assets["https:"].ORANGE_SPINNER_SVG="https://avodassets-a.akamaihd.net/playback/web_player/versions/1.0.560.6/img/orange_spinner_svg.svg"},{}],2:[function(a,h,g){h.exports={"en-GB":{PIN_LOOKUP_ERROR:{description:"We\u2019re having a problem checking your account\u2019s PIN restrictions which is preventing your video from playing. Please try again later, or you can <a href='//{{avSettingsUrl}}' target='_blank'>turn off PIN restrictions</a> to watch your video immediately.",
title:"PIN Lookup Problem"},OPERA_OUT_OF_DATE:{title:"Opera Update Required",description:"A later version of Opera is required for Amazon Video. To check for updates, click the <b>Opera</b> menu, click <b>About Opera</b>, and then click <b>Relaunch Now</b>.",footer:'For more information, please see <a href="//{{systemRequirementsUrl}}" target="_blank">Amazon Video system requirements</a>.'},SL_ACTIVEX:{title:"ActiveX Not Enabled",steps:[{step:"In Internet Explorer, press the <b>Alt</b> key, and then on <b>Tools</b> menu, click <b>Internet options</b>."},
{step:"On the <b>Security</b> tab, click <b>Custom level</b>."},{step:"Scroll down to the <b>ActiveX controls and plug-ins</b> section."},{step:"Click <b>Enable</b> for <b>Run ActiveX controls and plug-ins</b> and <b>Script ActiveX controls marked safe for scripting</b>."},{step:"Click <b>OK</b>, and then restart Internet Explorer."}],description:"To watch your video in Internet Explorer, ActiveX controls must be enabled.",footer:'For further assistance, <a href="//{{contactUsDigitalUrl}}">contact Amazon Customer Service</a>.'},
SL_CORRUPTION_MAC:{title:"Silverlight Problem",steps:[{step:"Close all web browser windows, including this one."},{step:"Click on the Desktop, or open Finder."},{step:"Click <b>Go &gt; Computer</b>."},{step:"Double-click <b>Macintosh HD &gt; Library &gt; Internet Plugins</b>."},{step:"Drag <b>Silverlight.plugin</b> to the Trash."},{step:"Return to this page to install Silverlight."}],description:"There's a problem with the installation of Microsoft Silverlight on your computer. Often, this can be fixed by uninstalling, and then reinstalling Silverlight.",
footer:'For further assistance, <a href="//{{contactUsDigitalUrl}}">contact Amazon Customer Service</a>.'},PIN_MODAL:{incorrect_pin:"We don't recognize the PIN you entered. Please try again or <a href='//{{resetPinUrl}}' target='_blank'>reset your PIN.</a>",description:"Please enter your Amazon Video PIN&#58;",submit_button:"Continue",title:"Viewing Restrictions Enabled",cancel_button:"Cancel",notes:"<a href='//{{resetPinUrl}}' target='_blank'>Reset your PIN</a> or <a href='//{{avSettingsUrl}}' target='_blank'>change viewing restrictions</a>"},
OPERA_MISSING_CDM:{title:"Digital Rights Error",description:"Your web browser is missing a digital rights component. In the address bar, go to <u>opera://plugins</u> and ensure <b>Widevine Content Decryption Module</b> is enabled.",footer:'For further assistance, please contact Amazon Customer Service at <a href="//{{videoHelpUrl}}" target="_blank">{{videoHelpUrl}}</a> and refer to error 7235.'},SWITCH_TO_HTML5:"For more features and less buffering, we recommend using the HTML5 video player on Google Chrome, Internet Explorer 11 on Windows 8.1 or later, Microsoft Edge, or Opera.",
SL_UPGRADE:{button:'<a href="http://go2.microsoft.com/fwlink/?LinkID=149156" target="_blank">Install Silverlight</a>',title:"Your Microsoft Silverlight is out of date",description:"We'll just need you to upgrade your Silverlight plug-in&mdash;it will just take a minute.",footer:'If you\'re experiencing problems with Silverlight, please checkout our <a target="_blank" href="//{{videoIssuesUrl}}">troubleshooting tips</a>.'},PIN_AGE_VERIFICATION_REQUIRED:{description:"Please <a href='https://www.amazon.de/gp/video/settings/age-verification/ref=DV_DP_fsk18_age_verify_mess?ie=UTF8' target='_blank'>verify your age</a> to watch this FSK 18 title.",
title:"Viewing Restrictions Enabled"},PIN_SETUP_REQUIRED:{description:"To view this video, a PIN is required. To update your PIN, go to the Amazon Video <a href='//{{setupPinUrl}}' target='_blank'>Settings page</a>.",title:"Viewing Restrictions Enabled"},WINDOWS_UNSUPPORTED_BROWSER:{title:"Unsupported Browser",description:"This web browser isn\u2019t compatible with Amazon Video. Please use one of the following web browsers&#58; <ul> <li>Google Chrome (latest version)</li> <li>Mozilla Firefox (latest version)</li> <li>Microsoft Edge</li> <li>Windows Internet Explorer (version 8 or later)</li> <li>Opera (latest version)</li> </ul>",
footer:'For more information, please see <a href="//{{systemRequirementsUrl}}" target="_blank">Amazon Video system requirements</a>.'},SL_INSTALL:{button:'<a href="http://go2.microsoft.com/fwlink/?LinkID=149156" target="_blank">Install Silverlight</a>',title:"Microsoft Silverlight is not installed",description:"Install the free Silverlight plug-in; it will just take a minute. Please refresh this page when the installation completes. <p>If you have issues after installing, restart your browser and try again. If the issue persists, try using our new HTML5 video player on Chrome, Internet Explorer 11, Microsoft Edge or Opera.</p>",
footer:'Already installed Silverlight? <a target="_blank" href="//{{videoIssuesUrl}}">Get Silverlight plug-in help</a>.'},CHROME_MISSING_CDM:{title:"Digital Rights Error",description:"Your web browser is missing a digital rights component. In the address bar, go to <u>chrome://plugins</u> and ensure <b>Widevine Content Decryption Module</b> is enabled. If missing, install it by going to <u>chrome://components</u> and under <b>WidevineCdm</b>, click <b>Check for update</b>.",footer:'For further assistance, please contact Amazon Customer Service at <a href="//{{videoHelpUrl}}" target="_blank">{{videoHelpUrl}}</a> and refer to error 7235.'},
GENERIC_UNSUPPORTED_BROWSER:{title:"Unsupported Browser",description:"This web browser isn\u2019t compatible with Amazon Video. Please use one of the following web browsers&#58; <ul> <li>Google Chrome (latest version)</li> <li>Mozilla Firefox (latest version)</li> <li>Microsoft Edge</li> <li>Windows Internet Explorer (version 8 or later)</li> <li>Apple Safari (version 5 or later)</li> <li>Opera (latest version)</li> </ul>",footer:'For more information, please see <a href="//{{systemRequirementsUrl}}" target="_blank">Amazon Video system requirements</a>.'},
PIN_VALIDATION_ERROR:{description:"We're having a problem validating your PIN. Please try again. If this problem continues, please <a href='//{{contactUsOrdersUrl}}' target='_blank'>contact Amazon Customer Service</a> and refer to error 5014.",title:"PIN Validation Problem"},LINUX_UNSUPPORTED_BROWSER:{title:"Unsupported Browser",description:"This web browser isn\u2019t compatible with Amazon Video. Please use one of the following web browsers&#58; <ul> <li>Google Chrome (latest version)</li> </ul>",
footer:'For more information, please see <a href="//{{systemRequirementsUrl}}" target="_blank">Amazon Video system requirements</a>.'},NOTIFICATION_DONT_SHOW_AGAIN:"Don't show again",PIN_LOOKUP_ERROR_FSK18:{description:"We\u2019re having a problem checking your account\u2019s PIN restrictions which is preventing your video from playing. Please try again later. If this problem continues, contact Amazon Customer Service and refer to error 5016.",title:"PIN Lookup Problem"},CHROME_OUT_OF_DATE:{title:"Google Chrome Update Required",
description:"A later version of Google Chrome is required for Amazon Video. To update, click the Chrome menu (three horizontal stripes) on the browser toolbar, click <b>About Google Chrome</b>, and then click <b>Relaunch</b>.",footer:'For more information, please see <a href="//{{systemRequirementsUrl}}" target="_blank">Amazon Video system requirements</a>.'},UPDATE_CHROME:{message:"An updated version of Chrome is available which enables an improved HTML5 video web player.",title:"Chrome Update Available",
instructions:"To update, click the Chrome menu (three horizontal stripes) on the browser toolbar, click <b>About Google Chrome</b>, and then click <b>Relaunch</b>."},NOTIFICATION_SHOW_LESS:"Show Less",NOTIFICATION_DISMISS:"Dismiss",SL_BLOCKED:{message:"The Silverlight plugin isn't loading and might be blocked by your browser.",chrome_unblock:'To enable Silverlight, click this icon <span class="chromePluginBlockerIcon"></span> inside the right edge of the address bar, select <b>"Always allow plug-ins on www.amazon.co.uk"</b>, and then click <b>"Done"</b>.',
troubleshoot:'Please see the <a href="//{{videoIssuesUrl}}">Amazon website</a> for additional troubleshooting help. Error: 7303.'},MAC_UNSUPPORTED_BROWSER:{title:"Unsupported Browser",description:"This web browser isn\u2019t compatible with Amazon Video. Please use one of the following web browsers&#58; <ul> <li>Google Chrome (latest version)</li> <li>Mozilla Firefox (latest version)</li> <li>Apple Safari (version 5 or later)</li> <li>Opera (latest version)</li> </ul>",footer:'For more information, please see <a href="//{{systemRequirementsUrl}}" target="_blank">Amazon Video system requirements</a>.'},
SL_CORRUPTION_WINDOWS:{fix_it_tool_steps:[{step:'<a href="http://download.microsoft.com/download/6/C/9/6C970550-32AB-4235-9CDD-7FC9DD848BBB/silverlight.diagcab">Run the Fix It tool</a>'},{step:"After the tool has completed, refresh this page."}],title:"Silverlight Problem",description:"There's a problem with the installation of Microsoft Silverlight on your computer. Microsoft provides a tool that can often fix this problem.",manual_repair_steps:{link_text:"Manual Repair Steps",steps:[{step:"Close all web browser windows, including this one."},
{step:"Click the Start button, type <b>Uninstall a program</b>, and then press <b>Enter</b>.<br> Windows 8: Swipe in from the right edge of the screen, then tap <b>Settings</b>. You can also press Windows key+I. Select <b>Control Panel</b>, and then select <b>Uninstall a program</b>.\n"},{step:"Click <b>Microsoft Silverlight</b>, and then click <b>Uninstall</b>."},{step:"Return to this page to install Silverlight."}],pre_link_text:"If the Microsoft Fix It tool fails to fix the problem, try the ",
post_link_text:"."},footer:'For further assistance, <a href="//{{contactUsDigitalUrl}}">contact Amazon Customer Service</a>.'},FIREFOX_64_UNSUPPORTED:{description:"Amazon Video isn\u2019t supported on the 64-bit version of Firefox. We recommend using our HTML5 video player on Google Chrome, Internet Explorer 11 on Windows 8.1 or later, Microsoft Edge, or Opera.",title:"Unsupported Browser"},GENERIC_ERROR:{description:'We\'re experiencing a problem playing this video. Please try again. For further assistance, <a href="//{{contactUsDigitalUrl}}">contact Amazon Customer Service</a>.',
title:"Video Error"},NOTIFICATION_SHOW_MORE:"Show More"},"de-DE":{PIN_LOOKUP_ERROR:{description:"Beim \u00dcberpr\u00fcfen Ihrer PIN-Beschr\u00e4nkungen ist ein Problem aufgetreten, dass das Abspielen des Videos verhindert. Bitte versuchen Sie es sp\u00e4ter erneut, oder deaktivieren Sie die PIN-Beschr\u00e4nkungen <a href='//{{avSettingsUrl}}' target='_blank'>https://{{avSettingsUrl}}</a> , um Ihr Video sofort abzuspielen",title:"Problem mit PIN-Abfrage"},OPERA_OUT_OF_DATE:{title:"Aktualisierung von Opera erforderlich",
description:"Um Amazon Video zu nutzen, ist eine aktuellere Version von Opera erforderlich. Um nach Updates zu suchen, \u00f6ffnen Sie das <b>Opera</b>-Men\u00fc, w\u00e4hlen Sie <b>\u00dcber Opera</b> und w\u00e4hlen Sie dort das Update.",footer:'F\u00fcr mehr Informationen besuchen Sie bitte die <a href="//{{systemRequirementsUrl}}" target="_blank">Amazon Video-Systemvoraussetzungen</a>.'},SL_ACTIVEX:{title:"ActiveX nicht aktiviert",steps:[{step:"Dr\u00fccken Sie im Internet Explorer die Taste <b>Alt</b> und klicken Sie dann im Men\u00fc <b>Extras</b> auf <b>Internetoptionen</b>."},
{step:"Klicken Sie auf der Registerkarte <b>Sicherheit</b> auf <b>Benutzerdefinierte Ebene</b>."},{step:"F\u00fchren Sie einen Bildlauf nach unten aus, bis <b>ActiveX-Steuerelemente und Plug-Ins</b> angezeigt wird."},{step:"Klicken Sie f\u00fcr <b>Automatische Eingabeaufforderung f\u00fcr ActiveX-Steuerelemente</b> und <b>ActiveX-Steuerelemente ausf\u00fchren, die f\u00fcr Skripting sicher sind</b> auf <b>Aktivieren</b>.\n"},{step:"Klicken Sie auf <b>OK</b>, und starten Sie dann den Internet Explorer neu."}],
description:"Um Ihr Video im Internet Explorer anzuzeigen, m\u00fcssen ActiveX-Steuerelemente aktiviert werden.",footer:'F\u00fcr weitere Unterst\u00fctzung wenden Sie sich an <a href="//{{contactUsDigitalUrl}}"> Kontakt mit dem Kundenservice von Amazon</a>.\n'},SL_CORRUPTION_MAC:{title:"Silverlight-Problem",steps:[{step:"Schlie\u00dfen Sie alle Browser-Fenster, einschlie\u00dflich dieses Fensters."},{step:"Klicken Sie auf dem Desktop oder \u00f6ffnen Sie den Finder."},{step:"Klicken Sie auf <b>Los &gt; Computer</b>."},
{step:"Doppelklicken Sie auf <b>Macintosh HD &gt; Bibliothek &gt; Internet Plug-ins</b>."},{step:"Ziehen Sie <b>Silverlight.plugin</b> in den Papierkorb."},{step:"Kehren Sie zu dieser Seite zur\u00fcck, um Silverlight zu installieren."}],description:"Bei der Installation von Microsoft Silverlight auf Ihrem Computer ist ein Problem aufgetreten. Oft kann dies durch Deinstallation und Neuinstallation von Silverlight behoben werden.\n",footer:'F\u00fcr weitere Unterst\u00fctzung wenden Sie sich an <a href="//{{contactUsDigitalUrl}}"> Kontakt mit dem Kundenservice von Amazon</a>.\n'},
PIN_MODAL:{incorrect_pin:"PIN ist falsch. Bitte versuchen Sie es noch einmal.",description:"Bitte geben Sie Ihre Amazon Video-PIN ein&#58;",submit_button:"Weiter",title:"Wiedergabebeschr\u00e4nkungen sind Aktiviert",cancel_button:"Abbrechen",notes:"<a href='//{{resetPinUrl}}' target='_blank'>PIN zur\u00fccksetzen</a> oder <a href='//{{avSettingsUrl}}' target='_blank'>Wiedergabebeschr\u00e4nkungen \u00e4ndern</a>"},OPERA_MISSING_CDM:{title:"Fehler Digitale Rechteverwaltung",description:"Ihrem Webbrowser fehlt eine notwendige Komponente zur digitalen Rechteverwaltung (DRM). Geben Sie <u>opera://plugins</u> in die Adresszeile des Browsers ein und stellen Sie sicher, dass <b>Widevine Content Decryption Module</b> aktiviert ist.",
footer:'F\u00fcr weitere Hilfe wenden Sie sich bitte unter <a href="//{{videoHelpUrl}}" target="_blank">{{videoHelpUrl}}</a> an den Amazon Kundenservice und beziehen Sie sich auf den Fehlercode 7235.'},SWITCH_TO_HTML5:"F\u00fcr mehr Funktionen und weniger Pufferung empfehlen wir Ihnen, unseren HTML5 Video Player f\u00fcr Google Chrome, Internet Explorer 11 auf Windows 8.1 oder neuer, f\u00fcr Microsoft Edge oder Opera zu nutzen.",SL_UPGRADE:{button:'<a href="http://go2.microsoft.com/fwlink/?LinkID=149156" target="_blank">Silverlight installieren</a>',
title:"Ihr Microsoft Silverlight ist nicht auf dem neuesten Stand",description:"Wir m\u00fcssen nur noch Ihr Silverlight Plug-in aktualisieren &mdash; dies dauert nur eine Minute.",footer:'Wenn Sie Probleme mit Silverlight haben, sehen Sie bitte hier nach: <a target="_blank" href="//{{videoIssuesUrl}}">Tipps zur Problembehebung</a>.'},PIN_AGE_VERIFICATION_REQUIRED:{description:"Bitte <a href='https://www.amazon.de/gp/video/settings/age-verification/ref=DV_DP_fsk18_age_verify_mess?ie=UTF8' target='_blank'>best\u00e4tigen Sie Ihr Alter</a> ist erforderlich, um diesen FSK-18-Titel anzusehen.",
title:"Wiedergabebeschr\u00e4nkungen sind Aktiviert"},PIN_SETUP_REQUIRED:{description:"F\u00fcr die Wiedergabe dieses Videos ist eine PIN-Nummer erforderlich. Zum Anlegen Ihrer PIN-Nummer navigieren Sie zu den Amazon Video <a href='//{{setupPinUrl}}' target='_blank'>Einstellungen</a>.",title:"Wiedergabebeschr\u00e4nkungen sind Aktiviert"},WINDOWS_UNSUPPORTED_BROWSER:{title:"Nicht unterst\u00fctzer Browser",description:"Dieser Web-Browser ist nicht mit Amazon Video kompatibel. Bitte verwenden Sie einen der folgenden Browser&#58; <ul> <li>Google Chrome (aktuellste Version)</li> <li>Mozilla Firefox (aktuellste Version)</li> <li>Microsoft Edge</li> <li>Windows Internet Explorer (Version 8 oder neuer)</li> <li>Opera (aktuellste Version)</li> </ul>",
footer:'F\u00fcr mehr Informationen besuchen Sie bitte die <a href="//{{systemRequirementsUrl}}" target="_blank">Amazon Video-Systemvoraussetzungen</a>.'},SL_INSTALL:{button:'<a href="http://go2.microsoft.com/fwlink/?LinkID=149156" target="_blank">Silverlight installieren</a>',title:"Microsoft Silverlight ist nicht installiert",description:"Installieren Sie das kostenlose Silverlight-Plug-in &mdash; es dauert nur eine Minute. Bitte aktualisieren Sie die Seite nach vollst\u00e4ndiger Installation. <p>Sollten Sie Probleme haben, starten Sie Ihren Browser neu und probieren Sie es erneut. Funktioniert auch das nicht, nutzen Sie unseren neuen HTML5 Videoplayer in Chrome, Internet Explorer 11, Microsoft Edge oder Opera.</p>",
footer:'Ist Silverlight bereits installiert? <a target="_blank" href="//{{videoIssuesUrl}}">Hilfe zum Silverlight Plug-in abrufen</a>.'},CHROME_MISSING_CDM:{title:"Fehler Digitale Rechteverwaltung",description:"Ihrem Webbrowser fehlt eine notwendige Komponente zur digitalen Rechteverwaltung (DRM). Geben Sie <u>chrome://plugins</u> in die Adresszeile des Browsers ein und stellen Sie sicher, dass <b>Widevine Content Decryption Module</b> aktiviert ist. Sollte das Modul nicht vorhanden sein, installieren Sie es, in dem Sie auf <u>chrome://components</u> gehen und unter <b>WidevineCdm</b> die Option <b>Check for update</b> w\u00e4hlen.",
footer:'F\u00fcr weitere Hilfe wenden Sie sich bitte unter <a href="//{{videoHelpUrl}}" target="_blank">{{videoHelpUrl}}</a> an den Amazon Kundenservice und beziehen Sie sich auf den Fehlercode 7235.'},GENERIC_UNSUPPORTED_BROWSER:{title:"Nicht unterst\u00fctzer Browser",description:"Dieser Web-Browser ist nicht mit Amazon Video kompatibel. Bitte verwenden Sie einen der folgenden Browser&#58; <ul> <li>Google Chrome (aktuellste Version)</li> <li>Mozilla Firefox (aktuellste Version)</li> <li>Microsoft Edge</li> <li>Windows Internet Explorer (Version 8 oder neuer)</li> <li>Apple Safari (Version 5 oder neuer)</li> <li>Opera (aktuellste Version)</li> </ul>",
footer:'F\u00fcr mehr Informationen besuchen Sie bitte die <a href="//{{systemRequirementsUrl}}" target="_blank">Amazon Video-Systemvoraussetzungen</a>.'},PIN_VALIDATION_ERROR:{description:"Bei der G\u00fcltigkeitspr\u00fcfung Ihrer PIN ist ein Fehler aufgetreten. Bitte versuchen Sie es noch einmal. Wenn dieses Problem weiterhin besteht, wenden Sie sich bitte unter <a href='//{{contactUsOrdersUrl}}' target='_blank'>https://{{contactUsOrdersUrl}}</a> an den Amazon-Kundendienst und verweisen Sie auf den Fehler 5014.",
title:"Problem mit PIN-G\u00fcltigkeitspr\u00fcfung"},LINUX_UNSUPPORTED_BROWSER:{title:"Nicht unterst\u00fctzer Browser",description:"Dieser Web-Browser ist nicht mit Amazon Video kompatibel. Bitte verwenden Sie einen der folgenden Browser&#58; <ul> <li>Google Chrome (aktuellste Version)</li> </ul>",footer:'F\u00fcr mehr Informationen besuchen Sie bitte die <a href="//{{systemRequirementsUrl}}" target="_blank">Amazon Video-Systemvoraussetzungen</a>.'},NOTIFICATION_DONT_SHOW_AGAIN:"Nicht mehr anzeigen",
PIN_LOOKUP_ERROR_FSK18:{description:"Beim \u00dcberpr\u00fcfen der PIN-Beschr\u00e4nkungen Ihres Kontos ist ein Fehler aufgetreten, der das Abspielen Ihres Videos verhindert. Bitte versuchen Sie es sp\u00e4ter noch einmal. Wenn das Problem weiterhin besteht, wenden Sie sich an den Amazon Kundenservice und verweisen Sie auf den Fehler 5016.",title:"Problem mit PIN-Abfrage"},CHROME_OUT_OF_DATE:{title:"Aktualisierung von Google Chrome erforderlich",description:"Um Amazon Video zu nutzen, ist eine aktuellere Version von Google Chrome erforderlich. Um Chrome zu aktualisieren, \u00f6ffnen Sie das Chrome Men\u00fc (Icon mit drei horizontalen Linien), klicken Sie auf <b>Hilfe und Einstellungen</b>, w\u00e4hlen Sie <b>\u00dcber Google Chrome</b> und w\u00e4hlen Sie dort das Update.",
footer:'F\u00fcr mehr Informationen besuchen Sie bitte die <a href="//{{systemRequirementsUrl}}" target="_blank">Amazon Video-Systemvoraussetzungen</a>.'},UPDATE_CHROME:{message:"Eine neuere Version von Chrome ist verf\u00fcgbar. Diese unterst\u00fctzt einen optimierten HTML5 Video Web Player.",title:"Chrome-Update verf\u00fcgbar",instructions:"Um den Browser auf die neuere Version zu aktualisieren, \u00f6ffnen Sie das Chrome-Men\u00fc (Icon mit drei horizontalen Streifen) \u00fcber die Browser-Werkzeugleiste. W\u00e4hlen Sie <b>About Google Chrome</b> und klicken Sie dann auf <b>Relaunch</b>."},
NOTIFICATION_SHOW_LESS:"Weniger anzeigen",NOTIFICATION_DISMISS:"Verwerfen",SL_BLOCKED:{message:"Das Silverlight-Plugin wird nicht geladen und ist m\u00f6glichweise im Web-Browser gesperrt.",chrome_unblock:'Um Silverlight zu aktivieren, klicken Sie auf dieses Symbol <span class="chromePluginBlockerIcon"></span> an der rechten Innenkante der Adressleiste, w\u00e4hlen Sie <b>"Auf www.amazon.de stets Plugins zulassen"</b> und klicken Sie dann auf <b>"Erledigt"</b>.',troubleshoot:'Weitere Hilfe zur Fehlerbehebung finden Sie auf der <a href="//{{videoIssuesUrl}}">Amazon Website</a>. Fehler: 7303.'},
MAC_UNSUPPORTED_BROWSER:{title:"Nicht unterst\u00fctzer Browser",description:"Dieser Web-Browser ist nicht mit Amazon Video kompatibel. Bitte verwenden Sie einen der folgenden Browser&#58; <ul> <li>Google Chrome (aktuellste Version)</li> <li>Mozilla Firefox (aktuellste Version)</li> <li>Apple Safari (Version 5 oder neuer)</li> <li>Opera (aktuellste Version)</li> </ul>",footer:'F\u00fcr mehr Informationen besuchen Sie bitte die <a href="//{{systemRequirementsUrl}}" target="_blank">Amazon Video-Systemvoraussetzungen</a>.'},
SL_CORRUPTION_WINDOWS:{fix_it_tool_steps:[{step:'<a href="http://download.microsoft.com/download/6/C/9/6C970550-32AB-4235-9CDD-7FC9DD848BBB/silverlight.diagcab">Fix It-Tool ausf\u00fchren</a>'},{step:"Nachdem das Tool den Vorgang abgeschlossen hat, aktualisieren Sie diese Seite."}],title:"Silverlight-Problem",description:"Bei der Installation von Microsoft Silverlight auf Ihrem Computer ist ein Problem aufgetreten. Microsoft stellt ein Tool bereit, das dieses Problem oft beheben kann.\n",manual_repair_steps:{link_text:"Manuelle Reparaturschritte",
steps:[{step:"Schlie\u00dfen Sie alle Browser-Fenster, einschlie\u00dflich dieses Fensters."},{step:"Klicken Sie auf die Start-Schaltfl\u00e4che, geben Sie <b>Ein Programm deinstallieren</b> ein, und dr\u00fccken Sie dann <b>Eingeben</b>.<br> Windows 8: Wischen Sie vom rechten Bildschirmrand nach innen und tippen Sie dann auf <b>Einstellungen</b>. Sie k\u00f6nnen auch die Windows-Taste+I dr\u00fccken. W\u00e4hlen Sie <b>Systemsteuerung</b> und anschlie\u00dfend <b>Ein Programm deinstallieren</b>.\n"},
{step:"Klicken Sie auf <b>Microsoft Silverlight</b> und dann auf <b>Deinstallieren</b>."},{step:"Kehren Sie zu dieser Seite zur\u00fcck, um Silverlight zu installieren."}],pre_link_text:"Wenn das Microsoft Fix It-Tool das Problem nicht beheben kann, versuchen Sie ",post_link_text:"."},footer:'F\u00fcr weitere Unterst\u00fctzung wenden Sie sich an <a href="//{{contactUsDigitalUrl}}"> Kontakt mit dem Kundenservice von Amazon</a>.\n'},FIREFOX_64_UNSUPPORTED:{description:"Amazon Video wird auf der 64-bit Version von Firefox leider nicht unterst\u00fctzt. Wir empfehlen Ihnen, unseren HTML5 Video Player in Google Chrome, Internet Explorer 11 auf Windows 8.1 oder neuer, in Microsoft Edge oder Opera zu nutzen.",
title:"Nicht unterst\u00fctzer Browser"},GENERIC_ERROR:{description:'Problem beim Abspielen dieses Videos. Bitte versuchen Sie es noch einmal. F\u00fcr weitere Unterst\u00fctzung wenden Sie sich an <a href="//{{contactUsDigitalUrl}}">Kontakt mit dem Kundenservice von Amazon</a>.',title:"Videofehler"},NOTIFICATION_SHOW_MORE:"Mehr anzeigen"},"en-US":{PIN_LOOKUP_ERROR:{description:"We\u2019re having a problem checking your account\u2019s PIN restrictions which is preventing your video from playing. Please try again later, or you can <a href='//{{avSettingsUrl}}' target='_blank'>turn off PIN restrictions</a> to watch your video immediately.",
title:"PIN Lookup Problem"},OPERA_OUT_OF_DATE:{title:"Opera Update Required",description:"A later version of Opera is required for Amazon Video. To check for updates, click the <b>Opera</b> menu, click <b>About Opera</b>, and then click <b>Relaunch Now</b>.",footer:'For more information, please see <a href="//{{systemRequirementsUrl}}" target="_blank">Amazon Video system requirements</a>.'},SL_ACTIVEX:{title:"ActiveX Not Enabled",steps:[{step:"In Internet Explorer, press the <b>Alt</b> key, and then on <b>Tools</b> menu, click <b>Internet options</b>."},
{step:"On the <b>Security</b> tab, click <b>Custom level</b>."},{step:"Scroll down to the <b>ActiveX controls and plug-ins</b> section."},{step:"Click <b>Enable</b> for <b>Run ActiveX controls and plug-ins</b> and <b>Script ActiveX controls marked safe for scripting</b>."},{step:"Click <b>OK</b>, and then restart Internet Explorer."}],description:"To watch your video in Internet Explorer, ActiveX controls must be enabled.",footer:'For further assistance, <a href="//{{contactUsDigitalUrl}}">contact Amazon Customer Service</a>.'},
SL_CORRUPTION_MAC:{title:"Silverlight Problem",steps:[{step:"Close all web browser windows, including this one."},{step:"Click on the Desktop, or open Finder."},{step:"Click <span class='highlight'>Go &gt; Computer</span>."},{step:"Double-click <span class='highlight'>Macintosh HD &gt; Library &gt; Internet Plugins</span>."},{step:"Drag <span class='highlight'>Silverlight.plugin</span> to the Trash."},{step:"Return to this page to install Silverlight."}],description:"There's a problem with the installation of Microsoft Silverlight on your computer. Often, this can be fixed by uninstalling, and then reinstalling Silverlight.",
footer:'For further assistance, <a href="//{{contactUsDigitalUrl}}">contact Amazon Customer Service</a>.'},PIN_MODAL:{incorrect_pin:"We don't recognize the PIN you entered. Please try again or <a href='//{{resetPinUrl}}' target='_blank'>reset your PIN.</a>",description:"Please enter your Amazon Video PIN&#58;",submit_button:"Continue",title:"Viewing Restrictions Enabled",cancel_button:"Cancel",notes:"<a href='//{{resetPinUrl}}' target='_blank'>Reset your PIN</a> or <a href='//{{avSettingsUrl}}' target='_blank'>change viewing restrictions</a>"},
OPERA_MISSING_CDM:{title:"Digital Rights Error",description:"Your web browser is missing a digital rights component. In the address bar, go to <u>opera://plugins</u> and ensure <b>Widevine Content Decryption Module</b> is enabled.",footer:'For further assistance, please contact Amazon Customer Service at <a href="//{{videoHelpUrl}}" target="_blank">{{videoHelpUrl}}</a> and refer to error 7235.'},SWITCH_TO_HTML5:"For more features and less buffering, we recommend using the HTML5 video player on Google Chrome, Internet Explorer 11 on Windows 8.1 or later, Microsoft Edge, or Opera.",
SL_UPGRADE:{button:'<a href="http://go2.microsoft.com/fwlink/?LinkID=149156" target="_blank">Install Silverlight</a>',title:"Your Microsoft Silverlight is out of date",description:"Upgrade your Silverlight plug-in&mdash;it will just take a minute.",footer:'If you\'re experiencing problems with Silverlight, please see our <a target="_blank" href="//{{videoIssuesUrl}}">troubleshooting tips</a>.'},PIN_AGE_VERIFICATION_REQUIRED:{description:"To view this video, age verification is required.",title:"Viewing Restrictions Enabled"},
PIN_SETUP_REQUIRED:{description:"To view this video, a PIN is required. To update your PIN, go to the Amazon Video <a href='//{{setupPinUrl}}' target='_blank'>Settings page</a>.",title:"Viewing Restrictions Enabled"},WINDOWS_UNSUPPORTED_BROWSER:{title:"Unsupported Browser",description:"This web browser isn\u2019t compatible with Amazon Video. Please use one of the following web browsers&#58; <ul> <li>Google Chrome (latest version)</li> <li>Mozilla Firefox (latest version)</li> <li>Microsoft Edge</li> <li>Windows Internet Explorer (version 8 or later)</li> <li>Opera (latest version)</li> </ul>",
footer:'For more information, please see <a href="//{{systemRequirementsUrl}}" target="_blank">Amazon Video system requirements</a>.'},SL_INSTALL:{button:'<a href="http://go2.microsoft.com/fwlink/?LinkID=149156" target="_blank">Install Silverlight</a>',title:"Microsoft Silverlight is not installed",description:"Install the free Silverlight plug-in; it will just take a minute. Please refresh this page when the installation completes. <p>If you have issues after installing, restart your browser and try again. If the issue persists, try using our new HTML5 video player on Chrome, Internet Explorer 11, Microsoft Edge or Opera.</p>",
footer:'Already installed Silverlight? <a target="_blank" href="//{{videoIssuesUrl}}">Get Silverlight plug-in help</a>.'},CHROME_MISSING_CDM:{title:"Digital Rights Error",description:"Your web browser is missing a digital rights component. In the address bar, go to <u>chrome://plugins</u> and ensure <b>Widevine Content Decryption Module</b> is enabled. If missing, install it by going to <u>chrome://components</u> and under <b>WidevineCdm</b>, click <b>Check for update</b>.",footer:'For further assistance, please contact Amazon Customer Service at <a href="//{{videoHelpUrl}}" target="_blank">{{videoHelpUrl}}</a> and refer to error 7235.'},
GENERIC_UNSUPPORTED_BROWSER:{title:"Unsupported Browser",description:"This web browser isn\u2019t compatible with Amazon Video. Please use one of the following web browsers&#58; <ul> <li>Google Chrome (latest version)</li> <li>Mozilla Firefox (latest version)</li> <li>Microsoft Edge</li> <li>Windows Internet Explorer (version 8 or later)</li> <li>Apple Safari (version 5 or later)</li> <li>Opera (latest version)</li> </ul>",footer:'For more information, please see <a href="//{{systemRequirementsUrl}}" target="_blank">Amazon Video system requirements</a>.'},
PIN_VALIDATION_ERROR:{description:"We're having a problem validating your PIN. Please try again. If this problem continues, please <a href='//{{contactUsOrdersUrl}}' target='_blank'>contact Amazon Customer Service</a> and refer to error 5014.",title:"PIN Validation Problem"},LINUX_UNSUPPORTED_BROWSER:{title:"Unsupported Browser",description:"This web browser isn\u2019t compatible with Amazon Video. Please use one of the following web browsers&#58; <ul> <li>Google Chrome (latest version)</li> </ul>",
footer:'For more information, please see <a href="//{{systemRequirementsUrl}}" target="_blank">Amazon Video system requirements</a>.'},NOTIFICATION_DONT_SHOW_AGAIN:"Don't show again",PIN_LOOKUP_ERROR_FSK18:{description:"We\u2019re having a problem checking your account\u2019s PIN restrictions which is preventing your video from playing. Please try again later. If this problem continues, contact Amazon Customer Service and refer to error 5016.",title:"PIN Lookup Problem"},CHROME_OUT_OF_DATE:{title:"Google Chrome Update Required",
description:"A later version of Google Chrome is required for Amazon Video. To update, click the Chrome menu (three horizontal stripes) on the browser toolbar, click <b>About Google Chrome</b>, and then click <b>Relaunch</b>.",footer:'For more information, please see <a href="//{{systemRequirementsUrl}}" target="_blank">Amazon Video system requirements</a>.'},UPDATE_CHROME:{message:"An updated version of Chrome is available which enables an improved HTML5 video web player.",title:"Chrome Update Available",
instructions:"To update, click the Chrome menu (three horizontal stripes) on the browser toolbar, click <b>About Google Chrome</b>, and then click <b>Relaunch</b>."},NOTIFICATION_SHOW_LESS:"Show Less",NOTIFICATION_DISMISS:"Dismiss",SL_BLOCKED:{message:"The Silverlight plugin isn't loading and might be blocked by your browser.",chrome_unblock:'To enable Silverlight, click this icon <span class="chromePluginBlockerIcon"></span> inside the right edge of the address bar, select <b>"Always allow plug-ins on www.amazon.com"</b>, and then click <b>"Done"</b>.',
troubleshoot:'Please see the <a href="//{{videoIssuesUrl}}">Amazon website</a> for additional troubleshooting help. Error: 7303.'},MAC_UNSUPPORTED_BROWSER:{title:"Unsupported Browser",description:"This web browser isn\u2019t compatible with Amazon Video. Please use one of the following web browsers&#58; <ul> <li>Google Chrome (latest version)</li> <li>Mozilla Firefox (latest version)</li> <li>Apple Safari (version 5 or later)</li> <li>Opera (latest version)</li> </ul>",footer:'For more information, please see <a href="//{{systemRequirementsUrl}}" target="_blank">Amazon Video system requirements</a>.'},
SL_CORRUPTION_WINDOWS:{fix_it_tool_steps:[{step:'<a href="http://download.microsoft.com/download/6/C/9/6C970550-32AB-4235-9CDD-7FC9DD848BBB/silverlight.diagcab">Run the Fix It tool</a>'},{step:"After the tool has completed, refresh this page."}],title:"Silverlight Problem",description:"There's a problem with the installation of Microsoft Silverlight on your computer. Microsoft provides a tool that can often fix this problem.",manual_repair_steps:{link_text:"Manual Repair Steps",steps:[{step:"Close all web browser windows, including this one."},
{step:"Click the Start button, type <b>Uninstall a program</b>, and then press <b>Enter</b>.<br> Windows 8: Swipe in from the right edge of the screen, then tap <b>Settings</b>. You can also press Windows key+I. Select <b>Control Panel</b>, and then select <b>Uninstall a program</b>.\n"},{step:"Click <b>Microsoft Silverlight</b>, and then click <b>Uninstall</b>."},{step:"Return to this page to install Silverlight."}],pre_link_text:"If the Microsoft Fix It tool fails to fix the problem, try the ",
post_link_text:"."},footer:'For further assistance, <a href="//{{contactUsDigitalUrl}}">contact Amazon Customer Service</a>.'},FIREFOX_64_UNSUPPORTED:{description:"Amazon Video isn\u2019t supported on the 64-bit version of Firefox. We recommend using our HTML5 video player on Google Chrome, Internet Explorer 11 on Windows 8.1 or later, Microsoft Edge, or Opera.",title:"Unsupported Browser"},GENERIC_ERROR:{description:'We\'re experiencing a problem playing this video. Please try again. For further assistance, <a href="//{{contactUsDigitalUrl}}">contact Amazon Customer Service</a>.',
title:"Video Error"},NOTIFICATION_SHOW_MORE:"Show More"},"ja-JP":{PIN_LOOKUP_ERROR:{description:"\u30a2\u30ab\u30a6\u30f3\u30c8\u306e PIN \u5236\u9650\u306b\u3088\u308a\u52d5\u753b\u304c\u518d\u751f\u3067\u304d\u306a\u304f\u306a\u3063\u3066\u3044\u307e\u3059\u304c\u3001\u305d\u308c\u3092\u30c1\u30a7\u30c3\u30af\u3057\u3066\u3044\u308b\u6700\u4e2d\u306b\u554f\u984c\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u5f8c\u3067\u3082\u3046\u4e00\u5ea6\u8a66\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u307e\u305f\u306f\u3001 <a href='//{{avSettingsUrl}}' target='_blank'>https://{{avSettingsUrl}}</a> \u3067 PIN \u5236\u9650\u3092\u30aa\u30d5\u306b\u3059\u308b\u3068\u3001\u52d5\u753b\u3092\u3059\u3050\u306b\u3054\u89a7\u3044\u305f\u3060\u3051\u307e\u3059\u3002",
title:"PIN \u306e\u30eb\u30c3\u30af\u30a2\u30c3\u30d7\u306e\u554f\u984c"},OPERA_OUT_OF_DATE:{title:"Opera \u3092\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3057\u3066\u304f\u3060\u3055\u3044",description:"Amazon\u30d3\u30c7\u30aa\u3092\u958b\u304f\u306b\u306fOpera\u3092\u6700\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3057\u3066\u3044\u305f\u3060\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u60c5\u5831\u3092\u78ba\u8a8d\u3059\u308b\u306b\u306f <b>\u30d6\u30e9\u30a6\u30b6\u30fc\u5de6\u4e0a\u306eOpera\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066</b> \u30e1\u30cb\u30e5\u30fc\u3092\u8868\u793a\u3057\u3066 <b>Opera\u306b\u3064\u3044\u3066\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068 </b>\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u304c\u5b9f\u884c\u3055\u308c\u3066<b>\u30d0\u30fc\u30b8\u30e7\u30f3\u60c5\u5831\u3092\u8868\u793a\u3055\u308c\u307e\u3059 </b>.",
footer:'\u8a73\u7d30\u306b\u3064\u3044\u3066\u306f\u3001<a href="//{{systemRequirementsUrl}}" target="_blank"> Amazon\u30d3\u30c7\u30aa\u3001\u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u30fc\u3067\u306e\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u518d\u751f\u3092\u3054\u89a7\u304f\u3060\u3055\u3044</a>.'},SL_ACTIVEX:{title:"ActiveX \u304c\u6709\u52b9\u5316\u3055\u308c\u3066\u3044\u307e\u305b\u3093",steps:[{step:"Internet Explorer \u3067\u3001<b>[Alt]</b> \u30ad\u30fc\u306e\u6b21\u306b <b>[\u30c4\u30fc\u30eb]</b> \u30e1\u30cb\u30e5\u30fc\u3092\u62bc\u3057\u3001<b>[\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u30aa\u30d7\u30b7\u30e7\u30f3]</b> \u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002"},
{step:"<b>[\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3]</b> \u30bf\u30d6\u3067\u3001<b>[\u30ab\u30b9\u30bf\u30e0\u30ec\u30d9\u30eb]</b> \u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002"},{step:"<b>[ActiveX \u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u3068\u30d7\u30e9\u30b0\u30a4\u30f3]</b> \u30bb\u30af\u30b7\u30e7\u30f3\u307e\u3067\u30b9\u30af\u30ed\u30fc\u30eb\u30c0\u30a6\u30f3\u3057\u307e\u3059\u3002"},{step:"<b>[ActiveX \u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u3068\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u5b9f\u884c]</b> \u3068 <b>[ActiveX \u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u5b89\u5168\u3068\u30de\u30fc\u30af\u4ed8\u3051]</b> \u306e <b>[\u6709\u52b9\u5316]</b> \u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002"},
{step:"<b>[OK]</b> \u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u3001Internet Explorer \u3092\u518d\u8d77\u52d5\u3057\u307e\u3059\u3002"}],description:"Internet Explorer \u3067\u52d5\u753b\u3092\u518d\u751f\u3059\u308b\u306b\u306f\u3001ActiveX \u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u304c\u6709\u52b9\u306b\u306a\u3063\u3066\u3044\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002",footer:'\u3055\u3089\u306b\u30d8\u30eb\u30d7\u304c\u5fc5\u8981\u306a\u5834\u5408\u306f\u3001<a href="//{{contactUsDigitalUrl}}">Amazon \u30ab\u30b9\u30bf\u30de\u30fc\u30b5\u30fc\u30d3\u30b9\u3078\u306e\u304a\u554f\u3044\u5408\u308f\u305b</a> \u307e\u3067\u3054\u9023\u7d61\u304f\u3060\u3055\u3044\u3002'},
SL_CORRUPTION_MAC:{title:"Silverlight \u306e\u554f\u984c",steps:[{step:"\u3053\u306e\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u542b\u3081\u3001\u3059\u3079\u3066\u306e\u30a6\u30a7\u30d6 \u30d6\u30e9\u30a6\u30b6 \u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u9589\u3058\u307e\u3059\u3002"},{step:"\u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\u307e\u305f\u306f\u3001\u30d5\u30a1\u30a4\u30f3\u30c0\u3092\u958b\u304d\u307e\u3059\u3002"},{step:"\u300c<b>\u9032\u3080 &gt; \u30b3\u30f3\u30d4\u30e5\u30fc\u30bf</b>\u300d\u306e\u9806\u306b\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002"},
{step:"\u300c<b>Macintosh HD &gt; \u30e9\u30a4\u30d6\u30e9\u30ea &gt; \u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u30d7\u30e9\u30b0\u30a4\u30f3</b>\u300d\u306e\u9806\u306b\u30c0\u30d6\u30eb\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002"},{step:"<b>Silverlight \u30d7\u30e9\u30b0\u30a4\u30f3</b> \u3092\u30b4\u30df\u7bb1\u306b\u30c9\u30e9\u30c3\u30b0\u3057\u307e\u3059\u3002"},{step:"\u3053\u306e\u30da\u30fc\u30b8\u306b\u623b\u3063\u3066\u3001Silverlight \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002"}],
description:"\u304a\u4f7f\u3044\u306e\u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u3078\u306e Microsoft Silverlight \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u554f\u984c\u304c\u3042\u308a\u307e\u3059\u3002\u591a\u304f\u306e\u5834\u5408\u3001\u3053\u308c\u306f Silverlight \u3092\u30a2\u30f3\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304b\u3089\u3001\u518d\u5ea6\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u76f4\u3059\u3053\u3068\u3067\u89e3\u6c7a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002",
footer:'\u3055\u3089\u306b\u30d8\u30eb\u30d7\u304c\u5fc5\u8981\u306a\u5834\u5408\u306f\u3001<a href="//{{contactUsDigitalUrl}}">Amazon \u30ab\u30b9\u30bf\u30de\u30fc\u30b5\u30fc\u30d3\u30b9\u3078\u306e\u304a\u554f\u3044\u5408\u308f\u305b</a> \u307e\u3067\u3054\u9023\u7d61\u304f\u3060\u3055\u3044\u3002'},PIN_MODAL:{incorrect_pin:"PIN\u304c\u6b63\u3057\u304f\u3042\u308a\u307e\u305b\u3093\u3002\u3082\u3046\u4e00\u5ea6\u3084\u308a\u76f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002",description:"Amazon \u30d3\u30c7\u30aaPIN \u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044&#58;",
submit_button:"\u7d9a\u884c",title:"\u8996\u8074\u5236\u9650\u304c\u6709\u52b9\u5316\u3055\u308c\u307e\u3057\u305f",cancel_button:"\u30ad\u30e3\u30f3\u30bb\u30eb",notes:"<a href='//{{resetPinUrl}}' target='_blank'>PIN \u3092\u304a\u5fd8\u308c\u306b\u306a\u3063\u305f\u5834\u5408</a> \u307e\u305f\u306f <a href='//{{avSettingsUrl}}' target='_blank'>\u8996\u8074\u5236\u9650\u3092\u5909\u66f4</a>"},OPERA_MISSING_CDM:{title:"\u30c7\u30b8\u30bf\u30eb\u6a29\u5229\u30a8\u30e9\u30fc",description:"\u304a\u4f7f\u3044\u306e\u30d6\u30e9\u30a6\u30b6\u306b\u306fDRM\u898f\u683c\u304c\u5b9f\u88c5\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002<u>opera://plugins</u> \u306b\u30a2\u30af\u30bb\u30b9\u3057\u3001<b>Widevine Content Decryption Module</b> \u304c\u6709\u52b9\u5316\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u3054\u78ba\u8a8d\u304f\u3060\u3055\u3044\u3002",
footer:'\u624b\u9806\u306b\u3054\u4e0d\u660e\u306a\u70b9\u304c\u3042\u308a\u307e\u3057\u305f\u3089\u3001<a href="//{{videoHelpUrl}}" target="_blank">{{videoHelpUrl}}</a> \u3088\u308a\u3001\u30ab\u30b9\u30bf\u30de\u30fc\u30b5\u30fc\u30d3\u30b9\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3001\u30a8\u30e9\u30fc7235\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044\u3002'},SWITCH_TO_HTML5:"\u5feb\u9069\u306a\u8996\u8074\u306e\u305f\u3081\u306b\u3001Google Chrome, Internet Explorer 11(Windows 8.1\u307e\u305f\u306f\u305d\u308c\u4ee5\u4e0a), Microsoft Edge, Opera\u3067\u306eHTML5\u5bfe\u5fdc\u30d3\u30c7\u30aa\u30d7\u30ec\u30a4\u30e4\u30fc\u306e\u4f7f\u7528\u3092\u304a\u52e7\u3081\u3057\u307e\u3059\u3002",
SL_UPGRADE:{button:'<a href="http://www.microsoft.com/ja-jp/silverlight/download.aspx">Silverlight \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb</a>',title:"\u3054\u4f7f\u7528\u306e Microsoft Silverlight \u306f\u6700\u65b0\u3067\u306f\u3042\u308a\u307e\u305b\u3093",description:"\u304a\u5ba2\u69d8\u306e Silverlight \u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002-in&mdash;\u308f\u305a\u304b\u6570\u5206\u3057\u304b\u304b\u304b\u308a\u307e\u305b\u3093\u3002",
footer:'Silverlight \u306e\u554f\u984c\u304c\u767a\u751f\u3057\u305f\u5834\u5408\u306f\u3001<a target="_blank" href="//{{videoIssuesUrl}}">\u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0\u306e\u30d2\u30f3\u30c8</a> \u307e\u3067\u304a\u554f\u3044\u5408\u308f\u305b\u304f\u3060\u3055\u3044\u3002'},PIN_AGE_VERIFICATION_REQUIRED:{description:"\u3053\u306e\u52d5\u753b\u3092\u8868\u793a\u3059\u308b\u306b\u306f\u3001\u5e74\u9f62\u78ba\u8a8d\u304c\u5fc5\u8981\u3067\u3059\u3002",title:"\u8996\u8074\u5236\u9650\u304c\u6709\u52b9\u5316\u3055\u308c\u307e\u3057\u305f"},
PIN_SETUP_REQUIRED:{description:"\u3053\u306e\u52d5\u753b\u3092\u8868\u793a\u3059\u308b\u306b\u306f PIN \u304c\u5fc5\u8981\u3067\u3059\u3002Amazon \u30a4\u30f3\u30b9\u30bf\u30f3\u30c8\u52d5\u753b <a href='//{{setupPinUrl}}' target='_blank'>\u8996\u8074\u5236\u9650\u3092\u5909\u66f4</a> \u306b\u79fb\u52d5\u3057\u3066\u3001PIN \u3092\u66f4\u65b0\u3057\u3066\u304f\u3060\u3055\u3044\u3002",title:"\u8996\u8074\u5236\u9650\u304c\u6709\u52b9\u5316\u3055\u308c\u307e\u3057\u305f"},WINDOWS_UNSUPPORTED_BROWSER:{title:"\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u306a\u3044\u30d6\u30e9\u30a6\u30b6\u30fc",
description:"\u3053\u306eWeb\u30d6\u30e9\u30a6\u30b6\u30fc\u306fAmazon \u30d3\u30c7\u30aa\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u305b\u3093\u3002\u4e0b\u8a18\u306e\u3044\u305a\u308c\u304b\u306eWeb\u30d6\u30e9\u30a6\u30b6\u30fc\u3092\u304a\u4f7f\u3044\u304f\u3060\u3055\u3044&#58; <ul> <li>Google Chrome (\u6700\u65b0\u7248)</li> <li>Mozilla Firefox (\u6700\u65b0\u7248)</li> <li>Microsoft Edge</li> <li>Windows Internet Explorer (version 8 \u4ee5\u4e0a)</li> <li>Opera (\u6700\u65b0\u7248)</li> </ul>",
footer:'\u8a73\u7d30\u306b\u3064\u3044\u3066\u306f\u3001<a href="//{{systemRequirementsUrl}}" target="_blank"> Amazon\u30d3\u30c7\u30aa\u3001\u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u30fc\u3067\u306e\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u518d\u751f\u3092\u3054\u89a7\u304f\u3060\u3055\u3044</a>.'},SL_INSTALL:{button:'<a href="http://www.microsoft.com/ja-jp/silverlight/download.aspx">Silverlight \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb</a>',title:"Microsoft Silverlight \u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u307e\u305b\u3093",
description:"\u7121\u6599\u306e Silverlight \u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u308f\u305a\u304b\u6570\u5206\u3057\u304b\u304b\u304b\u308a\u307e\u305b\u3093\u3002\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u5b8c\u4e86\u3057\u305f\u5f8c\u3001\u3053\u306e\u30da\u30fc\u30b8\u3092\u66f4\u65b0\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002",footer:'Silverlight \u304c\u3059\u3067\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u307e\u3059\u304b\uff1f<a target="_blank" href="//{{videoIssuesUrl}}">Silverlight \u30d7\u30e9\u30b0\u30a4\u30f3\u30d8\u30eb\u30d7</a>\u3092\u3054\u89a7\u304f\u3060\u3055\u3044\u3002'},
CHROME_MISSING_CDM:{title:"\u30c7\u30b8\u30bf\u30eb\u6a29\u5229\u30a8\u30e9\u30fc",description:"\u304a\u4f7f\u3044\u306e\u30d6\u30e9\u30a6\u30b6\u306b\u306fDRM\u898f\u683c\u304c\u5b9f\u88c5\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002<u>chrome://plugins</u> \u306b\u30a2\u30af\u30bb\u30b9\u3057\u3001<b>Widevine Content Decryption Module</b> \u304c\u6709\u52b9\u5316\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u3054\u78ba\u8a8d\u304f\u3060\u3055\u3044\u3002\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u5fc5\u8981\u306a\u5834\u5408\u306b\u306f\u3001<u>chrome://components</u>\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3001\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306b\u8868\u793a\u3055\u308c\u308b<b>WidevineCdm</b>\u306e<b>Check for update</b>\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u304f\u3060\u3055\u3044\u3002",
footer:'\u624b\u9806\u306b\u3054\u4e0d\u660e\u306a\u70b9\u304c\u3042\u308a\u307e\u3057\u305f\u3089\u3001<a href="//{{videoHelpUrl}}" target="_blank">{{videoHelpUrl}}</a> \u3088\u308a\u3001\u30ab\u30b9\u30bf\u30de\u30fc\u30b5\u30fc\u30d3\u30b9\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3001\u30a8\u30e9\u30fc7235\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044\u3002'},GENERIC_UNSUPPORTED_BROWSER:{title:"\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u306a\u3044\u30d6\u30e9\u30a6\u30b6\u30fc",description:"\u3053\u306eWeb\u30d6\u30e9\u30a6\u30b6\u30fc\u306fAmazon \u30d3\u30c7\u30aa\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u305b\u3093\u3002\u4e0b\u8a18\u306e\u3044\u305a\u308c\u304b\u306eWeb\u30d6\u30e9\u30a6\u30b6\u30fc\u3092\u304a\u4f7f\u3044\u304f\u3060\u3055\u3044&#58; <ul> <li>Google Chrome (\u6700\u65b0\u7248)</li> <li>Mozilla Firefox (\u6700\u65b0\u7248)</li> <li>Microsoft Edge</li> <li>Windows Internet Explorer (version 8 \u4ee5\u4e0a)</li> <li>Apple Safari (version 5 \u4ee5\u4e0a)</li> <li>Opera (\u6700\u65b0\u7248)</li> </ul>",
footer:'\u8a73\u7d30\u306b\u3064\u3044\u3066\u306f\u3001<a href="//{{systemRequirementsUrl}}" target="_blank"> Amazon\u30d3\u30c7\u30aa\u3001\u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u30fc\u3067\u306e\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u518d\u751f\u3092\u3054\u89a7\u304f\u3060\u3055\u3044</a>.'},PIN_VALIDATION_ERROR:{description:"\u304a\u5ba2\u69d8\u306e PIN \u306e\u691c\u8a3c\u306b\u554f\u984c\u304c\u3042\u308a\u307e\u3059\u3002\u3082\u3046\u4e00\u5ea6\u8a66\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u3053\u306e\u554f\u984c\u304c\u89e3\u6c7a\u3057\u306a\u3044\u5834\u5408\u306f\u3001 <a href='//{{contactUsOrdersUrl}}' target='_blank'>https://{{contactUsOrdersUrl}}</a> \u3067 Amazon \u30ab\u30b9\u30bf\u30de\u30fc\u30b5\u30fc\u30d3\u30b9\u306b\u9023\u7d61\u3057\u3066\u3001\u30a8\u30e9\u30fc 5014 \u306b\u3064\u3044\u3066\u6307\u793a\u3092\u4ef0\u3044\u3067\u304f\u3060\u3055\u3044\u3002",
title:"PIN \u306e\u691c\u8a3c\u306e\u554f\u984c"},LINUX_UNSUPPORTED_BROWSER:{title:"\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u306a\u3044\u30d6\u30e9\u30a6\u30b6\u30fc",description:"\u3053\u306eWeb\u30d6\u30e9\u30a6\u30b6\u30fc\u306fAmazon \u30d3\u30c7\u30aa\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u305b\u3093\u3002\u4e0b\u8a18\u306e\u3044\u305a\u308c\u304b\u306eWeb\u30d6\u30e9\u30a6\u30b6\u30fc\u3092\u304a\u4f7f\u3044\u304f\u3060\u3055\u3044&#58; <ul> <li>Google Chrome (\u6700\u65b0\u7248)</li> </ul>",
footer:'\u8a73\u7d30\u306b\u3064\u3044\u3066\u306f\u3001<a href="//{{systemRequirementsUrl}}" target="_blank"> Amazon\u30d3\u30c7\u30aa\u3001\u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u30fc\u3067\u306e\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u518d\u751f\u3092\u3054\u89a7\u304f\u3060\u3055\u3044</a>.'},NOTIFICATION_DONT_SHOW_AGAIN:"\u4eca\u5f8c\u8868\u793a\u3057\u306a\u3044",PIN_LOOKUP_ERROR_FSK18:{description:"\u30a2\u30ab\u30a6\u30f3\u30c8\u306e PIN \u5236\u9650\u306b\u3088\u308a\u52d5\u753b\u304c\u518d\u751f\u3067\u304d\u306a\u304f\u306a\u3063\u3066\u3044\u307e\u3059\u304c\u3001\u305d\u308c\u3092\u30c1\u30a7\u30c3\u30af\u3057\u3066\u3044\u308b\u6700\u4e2d\u306b\u554f\u984c\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u5f8c\u3067\u3082\u3046\u4e00\u5ea6\u8a66\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u3053\u306e\u554f\u984c\u304c\u89e3\u6c7a\u3057\u306a\u3044\u5834\u5408\u306f\u3001 Amazon \u30ab\u30b9\u30bf\u30de\u30fc\u30b5\u30fc\u30d3\u30b9\u306b\u9023\u7d61\u3057\u3066\u3001\u30a8\u30e9\u30fc 5016 \u306b\u3064\u3044\u3066\u6307\u793a\u3092\u4ef0\u3044\u3067\u304f\u3060\u3055\u3044\u3002",
title:"PIN \u306e\u30eb\u30c3\u30af\u30a2\u30c3\u30d7\u306e\u554f\u984c"},CHROME_OUT_OF_DATE:{title:"Google Chrome\u3092\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3057\u3066\u304f\u3060\u3055\u3044",description:"Amazon\u30d3\u30c7\u30aa\u3092\u958b\u304f\u306b\u306fGoogle Chrome\u3092\u6700\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3057\u3066\u3044\u305f\u3060\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u60c5\u5831\u3092\u78ba\u8a8d\u3059\u308b\u306b\u30d6\u30e9\u30a6\u30b6\u30fc\u306e\u53f3\u4e0a\u306e\u6a2a3\u672c\u30e9\u30a4\u30f3\u30af\u30ea\u30c3\u30af\u3067\u30c4\u30fc\u30eb\u30d0\u30fc\u3092\u8868\u793a\u3057\u3066\u3001<b> \u30d8\u30eb\u30d7\u3068\u6982\u8981(E)\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066</b> Google Chrome(G)\u306b\u3064\u3044\u3066\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068<b>\u6982\u8981\u304c\u8868\u793a\u3055\u308c\u6700\u65b0\u7248\u306b\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3055\u308c\u307e\u3059</b>.",
footer:'\u8a73\u7d30\u306b\u3064\u3044\u3066\u306f\u3001<a href="//{{systemRequirementsUrl}}" target="_blank"> Amazon\u30d3\u30c7\u30aa\u3001\u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u30fc\u3067\u306e\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u518d\u751f\u3092\u3054\u89a7\u304f\u3060\u3055\u3044</a>.'},UPDATE_CHROME:{message:"\u52d5\u753b\u306e\u518d\u751f\u54c1\u8cea\u3092\u5411\u4e0a\u3055\u305b\u308bHTML5\u52d5\u753b\u30d7\u30ec\u30fc\u30e4\u30fc\u306b\u5bfe\u5fdc\u3057\u305fChrome\u3092\u3054\u5229\u7528\u3044\u305f\u3060\u3051\u307e\u3059\u3002",
title:"Chrome\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3092\u5229\u7528\u3067\u304d\u307e\u3059",instructions:"\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3059\u308b\u306b\u306f\u3001\u30d6\u30e9\u30a6\u30b6\u306e\u30c4\u30fc\u30eb\u30d0\u30fc\u306b\u3042\u308b\u30e1\u30cb\u30e5\u30fc\u30a2\u30a4\u30b3\u30f3(3\u672c\u306e\u6a2a\u7dda)\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u300cGoogle Chrome\u306b\u3064\u3044\u3066\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u304b\u3089\u300c\u518d\u8d77\u52d5\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002"},
NOTIFICATION_SHOW_LESS:"\u5c11\u306a\u3044\u8868\u793a",NOTIFICATION_DISMISS:"\u53d6\u308a\u6d88\u3059",SL_BLOCKED:{message:"Silverlight \u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u30ed\u30fc\u30c9\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002\u30d6\u30e9\u30a6\u30b6\u3067\u30d6\u30ed\u30c3\u30af\u3055\u308c\u3066\u3044\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002",chrome_unblock:'Silverlight \u3092\u6709\u52b9\u306b\u3059\u308b\u306b\u306f\u3001\u30a2\u30c9\u30ec\u30b9\u30d0\u30fc\u306e\u53f3\u7aef\u306e\u5185\u5074\u306b\u3042\u308b\u30a2\u30a4\u30b3\u30f3 [<span class="chromePluginBlockerIcon"></span>] \u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u304b\u3089\u3001<b>[\u7d42\u4e86]</b> \u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002',
troubleshoot:'<a href="//{{videoIssuesUrl}}">Amazon \u30a6\u30a7\u30d6\u30b5\u30a4\u30c8</a>\u3067\u3001\u8ffd\u52a0\u306e\u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0\u306b\u95a2\u3059\u308b\u30d8\u30eb\u30d7\u3092\u3054\u53c2\u7167\u304f\u3060\u3055\u3044\u3002\u30a8\u30e9\u30fc: 7303'},MAC_UNSUPPORTED_BROWSER:{title:"\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u306a\u3044\u30d6\u30e9\u30a6\u30b6\u30fc",description:"\u3053\u306eWeb\u30d6\u30e9\u30a6\u30b6\u30fc\u306fAmazon \u30d3\u30c7\u30aa\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u305b\u3093\u3002\u4e0b\u8a18\u306e\u3044\u305a\u308c\u304b\u306eWeb\u30d6\u30e9\u30a6\u30b6\u30fc\u3092\u304a\u4f7f\u3044\u304f\u3060\u3055\u3044&#58; <ul> <li>Google Chrome (\u6700\u65b0\u7248)</li> <li>Mozilla Firefox (\u6700\u65b0\u7248)</li> <li>Apple Safari (version 5 \u4ee5\u4e0a)</li> <li>Opera (\u6700\u65b0\u7248)</li> </ul>",
footer:'\u8a73\u7d30\u306b\u3064\u3044\u3066\u306f\u3001<a href="//{{systemRequirementsUrl}}" target="_blank"> Amazon\u30d3\u30c7\u30aa\u3001\u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u30fc\u3067\u306e\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u518d\u751f\u3092\u3054\u89a7\u304f\u3060\u3055\u3044</a>.'},SL_CORRUPTION_WINDOWS:{fix_it_tool_steps:[{step:'<a href="http://download.microsoft.com/download/6/C/9/6C970550-32AB-4235-9CDD-7FC9DD848BBB/silverlight.diagcab">Fix It \u30c4\u30fc\u30eb\u3092\u5b9f\u884c</a>'},
{step:"\u30c4\u30fc\u30eb\u304c\u5b8c\u4e86\u3057\u305f\u5f8c\u3001\u3053\u306e\u30da\u30fc\u30b8\u3092\u30ea\u30d5\u30ec\u30c3\u30b7\u30e5\u3057\u307e\u3059\u3002"}],title:"Silverlight \u306e\u554f\u984c",description:"\u304a\u4f7f\u3044\u306e\u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u3078\u306e Microsoft Silverlight \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u554f\u984c\u304c\u3042\u308a\u307e\u3059\u3002Microsoft \u306f\u30c4\u30fc\u30eb\u3092\u63d0\u4f9b\u3057\u3066\u304a\u308a\u3001\u591a\u304f\u306e\u5834\u5408\u305d\u308c\u3067\u3053\u306e\u554f\u984c\u3092\u89e3\u6c7a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002",
manual_repair_steps:{link_text:"\u624b\u52d5\u306b\u3088\u308b\u4fee\u5fa9\u30b9\u30c6\u30c3\u30d7",steps:[{step:"\u3053\u306e\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u542b\u3081\u3001\u3059\u3079\u3066\u306e\u30a6\u30a7\u30d6 \u30d6\u30e9\u30a6\u30b6 \u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u9589\u3058\u307e\u3059\u3002"},{step:"[\u30b9\u30bf\u30fc\u30c8] \u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u3001\u300c<b>\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u30a2\u30f3\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb</b>\u300d\u3068\u5165\u529b\u3057\u3001\u305d\u3057\u3066 [<b>\u5165\u529b</b>] \u3092\u62bc\u3057\u307e\u3059\u3002<br> Windows 8: \u753b\u9762\u306e\u53f3\u7aef\u304b\u3089\u30b9\u30ef\u30a4\u30d7\u3057\u3001\u305d\u3057\u3066 [<b>\u8a2d\u5b9a</b>] \u3092\u30bf\u30c3\u30d7\u3057\u307e\u3059\u3002\u307e\u305f\u306f\u3001[Windows] \u30ad\u30fc + [I] \u3092\u62bc\u3057\u307e\u3059\u3002 [<b>\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d1\u30cd\u30eb</b>] \u3092\u9078\u629e\u3057\u3066\u304b\u3089\u3001[<b>\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u30a2\u30f3\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb</b>] \u3092\u9078\u629e\u3057\u307e\u3059\u3002\n"},
{step:"[<b>Microsoft Silverlight</b>] \u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u304b\u3089\u3001[<b>\u30a2\u30f3\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb</b>] \u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002"},{step:"\u3053\u306e\u30da\u30fc\u30b8\u306b\u623b\u3063\u3066\u3001Silverlight \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002"}],pre_link_text:"Microsoft Fix It \u30c4\u30fc\u30eb\u3067\u554f\u984c\u304c\u89e3\u6c7a\u3067\u304d\u306a\u3044\u5834\u5408\u306f\u3001",post_link_text:" \u3092\u8a66\u3057\u3066\u304f\u3060\u3055\u3044\u3002"},
footer:'\u3055\u3089\u306b\u30d8\u30eb\u30d7\u304c\u5fc5\u8981\u306a\u5834\u5408\u306f\u3001<a href="//{{contactUsDigitalUrl}}">Amazon \u30ab\u30b9\u30bf\u30de\u30fc\u30b5\u30fc\u30d3\u30b9\u3078\u306e\u304a\u554f\u3044\u5408\u308f\u305b</a> \u307e\u3067\u3054\u9023\u7d61\u304f\u3060\u3055\u3044\u3002'},FIREFOX_64_UNSUPPORTED:{description:"Amazon\u30d3\u30c7\u30aa\u306fFirefox 64\u30d3\u30c3\u30c8\u7248\u306b\u306f\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u305b\u3093\u3002Web\u30d6\u30e9\u30a6\u30b6\u30fc\u306eGoogle Chrome\u3001Windows 8.1\u306fInternet Explorer 11 \u4ee5\u4e0a\u3001Microsoft Edge\u304a\u3088\u3073Opera\u3067HTML5\u30d3\u30c7\u30aa\u30d7\u30ec\u30a4\u30e4\u30fc\u306e\u4f7f\u7528\u3092\u304a\u3059\u3059\u3081\u3057\u307e\u3059\u3002",
title:"\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u306a\u3044\u30d6\u30e9\u30a6\u30b6\u30fc"},GENERIC_ERROR:{description:'\u518d\u751f\u306b\u554f\u984c\u304c\u767a\u751f\u3057\u3066\u3044\u307e\u3059\u3002\u3082\u3046\u4e00\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002\u3055\u3089\u306b\u30d8\u30eb\u30d7\u304c\u5fc5\u8981\u306a\u5834\u5408\u306f\u3001 <a href="//{{contactUsDigitalUrl}}">Amazon \u30ab\u30b9\u30bf\u30de\u30fc\u30b5\u30fc\u30d3\u30b9\u3078\u306e\u304a\u554f\u3044\u5408\u308f\u305b</a> \u307e\u3067\u3054\u9023\u7d61\u304f\u3060\u3055\u3044\u3002',
title:"\u52d5\u753b\u30a8\u30e9\u30fc"},NOTIFICATION_SHOW_MORE:"\u305d\u306e\u4ed6\u3092\u8868\u793a"}}},{}],3:[function(a,h,g){h.exports={CONTACT_US_DIGITAL:{"*":"/gp/help/contact-us/digital-video.html/ref=aiv_ply_sl_gen_err_help"},CONTACT_US_ORDERS:{"*":"/gp/help/customer/contact-us"},SYSTEM_REQUIREMENTS:{"*":"/gp/help/customer/display.html?nodeId=201422810"},VIDEO_ISSUES:{"*":"/gp/help/customer/display.html?nodeId=201460940"},AV_SETTINGS:{"*":"/gp/video/ontv/settings/ref=dp_pct_pin_chg"},RESET_PIN:{"*":"/gp/video/ontv/settings/ref=dp_pct_pin_forg"},
VIDEO_HELP:{"*":"/videohelp",A1PA6795UKMFR9:"/videohilfe"},SETUP_PIN:{"*":"/pin"}}},{}],4:[function(a,h,g){var e=a("ATVWebMetrics");g=a("atv-constants");var f=g.Weblabs,b=g.DeviceTypeId,c=g.PartnerServiceEndpoint;g=a("ATVWebPlayerInterface");var d=g.AbortEvent,n=g.AbortedEvent,l=g.AsinChangedEvent,p=g.CloseEvent,q=g.EndOfContentEvent,m=g.ErrorSeverity,r=g.InitializedEvent,u=g.PINAcceptedEvent,k=g.PINErrorEvent,A=g.PINRequiredEvent,x=g.PlayerCapabilitiesEvent,E=g.PlayingEvent,y=g.PreparedEvent,M=g.NotificationCancelEvent,
K=g.NotificationEvent,F=g.StoppingEvent,I=g.VideoType,P=a("ATVWebQueryString"),U=a("ATVWebReporting").Reporter,N=a("ATVWebUserAgent");g=a("ATVWebLocalization");var H=g.Locales,R=g.Localization,w=a("atv-preconditions"),D=a("atv-events"),v=a("atv-fsm");g=a("atv-utils");var G=g.LocalStorage,B=g.SessionStorage,L=g.ResourceAcquirer,J=g.AmazonUrlCreator,C=a("atv-objects");g=a("js-logger");var z=a("underscore"),S=a("./extend"),W=a("jssha"),da=a("node-uuid"),ga=a("../WebPlayerFactory/WebPlayerFactorySelector"),
ea=a("../HTML5WebPlayer/HTML5WebPlayerFactory"),ha=a("../iOSWebPlayer/iOSWebPlayerFactory"),ia=a("../KindleWebPlayer/KindleWebPlayerFactory"),ja=a("../SilverlightWebPlayer/SilverlightWebPlayerFactory"),ka=a("../ModalDisplayManager/ErrorDisplayManager"),la=a("../PINDisplayManager/PINDisplayManager"),ma=a("../Qos/QosReporter"),na=a("../NotificationDisplayManager/NotificationDisplayManager"),oa=a("../SpinnerPanel/SpinnerPanel");a("../SpinnerPanel/SpinnerType");var fa=a("ATVWebWeblabClient"),pa=fa.WeblabClient,
qa=fa.WeblabTreatment,ra=a("./Templates/GenericErrorTemplate"),O=a("./Templates/PINAgeVerificationRequiredTemplate"),X=a("./Templates/PINLookupErrorFSK18Template"),Y=a("./Templates/PINSetupRequiredTemplate"),Z=a("./Templates/PINValidationErrorTemplate"),$=a("./Templates/WebPlaybackNotSupportedTemplate"),aa=a("./Html5PlayerNotUsedReason"),Q=a("./PlayerState"),ba=a("./WebsiteAuthTokenClient"),ca=a("./CSUrlPathMap"),t=a("../../AssetUrls.js"),T=a("../../LocalizedStrings.json"),V=a("../../Versions.js"),
s=g.get("DelegatingWebPlayer");a=function(){function a(b,d,f,c,e,n,l,q,p,w,k,g,h,u,W){var v=this;void 0===d&&(d=new U);void 0===f&&(f=new ga);void 0===c&&(c=new ka);void 0===e&&(e=new L);void 0===n&&(n=new na);void 0===l&&(l=new pa);void 0===q&&(q=new ma);void 0===p&&(p=new oa);void 0===w&&(w=new G);void 0===k&&(k=new B);void 0===g&&(g=new ba);void 0===h&&(h=t.assets);void 0===u&&(u=z.now);void 0===W&&(W=window.navigator);this.playerCacheOverride=null;this.onWeblabs=function(b){try{s.info("Acquired weblabs treatments: ",
b);var d=C.isNullOrUndefined(v.playerConfig.weblabs)?{}:v.playerConfig.weblabs;v.playerConfig.weblabs=z.defaults(d,b);s.info("Final weblabs: ",v.playerConfig.weblabs);v.factorySelector.initialize(v.sortedPlayerFactories,v.playerConfig.marketplaceId,v.playerConfig.weblabs,v.playerCacheOverride);C.isNullOrUndefined(v.playerConfig.playerOverride)?v.factorySelector.selectFactory(function(b,d,f,c){if(C.isNullOrUndefined(b)||b.getPlayerName()!==a.HTML5_PLAYER_NAME)v.factorySelector.selectFactory(function(a,
b){v.onFactorySelected(a,b,f,c)},v.playerConfig.requiredCapabilities);else v.onFactorySelected(b,d,f,c)},v.playerConfig.requiredCapabilities,a.HTML5_PLAYER_NAME):v.factorySelector.selectFactoryWithOverride(v.onFactorySelected,v.playerConfig.playerOverride)}catch(f){s.error(f),v.abort(a.UNHANDLED_INITIALIZE_ERROR,f.message,m.Fatal)}};this.onFactorySelected=function(b,d,f,c){try{null===b?v.abort(a.UNSUPPORTED_PLATFORM_ERROR,"No player is supported on this platform.",m.NonFatal,new $(v.os,v.browser,
c)):(s.info("Selected player: "+b.getPlayerName()+", version: "+b.getPlayerVersion()),v.reporter.initializeMetrics(v.playerConfig.marketplaceId,v.playerConfig.userWatchSessionId,b.getMetricsFeature(),v.browser),v.spinnerPanel.initialize(v.playerElement,v.playerConfig.assetUrls,b.getPlayerName()===a.HTML5_PLAYER_NAME?1:0),v.notificationManager.initialize(v.playerElementWrapper,v.playerElement,v.localization,v.amazonUrlCreator),v.selectFactoryNote=f,v.onPlayerCapabilities(b,d))}catch(e){s.error(e),
v.abort(a.UNHANDLED_INITIALIZE_ERROR,e.message,m.Fatal)}};this.onPlayerCreated=function(b){try{v.webPlayer=b;v.attachEventListeners(v.webPlayer);v.tryNotifyPlaybackInitiated();v.pinDisplayManager=new la(v.webPlayer,v.eventEmitter);v.pinDisplayManager.initialize(v.uiElement,v.localization,v.amazonUrlCreator,function(){v.onClosePlayerClicked()});var d=S(!0,{},v.playerConfig,{domElement:v.playerElement});v.webPlayer.once(r,function(){v.spinnerPanel=null;v.fsm.transitionTo(2);v.eventEmitter.emit(r)});
v.initializeTimer.end();v.webPlayer.initialize(d)}catch(f){s.error(f),v.abort(a.UNHANDLED_INITIALIZE_ERROR,f.message,m.Fatal)}};this.fsm=this.createFiniteStateMachine();this.os=N.getOperatingSystem();this.browser=N.getBrowser();this.storage=w;this.sessionStorage=k;this.notifyPlaybackInitiatedOnInitialized=this.hasPlaybackInitiated=!1;C.isNullOrUndefined(b)?this.sortedPlayerFactories=[new ea(V,q),new ha(this.os),new ia(this.browser),new ja(this.os,this.browser,V)]:this.sortedPlayerFactories=b;this.reporter=
d;this.reporter.preInitializeLogging();this.reporter.preInitializeMetrics();this.factorySelector=f;this.errorDisplayManager=c;this.resourceAcquirer=e;this.notificationManager=n;this.weblabClient=l;this.qosReporter=q;this.spinnerPanel=p;this.websiteAuthTokenClient=g;this.assetUrls=h;this.now=u;this.navigator=W;this.eventEmitter=new D.BasicEventEmitter;this.webPlayer=this.pinDisplayManager=null}a.prototype.getState=function(){return this.fsm.getCurrentState()};a.prototype.initialize=function(d){var n=
this;w.checkNotNullAndNotUndefined(d,"A PlayerConfig is required to initialize WebPlayer");w.checkArgument(z.isElement(d.domElement),"Required PlayerConfig property 'domElement' must be a DOM element but was "+d.domElement);w.checkArgument(z.isString(d.marketplaceId),"Required PlayerConfig property 'marketplaceId' must be a string but was "+d.marketplaceId);w.checkArgument(!z.isEmpty(d.marketplaceId),"Required PlayerConfig property 'marketplaceId' cannot be an empty string");if(!this.fsm.transitionTo(1))throw Error("Unable to initialize player while in the "+
Q[this.fsm.getCurrentState()]+" state");this.initializeTimer=e.startTimer(a.INITIALIZE_TIME);var l=this.sanitizePlayerConfig(d),q=P.getParameter(a.HTML5_DIAGNOSTICS_QUERY_PARAM);!0===q?this.storage.set(a.HTML5_DIAGNOSTICS_STORAGE_KEY,"true"):!1===q&&this.storage.remove(a.HTML5_DIAGNOSTICS_STORAGE_KEY);var q="true"===this.storage.get(a.HTML5_DIAGNOSTICS_STORAGE_KEY),p=P.getParameter(a.HTML5_XRAY_BETA_QUERY_PARAM);!0===p?this.storage.set(a.HTML5_XRAY_BETA_STORAGE_KEY,"true"):!1===p&&this.storage.remove(a.HTML5_XRAY_BETA_STORAGE_KEY);
var p="true"===this.storage.get(a.HTML5_XRAY_BETA_STORAGE_KEY),k=P.getParameter(a.PLAYER_CACHE_QUERY_PARAM);null!==k&&(this.playerCacheOverride=k);var r=this.getStoredOverrides();this.userWatchSessionId=C.nestedValue(r,"userWatchSessionId",da.v4());this.playerConfig=S(!0,{assetUrls:this.assetUrls,partnerServiceEndpoint:c.fromMarketplaceId(d.marketplaceId),deviceId:this.createDeviceId(d.customerId),locale:H.getLocaleFromMarketplaceId(d.marketplaceId),userWatchSessionId:this.userWatchSessionId,initialPrimitiveSessionId:this.userWatchSessionId+
this.now(),diagnostics:q,enableXray:p},l);this.playerConfig.locale=H.getStandardizedLocale(this.playerConfig.locale);z.each(a.ALLOWED_PLAYER_OVERRIDES,function(a){n.playerConfig[a]=C.nestedValue(r,a,n.playerConfig[a])});C.isNullOrUndefined(r.weblabs)||(l=z.map(r.weblabs.split("&"),function(a){return a.split(":")}),this.playerConfig.weblabs={},z.each(l,function(a){var b=a[1];z.isString(b)&&(n.playerConfig.weblabs[a[0]]="C"===b?null:qa[b])}));l=C.isNullOrUndefined(this.playerConfig.customerId)?a.UNAUTHENTICATED_CUSTOMER_ID:
this.playerConfig.customerId;this.reporter.initializeLogging(this.playerConfig.marketplaceId,l,this.playerConfig.userWatchSessionId,this.playerConfig.logLevel,a.LOGGING_BATCH_SIZE,this.playerConfig.diagnostics);s.info("Using web player version "+V.WEB_PLAYER);s.info("Player config parameter:",d);s.info("Final player config:",this.playerConfig);s.info("Detected operating system: "+this.os);s.info("Detected browser: "+this.browser);this.createHTMLElements();d=this.playerConfig.assetUrls[location.protocol][a.CSS_ASSET_NAME];
document.querySelector("link[href='"+d+"']")||this.resourceAcquirer.acquire(d);this.localization=new R(this.playerConfig.locale,T,this.playerConfig.marketplaceId);this.amazonUrlCreator=new J(this.localization.getMarketplaceID(),ca);this.errorDisplayManager.initialize(this.uiElement,this.localization,this.amazonUrlCreator,function(){n.onClosePlayerClicked()});try{var g=P.getParameter(a.HTML5_BETA_QUERY_PARAM);!0===g?this.storage.set(a.HTML5_BETA_STORAGE_KEY,"true"):!1===g&&this.storage.remove(a.HTML5_BETA_STORAGE_KEY);
g="true"===this.storage.get(a.HTML5_BETA_STORAGE_KEY);this.playerConfig.enableAvod=g;this.weblabClient.initialize(this.playerConfig.partnerServiceEndpoint,this.playerConfig.marketplaceId,b.HTML5,this.playerConfig.deviceId);this.getWeblabs(f.getActiveWeblabs(),this.onWeblabs)}catch(h){s.error(h),this.abort(a.UNHANDLED_INITIALIZE_ERROR,h.message,m.Fatal)}};a.prototype.getWeblabs=function(b,d){this.weblabClient.getWeblabs(b,function(b,f){C.isNullOrUndefined(f)||e.putMetric(a.GET_WEBLAB_TREATMENT_TIME_METRIC,
f,e.MILLISECONDS);d(b)},function(b,f){s.error("Unable to receive weblabs.",b);e.putMetric(a.GET_WEBLAB_TREATMENT_ERROR_METRIC);C.isNullOrUndefined(f)||e.putMetric(a.GET_WEBLAB_TREATMENT_TIME_METRIC,f,e.MILLISECONDS);d({})})};a.prototype.getAuthToken=function(a){C.isNullOrUndefined(this.playerConfig.authToken)?C.isNullOrUndefined(this.playerConfig.customerId)?(s.info("Customer is not logged in, so an authToken will not be acquired"),a(null)):this.websiteAuthTokenClient.getToken(function(b){a(b)},function(b){s.error("Unable to get auth token: "+
b,b);a(null)}):(s.info("An authToken was passed into playerConfig, so a new one will not be acquired"),a(this.playerConfig.authToken))};a.prototype.prepare=function(b){var d=this;w.checkNotNullAndNotUndefined(b,"DelegatingWebPlayer#prepare: contentConfig cannot be null or undefined");w.checkArgument(z.isString(b.asin),"Required ContentConfig property 'asin' must be a string but was "+b.asin);w.checkArgument(!z.isEmpty(b.asin),"Required ContentConfig property 'asin' cannot be an empty string");var f=
this.sanitizeContentConfig(b);if(!this.fsm.transitionTo(3))throw Error("Unable to prepare player while in the "+Q[this.fsm.getCurrentState()]+" state");try{var c=S(!0,{isAVOD:!1,position:0,trailer:!1,immediateConsumption:!0,userWatchSessionId:this.userWatchSessionId},f);if(!this.ignorePrepare(c)){var e=this.getStoredOverrides();z.each(a.ALLOWED_CONTENT_OVERRIDES,function(a){c[a]=C.nestedValue(e,a,c[a])});c.asin===a.EVENT_HACK_LCID&&(c.videoType="External");s.info("Content config parameter:",b);s.info("Final content config:",
c);this.qosReporter.setAsin(c.asin);this.preparedListener=function(){d.webPlayer.once(F,d.stoppingListener);d.webPlayer.off(r,d.initializedListener);d.fsm.transitionTo(4);d.eventEmitter.emit(y)};this.stoppingListener=function(){d.webPlayer.once(r,d.initializedListener);d.fsm.transitionTo(6);d.eventEmitter.emit(F)};this.initializedListener=function(){d.webPlayer.off(y,d.preparedListener);d.fsm.transitionTo(2);d.eventEmitter.emit(r)};this.webPlayer.once(y,this.preparedListener);this.webPlayer.once(r,
this.initializedListener);this.webPlayer.prepare(c)}}catch(n){s.error(n),this.abort(a.UNHANDLED_PREPARE_ERROR,n.message,m.Fatal)}};a.prototype.play=function(b){w.checkNotNullAndNotUndefined(b,"DelegatingWebPlayer#play: playbackConfig cannot be null or undefined");if(!this.fsm.transitionTo(5))throw Error("Unable to prepare player while in the "+Q[this.fsm.getCurrentState()]+" state");try{var d=this.sanitizePlaybackConfig(b),f=S(!0,{},d);s.info("Playback config parameter:",b);s.info("Final playback config:",
f);this.webPlayer.play(f)}catch(c){s.error(c),this.abort(a.UNHANDLED_PLAY_ERROR,c.message,m.Fatal)}};a.prototype.playbackInitiated=function(a){this.hasPlaybackInitiated=!0;a?(this.tryReportPlaybackInitiated(),this.tryNotifyPlaybackInitiated()):this.notifyPlaybackInitiatedOnInitialized=!0};a.prototype.stop=function(){var b=this;if(this.fsm.transitionTo(6))try{this.hasPlaybackInitiated=!1,this.webPlayer.off(r,this.initializedListener),this.webPlayer.off(y,this.preparedListener),this.webPlayer.off(F,
this.stoppingListener),this.initializedListener=function(){b.fsm.transitionTo(2);b.reporter.flush();b.userWatchSessionId=da.v4();b.qosReporter.updateSessionIds(b.userWatchSessionId,b.userWatchSessionId+b.now());b.reporter.updateLoggingSessionId(b.userWatchSessionId);b.reporter.updateMetricsSessionId(b.userWatchSessionId);b.notifyPlaybackInitiatedOnInitialized&&(b.notifyPlaybackInitiatedOnInitialized=!1,b.playbackInitiated(!0));b.eventEmitter.emit(r)},this.webPlayer.once(r,this.initializedListener),
this.pinDisplayManager.hideModal(),this.webPlayer.stop()}catch(d){s.error(d),this.abort(a.UNHANDLED_STOP_ERROR,d.message,m.Fatal)}};a.prototype.seek=function(a){w.checkNotNullAndNotUndefined(a,"Can't seek to null or undefined position");w.checkArgument(0<=a,"Can't seek to sub-zero position");var b=this.fsm.getCurrentState();4!==b&&5!==b?s.warn("The player has not started playback; ignoring call to seek"):(s.info("Seeking to position: "+a),this.webPlayer.seek(a))};a.prototype.on=function(a,b){this.eventEmitter.on(a,
b)};a.prototype.once=function(a,b){this.eventEmitter.once(a,b)};a.prototype.off=function(a,b){this.eventEmitter.off(a,b)};a.prototype.getPosition=function(){var a=this.fsm.getCurrentState();return 4!==a&&5!==a?(s.warn("The player has not been prepared; ignoring call to getPosition"),0):this.webPlayer.getPosition()};a.prototype.getDuration=function(){var a=this.fsm.getCurrentState();return 4!==a&&5!==a?(s.warn("The player has not been prepared; ignoring call to getDuration"),0):this.webPlayer.getDuration()};
a.prototype.getPlayerCapabilities=function(){w.checkState(0!==this.fsm.getCurrentState(),"Can't get capabilities of an uninitialized player.");return z.clone(this.playerCapabilities)};a.prototype.sanitizePlayerConfig=function(b){var d={domElement:b.domElement,marketplaceId:b.marketplaceId,requiredCapabilities:b.requiredCapabilities};this.isConfigString(b.authToken,"PlayerConfig","authToken")&&(d.authToken=b.authToken);this.isConfigString(b.customerId,"PlayerConfig","customerId")&&(d.customerId=b.customerId);
this.isConfigString(b.locale,"PlayerConfig","locale")&&(d.locale=b.locale);z.isObject(b.features)&&(d.features=b.features);z.each(z.difference(z.keys(b),a.PLAYER_CONFIG_PROPERTIES),function(a){s.warn("PlayerConfig has unsupported property: "+a)});return d};a.prototype.sanitizeContentConfig=function(b){var d={asin:b.asin};this.isConfigBoolean(b.isAVOD,"ContentConfig","isAVOD")&&(d.isAVOD=b.isAVOD);this.isConfigNumber(b.position,"ContentConfig","position")&&(d.position=b.position);var f=this.getEnumValue(b.videoType,
"ContentConfig","videoType",I);C.isNullOrUndefined(f)&&(f=I.Feature,this.isConfigBoolean(b.trailer,"ContentConfig","trailer")&&b.trailer&&(f=I.Trailer),this.isConfigBoolean(b.live,"ContentConfig","live")&&b.live&&(w.checkState(f===I.Feature,'ContentConfig cannot request both "live" and "trailer"'),f=I.Live));d.videoType=I[f];this.isConfigBoolean(b.immediateConsumption,"ContentConfig","immediateConsumption")&&(d.immediateConsumption=b.immediateConsumption);z.each(z.difference(z.keys(b),a.CONTENT_CONFIG_PROPERTIES),
function(a){s.warn("ContentConfig has unsupported property: "+a)});return d};a.prototype.sanitizePlaybackConfig=function(b){var d={playbackInitiatedTime:b.playbackInitiatedTime};this.isConfigNumber(b.cacheType,"PlaybackConfig","cacheType")&&(d.cacheType=b.cacheType);this.isConfigString(b.audioTrackId,"PlaybackConfig","audioTrackId")&&(d.audioTrackId=b.audioTrackId);this.isConfigString(b.clickstreamRefMarker,"PlaybackConfig","clickstreamRefMarker")&&(d.clickstreamRefMarker=b.clickstreamRefMarker);
this.isConfigString(b.clickstreamSessionId,"PlaybackConfig","clickstreamSessionId")&&(d.clickstreamSessionId=b.clickstreamSessionId);z.each(z.difference(z.keys(b),a.PLAYBACK_CONFIG_PROPERTIES),function(a){s.warn("PlaybackConfig has unsupported property: "+a)});return d};a.prototype.isConfigBoolean=function(a,b,d){return C.isNullOrUndefined(a)?!1:z.isBoolean(a)?!0:(s.warn(""+b+" property '"+d+"' must be a boolean but was "+a),!1)};a.prototype.isConfigNumber=function(a,b,d){return C.isNullOrUndefined(a)?
!1:z.isNumber(a)?0>a?(s.warn(""+b+" property '"+d+"' cannot be a negative but was "+a),!1):!0:(s.warn(""+b+" property '"+d+"' must be a number but was "+a),!1)};a.prototype.isConfigString=function(a,b,d){return C.isNullOrUndefined(a)?!1:z.isString(a)?z.isEmpty(a)?(s.warn(""+b+" property '"+d+"' cannot be an empty string"),!1):!0:(s.warn(""+b+" property '"+d+"' must be a string but was "+a),!1)};a.prototype.getEnumValue=function(a,b,d,f){if(C.isNullOrUndefined(a))return null;if(!z.isString(a))return s.warn(""+
b+" property '"+d+"' must be a string but was "+a),null;if(z.isEmpty(a))return s.warn(""+b+" property '"+d+"' cannot be an empty string"),null;var c=[],e;for(e in f)z.isNumber(f[e])&&c.push(e);e=z.find(c,function(b){return b.toLowerCase()===a.toLowerCase()});return C.isNullOrUndefined(e)?(s.warn(""+b+" property '"+d+"' must be one of ["+c.join(",")+"], but was "+a),null):f[e]};a.prototype.ignorePrepare=function(a){if(a.immediateConsumption)return!1;if(!C.isNullOrUndefined(this.navigator.connection)&&
"cellular"===this.navigator.connection.type)return s.warn("pre-cache disabled on Cellular connections, ignoring calls to prepare."),!0;if(a.videoType===I[I.Live])return s.warn("Pre-cache disabled for Live streams, ignoring calls to prepare."),!0};a.prototype.createHTMLElements=function(){this.playerElementWrapper=document.createElement("div");this.playerElementWrapper.style.height="100%";this.playerElementWrapper.style.width="100%";this.playerElement=document.createElement("div");this.playerElement.className=
"webPlayerElement";this.playerElementWrapper.appendChild(this.playerElement);this.uiElement=document.createElement("div");this.uiElement.className="uiElement";this.parentElement=document.createElement("div");this.parentElement.className="webPlayerContainer";this.parentElement.appendChild(this.playerElementWrapper);this.parentElement.appendChild(this.uiElement);this.playerConfig.domElement.innerHTML="";this.playerConfig.domElement.appendChild(this.parentElement)};a.prototype.onAuthToken=function(b,
d){var f=this;try{null!==d&&(this.playerConfig.authToken=d),this.qosReporter.initialize(this.playerConfig.partnerServiceEndpoint,b.getPlayerVersion(),this.playerConfig.authToken,this.playerConfig.marketplaceId,b.getDeviceTypeId(),this.playerConfig.deviceId,this.playerConfig.customerId,this.playerConfig.initialPrimitiveSessionId,this.os.toString(),this.browser.toString()),this.qosReporter.updateSessionIds(this.playerConfig.userWatchSessionId,this.playerConfig.initialPrimitiveSessionId),this.tryReportPlaybackInitiated(),
b.getPlayerName()!==a.HTML5_PLAYER_NAME&&this.reportReasonOfNotUsingHtml5Player(),b.createWebPlayer(this.onPlayerCreated,function(a,b,d,c){f.abort(a,b,d,c)},this.playerConfig.assetUrls)}catch(c){s.error(c),this.abort(a.UNHANDLED_INITIALIZE_ERROR,c.message,m.Fatal)}};a.prototype.onPlayerCapabilities=function(b,d){var f=this;try{this.playerCapabilities=d,this.eventEmitter.emit(x,new x(this.getPlayerCapabilities())),this.getAuthToken(function(a){f.onAuthToken(b,a)})}catch(c){s.error(c),this.abort(a.UNHANDLED_INITIALIZE_ERROR,
c.message,m.Fatal)}};a.prototype.abort=function(a,b,d,f){C.isNullOrUndefined(this.playerCapabilities)&&(this.playerCapabilities={supportsDrm:!1,supportsNativePlayback:!1,supportsWebPlayback:!1,supportsAVOD:!1,supportsMidStreamMTA:!1,supportsHDMovies:!1,supportsHDTVShows:!1,supportsLive:!1},this.eventEmitter.emit(x,new x(this.getPlayerCapabilities())));this.reportFatalError(a,b,d);this.showErrorMessage(f);s.error("The player has terminated due to a Fatal error: "+a+": "+b);this.reporter.flush();this.transitionToAborted()};
a.prototype.transitionToAborted=function(){this.fsm.transitionTo(7);this.eventEmitter.emit(n)};a.prototype.reportFatalError=function(b,d,f){this.qosReporter.reportError(b,f,d);e.putMetric(b);f!==m.Crash&&f!==m.Fatal||e.putMetric(a.FATAL_ERROR_METRIC)};a.prototype.reportReasonOfNotUsingHtml5Player=function(){var a="",a=C.isNullOrUndefined(this.playerConfig.playerOverride)?this.selectFactoryNote:aa.PLAYER_OVERRIDE;this.qosReporter.reportError(ea.HTML5_NOT_USED_ERROR_NAME,m.NoImpact,a);s.warn("HTML5 player is not used because of "+
a)};a.prototype.showErrorMessage=function(a){this.playerElementWrapper.innerHTML="";this.playerElementWrapper=this.playerElement=null;C.isNullOrUndefined(a)?this.errorDisplayManager.showError(new ra):this.errorDisplayManager.showError(a)};a.prototype.hidePlayer=function(){this.playerElementWrapper.style.height="1px";this.playerElementWrapper.style.width="1px"};a.prototype.showPlayer=function(){C.isNullOrUndefined(this.playerElementWrapper)||(this.playerElementWrapper.style.height="100%",this.playerElementWrapper.style.width=
"100%")};a.prototype.proxyEvent=function(a,b){var d=this;a.on(b,function(a){d.eventEmitter.emit(b,a)})};a.prototype.attachEventListeners=function(b){var f=this;b.on(d,function(a){null!==a.getError()&&s.error(a.getError());f.abort(a.getErrorName(),a.getErrorMessage(),a.getErrorSeverity(),a.getTemplate())});b.on(n,function(){f.transitionToAborted()});b.on(M,function(a){f.notificationManager.cancelNotification(a.getNotification())});b.on(K,function(a){f.notificationManager.addNotification(a)});b.on(A,
function(a){f.onPINRequired(a)});b.on(u,function(){f.showPlayer()});b.on(k,function(){f.abort(a.PIN_VALIDATION_ERROR,"An error occurred while attempting to validate the customer's PIN",m.Fatal,new Z)});this.proxyEvent(b,l);this.proxyEvent(b,p);this.proxyEvent(b,q);this.proxyEvent(b,E)};a.prototype.onPINRequired=function(b){b.getRequiresPINSetup()?this.abort(a.PIN_SETUP_REQUIRED_ERROR,"PIN on playback is required but the customer does not have a PIN set up",m.NonFatal,new Y):b.getRequiresAgeVerification()?
this.abort(a.PIN_AGE_VERIFICATION_ERROR,"Age verification on playback is required but the customer does not have age verified",m.NonFatal,new O):this.showPINModal(b.getPINLength(),b.getHidePlayer())};a.prototype.onClosePlayerClicked=function(){this.showPlayer();this.eventEmitter.emit(p)};a.prototype.createDeviceId=function(a){return(new W(a+(navigator&&navigator.userAgent?navigator.userAgent:""),"TEXT")).getHash("SHA-224","HEX")};a.prototype.showPINModal=function(b,d){d&&this.hidePlayer();try{this.pinDisplayManager.requestPIN(b)}catch(f){this.abort(a.PIN_LOOKUP_ERROR,
"An error occurred while attempting to validate the customer's PIN",m.Fatal,new X)}};a.prototype.tryNotifyPlaybackInitiated=function(){null!==this.webPlayer&&this.hasPlaybackInitiated&&this.webPlayer.playbackInitiated()};a.prototype.tryReportPlaybackInitiated=function(){this.qosReporter.isInitialized()&&this.hasPlaybackInitiated&&this.qosReporter.reportInformation(a.PLAYBACK_INITIATED)};a.prototype.getStoredOverrides=function(){try{var b=this.sessionStorage.get(a.OVERRIDES_STORAGE_KEY),d=JSON.parse(b);
return z.isObject(d)?d:{}}catch(f){return{}}};a.prototype.createFiniteStateMachine=function(){var a=new v(0);a.addTransition(0,1);a.addTransition(1,2);a.addTransition(1,7);a.addTransition(2,3);a.addTransition(3,4);a.addTransition(3,2);a.addTransition(3,6);a.addTransition(3,7);a.addTransition(4,6);a.addTransition(4,7);a.addTransition(4,5);a.addTransition(5,6);a.addTransition(5,7);a.addTransition(6,2);a.addTransition(6,7);a.onTransition(function(a,b){s.info("Transitioned from "+Q[a]+" to "+Q[b])});
a.onIllegalTransition(function(a,b){s.warn("Attempted illegal state transition from "+Q[a]+" to "+Q[b])});return a};a.EVENT_HACK_LCID="amzn1.dv.lcid.Ext73509-2ae9-4b43-a957-236304d15be1";a.HTML5_PLAYER_NAME="html5";a.HTML5_BETA_STORAGE_KEY="html5_web_player_beta";a.HTML5_BETA_QUERY_PARAM="playerBeta";a.HTML5_DIAGNOSTICS_STORAGE_KEY="html5_web_player_diagnostics";a.HTML5_DIAGNOSTICS_QUERY_PARAM="playerDebug";a.HTML5_XRAY_BETA_STORAGE_KEY="html5_web_player_xray_beta";a.HTML5_XRAY_BETA_QUERY_PARAM="xrayBeta";
a.PLAYER_CACHE_QUERY_PARAM="playerCache";a.OVERRIDES_STORAGE_KEY="playerOverrides";a.LOGGING_BATCH_SIZE=10;a.CSS_ASSET_NAME="WEB_PLAYER_CSS";a.UNAUTHENTICATED_CUSTOMER_ID="UNAUTHENTICATED";a.PLAYER_CONFIG_PROPERTIES="authToken customerId domElement features marketplaceId locale requiredCapabilities".split(" ");a.ALLOWED_PLAYER_OVERRIDES=["playerOverride"];a.CONTENT_CONFIG_PROPERTIES="asin immediateConsumption isAVOD live position trailer".split(" ");a.ALLOWED_CONTENT_OVERRIDES=["position"];a.PLAYBACK_CONFIG_PROPERTIES=
["audioTrackId","clickstreamRefMarker","clickstreamSessionId","playbackInitiatedTime","cacheType"];a.INITIALIZE_TIME="DelegatorInitializeTime";a.FATAL_ERROR_METRIC="FatalError";a.GET_WEBLAB_TREATMENT_ERROR_METRIC="GetWeblabTreatmentError";a.GET_WEBLAB_TREATMENT_TIME_METRIC="GetWeblabTreatmentTime";a.MISSING_AUTH_TOKEN_ERROR="MissingAuthTokenError";a.PIN_AGE_VERIFICATION_ERROR="PINAgeVerificationError";a.PIN_LOOKUP_ERROR="PINLookupError";a.PIN_SETUP_REQUIRED_ERROR="PINSetupRequiredError";a.PIN_VALIDATION_ERROR=
"PINValidationError";a.UNHANDLED_INITIALIZE_ERROR="UnhandledInitializeError";a.UNHANDLED_PREPARE_ERROR="UnhandledPrepareError";a.UNHANDLED_PLAY_ERROR="UnhandledPlayError";a.UNHANDLED_STOP_ERROR="UnhandledStopError";a.UNSUPPORTED_PLATFORM_ERROR="UnsupportedPlatformError";a.PLAYBACK_INITIATED="PlaybackInitiated";return a}();h.exports=a},{"../../AssetUrls.js":1,"../../LocalizedStrings.json":2,"../../Versions.js":53,"../HTML5WebPlayer/HTML5WebPlayerFactory":16,"../KindleWebPlayer/KindleWebPlayerFactory":18,
"../ModalDisplayManager/ErrorDisplayManager":19,"../NotificationDisplayManager/NotificationDisplayManager":23,"../PINDisplayManager/PINDisplayManager":24,"../Qos/QosReporter":26,"../SilverlightWebPlayer/SilverlightWebPlayerFactory":35,"../SpinnerPanel/SpinnerPanel":41,"../SpinnerPanel/SpinnerType":42,"../WebPlayerFactory/WebPlayerFactorySelector":49,"../iOSWebPlayer/iOSWebPlayerFactory":52,"./CSUrlPathMap":3,"./Html5PlayerNotUsedReason":5,"./PlayerState":6,"./Templates/GenericErrorTemplate":7,"./Templates/PINAgeVerificationRequiredTemplate":8,
"./Templates/PINLookupErrorFSK18Template":9,"./Templates/PINSetupRequiredTemplate":10,"./Templates/PINValidationErrorTemplate":11,"./Templates/WebPlaybackNotSupportedTemplate":12,"./WebsiteAuthTokenClient":13,"./extend":14,ATVWebLocalization:108,ATVWebMetrics:109,ATVWebPlayerInterface:135,ATVWebQueryString:136,ATVWebReporting:144,ATVWebUserAgent:158,ATVWebWeblabClient:161,"atv-constants":66,"atv-events":75,"atv-fsm":76,"atv-objects":84,"atv-preconditions":85,"atv-utils":93,"js-logger":164,jssha:165,
"node-uuid":167,underscore:173}],5:[function(a,h,g){a=function(){function a(){}a.PLAYER_OVERRIDE="PlayerOverride";a.WEBLAB="Weblab";a.MISSING_WIDEVINE_CDM="MissingWidevineCDM";a.MISSING_PREFIXED_WIDEVINE_CDM="MissingPrefixedWidevineCDM";a.MISSING_PLAYREADY_CDM="MissingPlayReadyCDM";a.MISSING_CODEC_IN_PLAYREADY_CDM="MissingCodecInPlayReadyCDM";a.SAFARI_SWITCHED_TO_SILVERLIGHT="SafariSwitchedToSilverlight";a.UNKNOWN="UNKNOWN";a.UNSUPPORTED_BROWSER="UnsupportedBrowser";a.MISSING_MEDIA_SOURCE="MissingMediaSource";
return a}();h.exports=a},{}],6:[function(a,h,g){var e;a=e||(e={});a[a.UNINITIALIZED=0]="UNINITIALIZED";a[a.INITIALIZING=1]="INITIALIZING";a[a.INITIALIZED=2]="INITIALIZED";a[a.PREPARING=3]="PREPARING";a[a.PREPARED=4]="PREPARED";a[a.PLAYING=5]="PLAYING";a[a.STOPPING=6]="STOPPING";a[a.ABORTED=7]="ABORTED";h.exports=e},{}],7:[function(a,h,g){var e=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype;a.prototype=new c};a=
function(a){function b(){a.call(this,b.KEY)}e(b,a);b.KEY="GENERIC_ERROR";return b}(a("../../ModalDisplayManager/StandardModalTemplate"));h.exports=a},{"../../ModalDisplayManager/StandardModalTemplate":22}],8:[function(a,h,g){var e=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype;a.prototype=new c};a=function(a){function b(){a.call(this,b.KEY)}e(b,a);b.KEY="PIN_AGE_VERIFICATION_REQUIRED";return b}(a("../../ModalDisplayManager/StandardModalTemplate"));
h.exports=a},{"../../ModalDisplayManager/StandardModalTemplate":22}],9:[function(a,h,g){var e=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype;a.prototype=new c};a=function(a){function b(){a.call(this,b.KEY)}e(b,a);b.KEY="PIN_LOOKUP_ERROR_FSK18";return b}(a("../../ModalDisplayManager/StandardModalTemplate"));h.exports=a},{"../../ModalDisplayManager/StandardModalTemplate":22}],10:[function(a,h,g){var e=this.__extends||
function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype;a.prototype=new c};a=function(a){function b(){a.call(this,b.KEY)}e(b,a);b.KEY="PIN_SETUP_REQUIRED";return b}(a("../../ModalDisplayManager/StandardModalTemplate"));h.exports=a},{"../../ModalDisplayManager/StandardModalTemplate":22}],11:[function(a,h,g){var e=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype;
a.prototype=new c};a=function(a){function b(){a.call(this,b.KEY)}e(b,a);b.KEY="PIN_VALIDATION_ERROR";return b}(a("../../ModalDisplayManager/StandardModalTemplate"));h.exports=a},{"../../ModalDisplayManager/StandardModalTemplate":22}],12:[function(a,h,g){var e=this.__extends||function(a,b){function c(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);c.prototype=b.prototype;a.prototype=new c};g=a("ATVWebUserAgent");var f=g.BrowserType;a("../../WebPlayerFactory/NoWebPlaybackReason");
var b=a("atv-objects"),c=g.OperatingSystemFamily;a=function(a){function n(e,p,q){var m={};m[0]=n.UPDATE_BROWSER_KEYS;m[2]=n.MISSING_CDM_KEYS;m[3]=n.UNSUPPORTED_BROWSER_KEYS;p=m[q][f[p.getType()]];b.isNullOrUndefined(p)&&(p=n.UNSUPPORTED_BROWSER_OS_KEYS[c[e.getFamily()]]);p=b.isNullOrUndefined(p)?n.GENERIC_UNSUPPORTED_BROWSER:p;a.call(this,p)}e(n,a);n.GENERIC_UNSUPPORTED_BROWSER="GENERIC_UNSUPPORTED_BROWSER";n.UPDATE_BROWSER_KEYS={Chrome:"CHROME_OUT_OF_DATE",Opera:"OPERA_OUT_OF_DATE"};n.MISSING_CDM_KEYS=
{Chrome:"CHROME_MISSING_CDM",Opera:"OPERA_MISSING_CDM"};n.UNSUPPORTED_BROWSER_KEYS={Firefox64:"FIREFOX_64_UNSUPPORTED"};n.UNSUPPORTED_BROWSER_OS_KEYS={Linux:"LINUX_UNSUPPORTED_BROWSER",Mac:"MAC_UNSUPPORTED_BROWSER",Windows:"WINDOWS_UNSUPPORTED_BROWSER"};return n}(a("../../ModalDisplayManager/StandardModalTemplate"));h.exports=a},{"../../ModalDisplayManager/StandardModalTemplate":22,"../../WebPlayerFactory/NoWebPlaybackReason":48,ATVWebUserAgent:158,"atv-objects":84}],13:[function(a,h,g){var e=a("ATVWebErrors"),
f=a("ATVWebRetry").ExponentialBackoffRetry,b=a("ATVWebMetrics"),c=a("atv-objects"),d=a("atv-preconditions");g=a("js-logger");var n=a("node-uuid"),l=a("underscore"),p=g.get("WebsiteAuthTokenClient");a=function(){function a(){}a.prototype.getToken=function(c,e){var n=this;d.checkNotNullAndNotUndefined(c,"WebsiteAuthTokenClient#getToken: onSuccess cannot be null or undefined");d.checkNotNullAndNotUndefined(e,"WebsiteAuthTokenClient#getToken: onError cannot be null or undefined");(new f).withMaxAttempts(a.MAX_ATTEMPTS).withInitialIntervalMs(500).withExponentialFactor(2).withRandomizationFactor(200).onSuccess(c).onError(function(d){b.putMetric(a.AUTH_TOKEN_ERROR);
e(d)}).onAttempt(function(b,d,c){n.sendRequest(c,function(c){p.error("Attempt "+(b+1)+" of "+a.MAX_ATTEMPTS+": "+c.message);d(c)})}).execute()};a.prototype.sendRequest=function(d,f){var g="onWebToken_"+n.v4().replace(/-/g,""),k=null,h=!1,x=null,E=null;window[g]=function(b){h||(null!==k&&k.end(),clearTimeout(x),clearTimeout(E),h=!0,c.isNullOrUndefined(b)?f(e.newError(a.AUTH_TOKEN_ERROR,"Response did not include a token")):(b=l.isUndefined(b.token)?null:b.token,d(b)))};var y=document.createElement("script");
y.src="https://"+window.location.host+a.TOKEN_ENDPOINT+"?callback="+g;y.onload=function(){h||(clearTimeout(x),E=setTimeout(function(){h=!0;f(e.newError(a.AUTH_TOKEN_ERROR,"onload event was triggered for JSONP request with the callback being invoked"))},a.WAIT_AFTER_ONLOAD_TIME_MS))};y.onerror=function(){h||(clearTimeout(x),h=!0,f(e.newError(a.AUTH_TOKEN_ERROR,"onerror event was triggered for JSONP request")))};p.info("Sending JSONP request to "+y.src);k=b.startTimer(a.AUTH_TOKEN_TIME);document.getElementsByTagName("head")[0].appendChild(y);
x=setTimeout(function(){h=!0;f(e.newError(a.AUTH_TOKEN_ERROR,"JSONP request timed out after "+a.REQUEST_TIMEOUT_MS+" ms"))},a.REQUEST_TIMEOUT_MS)};a.AUTH_TOKEN_TIME="AuthTokenTime";a.AUTH_TOKEN_ERROR="AuthTokenError";a.MAX_ATTEMPTS=4;a.WAIT_AFTER_ONLOAD_TIME_MS=1E3;a.REQUEST_TIMEOUT_MS=4E3;a.TOKEN_ENDPOINT="/gp/video/streaming/player-token.json";return a}();h.exports=a},{ATVWebErrors:94,ATVWebMetrics:109,ATVWebRetry:151,"atv-objects":84,"atv-preconditions":85,"js-logger":164,"node-uuid":167,underscore:173}],
14:[function(a,h,g){function e(a){for(var b=1;b<arguments.length;b++);var c,f,m,g,h=arguments[0]||{},k=1,A=arguments.length,x=!1;"boolean"===typeof h&&(x=h,h=arguments[1]||{},k=2);"object"===typeof h||d.isFunction(h)||(h={});A===k&&(h=this,--k);for(;k<A;k++)if(null!=(g=arguments[k]))for(m in g)c=h[m],b=g[m],h!==b&&(x&&b&&(d.isPlainObject(b)||(f=d.isArray(b)))?(f?(f=!1,c=c&&d.isArray(c)?c:[]):c=c&&d.isPlainObject(c)?c:{},h[m]=e(x,c,b)):void 0!==b&&(h[m]=b));return h}var f={},b=f.toString,c=f.hasOwnProperty,
d={isFunction:function(a){return"function"===d.type(a)},isArray:Array.isArray||function(a){return"array"===d.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?String(a):"object"===typeof a||"function"===typeof a?f[b.call(a)]||"object":typeof a},isPlainObject:function(a){if(!a||"object"!==d.type(a)||a.nodeType||d.isWindow(a))return!1;try{if(a.constructor&&!c.call(a,"constructor")&&!c.call(a.constructor.prototype,
"isPrototypeOf"))return!1}catch(b){return!1}for(var f in a);return void 0===f||c.call(a,f)},each:function(a,b){var c,f,e=a.length;c=a.length;var g=d.type(a);c=d.isWindow(a)?!1:1===a.nodeType&&c?!0:"array"===g||"function"!==g&&(0===c||"number"===typeof c&&0<c&&c-1 in a);if(c)for(f=0;f<e&&(c=b.call(a[f],f,a[f]),!1!==c);f++);else for(f in a)if(c=b.call(a[f],f,a[f]),!1===c)break;return a}};d.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){f["[object "+b+"]"]=
b.toLowerCase()});h.exports=e},{}],15:[function(a,h,g){var e=a("ATVWebMetrics"),f=a("atv-objects"),b=a("atv-preconditions"),c=a("ATVWebRetry").ExponentialBackoffRetry,d=a("atv-utils").ResourceAcquirer,n=a("js-logger").get("HTML5JavaScriptClient"),l=a("underscore");a=function(){function a(b){void 0===b&&(b=new d(a.TIMEOUT_MS));this.resourceAcquirer=b}a.prototype.acquirePlayer=function(d,m,g){var h=this;b.checkArgument(l.isString(d)&&!l.isEmpty(d),"url must be a valid string");b.checkArgument(l.isFunction(m),
"onSuccess must be a function");b.checkArgument(l.isFunction(g),"onError must be a function");(new c).withMaxAttempts(a.MAX_ATTEMPTS).withInitialIntervalMs(1E3).withExponentialFactor(2).withRandomizationFactor(200).withMaxElapsedTimeMs(a.TIMEOUT_MS).onSuccess(m).onError(g).onAttempt(function(b,c,l){var m=e.startTimer(a.JAVASCRIPT_DOWNLOAD_TIME);h.resourceAcquirer.acquire(d,function(d){f.isNullOrUndefined(d)&&!f.isNullOrUndefined(CascadesWebPlayer)?(m.end(),l(new CascadesWebPlayer)):(n.error("Attempt "+
(b+1)+" of "+a.MAX_ATTEMPTS+": "+d.message),c(d))})}).execute()};a.JAVASCRIPT_DOWNLOAD_TIME="HTML5JavaScriptDownloadTime";a.TIMEOUT_MS=3E4;a.MAX_ATTEMPTS=4;return a}();h.exports=a},{ATVWebMetrics:109,ATVWebRetry:151,"atv-objects":84,"atv-preconditions":85,"atv-utils":93,"js-logger":164,underscore:173}],16:[function(a,h,g){var e=a("ATVWebPlayerInterface").ErrorSeverity,f=a("ATVWebUserAgent"),b=f.BrowserType,c=f.OperatingSystemFamily,d=a("atv-constants"),n=d.Weblabs,l=a("ATVWebWeblabClient").WeblabTreatment,
p=a("ATVWebMetrics"),q=a("atv-objects"),m=a("atv-preconditions"),r=a("atv-utils").LocalStorage,u=a("../DelegatingWebPlayer/Html5PlayerNotUsedReason");a("../WebPlayerFactory/NoWebPlaybackReason");g=a("js-logger");var k=a("underscore"),A=a("./HTML5JavaScriptClient"),x=a("ATVWebResourceLoading").CachingScriptLoader,E=a("../../Versions.js"),y=g.get("HTML5WebPlayerFactory");a=function(){function a(b,d,c,f,e){void 0===c&&(c=new r);void 0===f&&(f=new x);void 0===e&&(e=new A);this.isBetaEnabled=!1;m.checkNotNullAndNotUndefined(b,
"HTML5WebPlayerFactory#constructor: playerVersions cannot be null or undefined");m.checkNotNullAndNotUndefined(d,"HTML5WebPlayerFactory#constructor: qosReporter cannot be null or undefined");m.checkArgument(!q.isNullOrUndefined(b[a.PLAYER_NAME]),"HTML5WebPlayerFactory#constructor: playerVersions is missing version for "+a.PLAYER_NAME);this.playerVersion=b[a.PLAYER_NAME];this.qosReporter=d;this.storage=c;this.scriptLoader=f;this.html5JSClient=e}a.prototype.initialize=function(b,d,c){this.marketplaceId=
b;this.weblabs=d;this.cacheOverride=c;this.isBetaEnabled="true"===this.storage.get(a.HTML5_BETA_STORAGE_KEY)};a.prototype.getPlayerName=function(){return a.PLAYER_NAME};a.prototype.getPlayerVersion=function(){return this.playerVersion};a.prototype.getMetricsFeature=function(){return a.METRICS_FEATURE};a.prototype.getDeviceTypeId=function(){return d.DeviceTypeId.HTML5};a.prototype.getPlayerCapabilities=function(d,e,p){void 0===e&&(e={});var m=f.getOperatingSystem(p),g=f.getBrowser(p);p=g.getType();
var g=g.getVersion(),r={supportsDrm:!0,supportsNativePlayback:!1,supportsWebPlayback:!1,supportsAVOD:!1,supportsMidStreamMTA:!1,supportsHDMovies:k.contains(a.HD_MOVIE_SUPPORTED_OSES,m.getFamily()),supportsHDTVShows:!0,supportsLive:!0},h=u.UNSUPPORTED_BROWSER,x=3,m=m.getFamily()!==c.Android||this.weblabs[n.HTML5_CHROME_ANDROID]===l.T1;if(q.isNullOrUndefined(window.MediaSource))r.supportsWebPlayback=!1,x=3,h=u.MISSING_MEDIA_SOURCE;else if((p===b.Chrome||p===b.Opera)&&m)if(m=0>=f.Version.fromNumber(a.MINIMUM_CHROME_SUPPORTED_VERSION).compareTo(g),
g=0>=f.Version.fromNumber(a.MINIMUM_OPERA_SUPPORTED_VERSION).compareTo(g),p===b.Chrome&&!m||p===b.Opera&&!g)r.supportsWebPlayback=!1,x=0;else if(!1===e.supportsDrm)y.info("No DRM required, not checking Widevine support."),r.supportsWebPlayback=!0,x=null,h="";else{if(!q.isNullOrUndefined(navigator.requestMediaKeySystemAccess)){y.info("navigator.requestMediaKeySystemAccess support detected.");this.supportsWidevine(function(a){h=a?"":u.MISSING_WIDEVINE_CDM;x=(r.supportsWebPlayback=a)?null:2;d(r,h,x)});
return}q.isNullOrUndefined(document.createElement("video").webkitGenerateKeyRequest)||(y.info("HTMLVideoElement#webkitGenerateKeyRequest support detected."),r.supportsWebPlayback=this.canPlayContentTypes(),y.info('canPlayContentTypes "'+a.VIDEO_CONTENT_TYPE+'" and "'+a.AUDIO_CONTENT_TYPE+'": '+r.supportsWebPlayback),h=r.supportsWebPlayback?"":u.MISSING_PREFIXED_WIDEVINE_CDM,x=r.supportsWebPlayback?null:2)}else if(p===b.IE||p===b.Edge)g=0>=f.Version.fromNumber(a.MINIMUM_IE_SUPPORTED_VERSION).compareTo(g),
p!==b.IE||g?!1===e.supportsDrm?(y.info("No DRM required, not checking PlayReady support."),r.supportsWebPlayback=!0,x=null,h=""):q.isNullOrUndefined(window.MSMediaKeys)?(h=u.MISSING_PLAYREADY_CDM,x=2,y.info("No MSMediaKeys object detected. PlayReady not supported")):MSMediaKeys.isTypeSupported(a.PLAY_READY_KEY_SYSTEM,a.VIDEO_CONTENT_TYPE)&&MSMediaKeys.isTypeSupported(a.PLAY_READY_KEY_SYSTEM,a.AUDIO_CONTENT_TYPE)?(y.info("PlayReady support detected."),r.supportsWebPlayback=!0,x=null,h=""):(h=u.MISSING_CODEC_IN_PLAYREADY_CDM,
x=1,y.info("Audio/Video types not supported by MSMediaKeys")):(r.supportsWebPlayback=!1,x=0);else if(p===b.Safari)if(p=0>=f.Version.fromNumber(a.MINIMUM_SAFARI_SUPPORTED_VERSION).compareTo(g),0>=f.Version.fromNumber(a.MINIMUM_NO_DRM_SAFARI_SUPPORTED_VERSION).compareTo(g))if(!1===e.supportsDrm)r.supportsWebPlayback=!0,h="",x=null,y.info("Safari non-DRM support detected.");else if(p){if(this.isBetaEnabled||this.weblabs[n.HTML5_SAFARI]===l.T1)"true"===this.storage.get(a.SAFARI_USE_SILVERLIGHT_KEY)&&
!1!==e.supportsDrm?(r.supportsWebPlayback=!1,h=u.SAFARI_SWITCHED_TO_SILVERLIGHT,y.info("Safari HLS support detected but the customer previously switched to Silverlight.")):(r.supportsWebPlayback=!0,h="",x=null,y.info("Safari HLS support detected."))}else r.supportsWebPlayback=!1,h=u.WEBLAB,x=3,y.info("Safari HLS support detected but disabled by weblab.");else r.supportsWebPlayback=!1,h=u.UNSUPPORTED_BROWSER,x=0,y.info("Safari HLS not supported, browser is out of date.");else if(p===b.Firefox||p===
b.Firefox64)p=0>=f.Version.fromNumber(a.MINIMUM_FIREFOX_SUPPORTED_VERSION).compareTo(g),r.supportsDrm=!1,p?!1===e.supportsDrm?(r.supportsWebPlayback=!0,h="",x=null,y.info("Firefox support detected because no DRM is required.")):(r.supportsWebPlayback=!1,h=u.UNSUPPORTED_BROWSER,x=3,y.info("Firefox not supported because DRM is required.")):(r.supportsWebPlayback=!1,h=u.UNSUPPORTED_BROWSER,x=0,y.info("Firefox not supported, browser is out of date."));d(r,h,x)};a.prototype.createWebPlayer=function(b,
d,c){var f=function(b){b=b&&k.isFunction(b.toString)?b.toString():"Unknown Error";d(a.JAVASCRIPT_DOWNLOAD_ERROR,b,e.Fatal)};c=c[location.protocol][a.JS_ASSET_NAME];var p=this.weblabs[n.HTML5_PLAYER_LOAD];p===l.T1?this.getWebPlayer(c,b,f,k.isBoolean(this.cacheOverride)?this.cacheOverride:!1):p===l.T2?this.getWebPlayer(c,b,f,k.isBoolean(this.cacheOverride)?this.cacheOverride:!0):this.html5JSClient.acquirePlayer(c,b,f);b=q.isNullOrUndefined(p)?"C":l[p];this.qosReporter.reportInformation(a.PLAYER_LOAD_INFO_EVENT,
"treatment: "+b+" url: "+c)};a.prototype.getWebPlayer=function(b,d,c,f){var n=this;void 0===f&&(f=!1);this.scriptLoader.initialize(function(){n.scriptLoader.get("CascadesWebPlayer",E.html5,b,function(b,c){p.putMetric(a.JAVASCRIPT_DOWNLOAD_TIME,b,"ms");c?p.putMetric(a.JAVASCRIPT_DOWNLOAD_CACHE_HIT,1):p.putMetric(a.JAVASCRIPT_DOWNLOAD_CACHE_MISS,1);d(new CascadesWebPlayer)},function(b){b=b&&k.isFunction(b.toString)?b.toString():"Unknown Error";n.qosReporter.reportError(a.JAVASCRIPT_DOWNLOAD_ERROR,e.NonFatal,
b)},c)},f)};a.prototype.canPlayContentTypes=function(){var b=document.createElement("video");return""!==b.canPlayType(a.VIDEO_CONTENT_TYPE)&&""!==b.canPlayType(a.AUDIO_CONTENT_TYPE)};a.prototype.supportsWidevine=function(b){navigator.requestMediaKeySystemAccess(a.WIDEVINE_KEY_SYSTEM,[{initDataTypes:[a.INIT_DATA_TYPE],videoCapabilities:[{contentType:a.VIDEO_CONTENT_TYPE}],audioCapabilities:[{contentType:a.AUDIO_CONTENT_TYPE}]}]).then(function(){y.info("Widevine, "+a.INIT_DATA_TYPE+', "'+a.VIDEO_CONTENT_TYPE+
'", and "'+a.AUDIO_CONTENT_TYPE+'" support detected.');b(!0)})["catch"](function(){y.info("No widevine, "+a.INIT_DATA_TYPE+', "'+a.VIDEO_CONTENT_TYPE+'", and/or "'+a.AUDIO_CONTENT_TYPE+'" support detected.');b(!1)})};a.HTML5_NOT_USED_ERROR_NAME="HTML5PlayerNotUsedWarning";a.JS_ASSET_NAME="CASCADES_WEB_PLAYER_JS";a.MINIMUM_CHROME_SUPPORTED_VERSION=41;a.MINIMUM_FIREFOX_SUPPORTED_VERSION=42;a.MINIMUM_IE_SUPPORTED_VERSION=11;a.MINIMUM_OPERA_SUPPORTED_VERSION=32;a.MINIMUM_SAFARI_SUPPORTED_VERSION=9;a.MINIMUM_NO_DRM_SAFARI_SUPPORTED_VERSION=
8;a.PLAYER_NAME="html5";a.SAFARI_USE_SILVERLIGHT_KEY="safari_use_silverlight";a.HTML5_BETA_STORAGE_KEY="html5_web_player_beta";a.VIDEO_CONTENT_TYPE="video/mp4";a.AUDIO_CONTENT_TYPE="audio/mp4";a.INIT_DATA_TYPE="cenc";a.WIDEVINE_KEY_SYSTEM="com.widevine.alpha";a.PLAY_READY_KEY_SYSTEM="com.microsoft.playready";a.METRICS_FEATURE="HTML5Player";a.JAVASCRIPT_DOWNLOAD_TIME="HTML5JavaScriptDownloadTime";a.JAVASCRIPT_DOWNLOAD_ERROR="HTML5JavaScriptDownloadError";a.JAVASCRIPT_DOWNLOAD_CACHE_HIT="HTML5JavaScriptCacheHit";
a.JAVASCRIPT_DOWNLOAD_CACHE_MISS="HTML5JavaScriptCacheMiss";a.PLAYER_LOAD_INFO_EVENT="HTML5JavaScriptDownloadInfo";a.HD_MOVIE_SUPPORTED_OSES=[c.Windows,c.WindowsPhone,c.ChromeOS,c.Mac];return a}();h.exports=a},{"../../Versions.js":53,"../DelegatingWebPlayer/Html5PlayerNotUsedReason":5,"../WebPlayerFactory/NoWebPlaybackReason":48,"./HTML5JavaScriptClient":15,ATVWebMetrics:109,ATVWebPlayerInterface:135,ATVWebResourceLoading:149,ATVWebUserAgent:158,ATVWebWeblabClient:161,"atv-constants":66,"atv-objects":84,
"atv-preconditions":85,"atv-utils":93,"js-logger":164,underscore:173}],17:[function(a,h,g){g=a("ATVWebPlayerInterface");var e=g.InitializedEvent,f=g.PreparedEvent,b=a("atv-preconditions"),c=a("atv-events").BasicEventEmitter,d=a("js-logger").get("KindleWebPlayer");a=function(){function a(){this.isPrepared=this.isInitialized=!1;this.eventEmitter=new c}a.prototype.initialize=function(a){this.isInitialized=!0;this.eventEmitter.emit(e)};a.prototype.prepare=function(a){b.checkState(this.isInitialized,"KindleWebPlayer must be initialized before prepare()");
b.checkNotNullAndNotUndefined(a,"ContentConfig must be defined to prepare the KindleWebPlayer");b.checkNotNullAndNotUndefined(a.asin,"An ASIN must be defined to prepare the KindleWebPlayer");this.asin=a.asin;this.isPrepared=!0;this.eventEmitter.emit(f)};a.prototype.play=function(){b.checkState(this.isPrepared,"KindleWebPlayer must be prepared before play()");window.location.href=a.OPEN_APP_LINK_URL+this.asin};a.prototype.playbackInitiated=function(){};a.prototype.stop=function(){b.checkState(this.isPrepared,
"KindleWebPlayer must be prepared before stop()");this.asin=null;this.isPrepared=!1;this.eventEmitter.emit(e)};a.prototype.seek=function(a){throw Error("KindleWebPlayer does not support seeking");};a.prototype.on=function(a,b){this.eventEmitter.on(a,b)};a.prototype.once=function(a,b){this.eventEmitter.once(a,b)};a.prototype.off=function(a,b){this.eventEmitter.off(a,b)};a.prototype.getPosition=function(){return 0};a.prototype.getDuration=function(){return 0};a.prototype.getDeviceTypeId=function(){throw Error("iOSWebPlayer#getDeviceTypeId is not supported");
};a.prototype.validatePIN=function(a){d.info("KindleWebPlayer#validatePIN is not implemented.")};a.OPEN_APP_LINK_URL="content://com.amazon.avod.detail/";return a}();h.exports=a},{ATVWebPlayerInterface:135,"atv-events":75,"atv-preconditions":85,"js-logger":164}],18:[function(a,h,g){a("atv-constants");a("ATVWebWeblabClient");var e=a("ATVWebUserAgent").BrowserType,f=a("atv-preconditions"),b=a("./KindleWebPlayer");a=function(){function a(b){this.browser=f.checkNotNullAndNotUndefined(b,"KindleWebPlayerFactory#constructor: browser cannot be null or undefined")}
a.prototype.initialize=function(a,b){};a.prototype.getPlayerName=function(){return a.PLAYER_NAME};a.prototype.getPlayerVersion=function(){return a.PLAYER_VERSION};a.prototype.getMetricsFeature=function(){return a.METRICS_FEATURE};a.prototype.getDeviceTypeId=function(){return""};a.prototype.getPlayerCapabilities=function(a,b){a({supportsDrm:!0,supportsNativePlayback:this.browser.getType()===e.Silk,supportsWebPlayback:!1,supportsAVOD:!0,supportsMidStreamMTA:!0,supportsHDMovies:!0,supportsHDTVShows:!0,
supportsLive:!1})};a.prototype.createWebPlayer=function(a,c,f){a(new b)};a.PLAYER_NAME="kindle";a.PLAYER_VERSION="unknown";a.METRICS_FEATURE="KindlePlayer";return a}();h.exports=a},{"./KindleWebPlayer":17,ATVWebUserAgent:158,ATVWebWeblabClient:161,"atv-constants":66,"atv-preconditions":85}],19:[function(a,h,g){var e=a("atv-utils").HTMLElementUtils;a("ATVWebLocalization");var f=a("atv-preconditions");a("js-logger").get("ErrorDisplayManager");a=function(){function a(){this.onClosePlayerClicked=this.amazonUrlCreator=
this.localization=this.parent=null}a.prototype.initialize=function(a,b,e,l){this.parent=f.checkNotNullAndNotUndefined(a,"ErrorDisplayManager#initialize: parent cannot be null or undefined");this.localization=f.checkNotNullAndNotUndefined(b,"ErrorDisplayManager#initialize: localization cannot be null or undefined");this.amazonUrlCreator=f.checkNotNullAndNotUndefined(e,"ErrorDisplayManager#initialize: amazonUrlCreator cannot be null or undefined");this.onClosePlayerClicked=f.checkNotNullAndNotUndefined(l,
"ErrorDisplayManager#initialize: onClosePlayerClicked cannot be null or undefined")};a.prototype.showError=function(c){f.checkState(null!==this.parent,"ErrorDisplayManager must be initialized before calling showError");f.checkNotNullAndNotUndefined(c,"ErrorDisplayManager#showError: template cannot be null or undefined");var d=document.createElement("div");d.style.height="100%";d.style.width="100%";d.innerHTML=c.renderString(this.localization,this.amazonUrlCreator);this.parent.appendChild(d);c=e.getElementsByClassName(d,
a.CLOSE_PLAYER_BUTTON_CLASS);for(d=0;d<c.length;d++)c[d].onclick=this.onClosePlayerClicked};a.CLOSE_PLAYER_BUTTON_CLASS="closePlayerButton";return a}();h.exports=a},{ATVWebLocalization:108,"atv-preconditions":85,"atv-utils":93,"js-logger":164}],20:[function(a,h,g){var e=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype;a.prototype=new c};g=a("./StandardModalTemplate");a("atv-utils");a=function(a){function b(b){a.call(this,
b)}e(b,a);b.prototype.renderString=function(c,d){return a.prototype.renderString.call(this,c,d,{extraText:b.BUTTON_TEMPLATE})};b.BUTTON_TEMPLATE="<div class='buttonWrapper'>{{{button}}}</div>";return b}(g);h.exports=a},{"./StandardModalTemplate":22,"atv-utils":93}],21:[function(a,h,g){var e=a("atv-objects"),f=a("atv-preconditions"),b=a("mustache");a("atv-utils");a=function(){function a(b){this.mustacheTemplate='<div class="table"><div class="tableCell"><div class="modal">{{>contents}}</div></div></div>';
this.key=f.checkNotNullAndNotUndefined(b,"A Modal requires a key")}a.prototype.renderString=function(a,c,l){f.checkNotNullAndNotUndefined(a,"The parameter 'localization' cannot be null or undefined.");e.isNullOrUndefined(l)&&(l={contents:"{{{description}}}"});c={contactUsDigitalUrl:c.createCSUrl("CONTACT_US_DIGITAL"),contactUsOrdersUrl:c.createCSUrl("CONTACT_US_ORDERS"),systemRequirementsUrl:c.createCSUrl("SYSTEM_REQUIREMENTS"),avSettingsUrl:c.createCSUrl("AV_SETTINGS"),resetPinUrl:c.createCSUrl("RESET_PIN"),
setupPinUrl:c.createCSUrl("SETUP_PIN"),videoHelpUrl:c.createCSUrl("VIDEO_HELP"),videoIssuesUrl:c.createCSUrl("VIDEO_ISSUES")};var p=a.getLocalizedObject(this.key);p.description=a.renderLocalizedString(p.description,c);p.notes=a.renderLocalizedString(p.notes,c);p.footer=a.renderLocalizedString(p.footer,c);p.incorrect_pin=a.renderLocalizedString(p.incorrect_pin,c);p.troubleshoot=a.renderLocalizedString(p.troubleshoot,c);return b.render(this.mustacheTemplate,p,l)};return a}();h.exports=a},{"atv-objects":84,
"atv-preconditions":85,"atv-utils":93,mustache:166}],22:[function(a,h,g){var e=this.__extends||function(a,b){function d(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);d.prototype=b.prototype;a.prototype=new d},f=a("ATVWebUserAgent"),b=f.BrowserType,c=f.Version;g=a("./ModalTemplate");var d=a("atv-objects");a("atv-utils");var n=a("underscore");a=function(a){function p(b){a.call(this,b)}e(p,a);p.prototype.renderString=function(c,e,g){var h="closePlayerButton closePlayer";f.getBrowser().getType()===
b.IE&&0<p.VERSION_9.compareTo(f.getBrowser().getVersion())&&(h+=" ie8");h={closeButton:"<div class='"+h+"'></div>",contents:p.TEMPLATE,extraText:""};d.isNullOrUndefined(g)||n.extend(h,g);return a.prototype.renderString.call(this,c,e,h)};p.VERSION_9=c.fromNumber(9);p.TEMPLATE="<div class='title'>{{{title}}}{{>closeButton}}</div><div class='description'>{{{description}}}{{>extraText}}</div>{{#footer}}<div class='footer'>{{{footer}}}</div>{{/footer}}";return p}(g);h.exports=a},{"./ModalTemplate":21,
ATVWebUserAgent:158,"atv-objects":84,"atv-utils":93,underscore:173}],23:[function(a,h,g){a("ATVWebLocalization");g=a("ATVWebNotificationManager");a("ATVWebPlayerInterface");var e=a("atv-utils").HTMLElementUtils,f=a("js-logger"),b=a("mustache"),c=g.NotificationManager,d=a("atv-objects"),n=a("atv-preconditions"),l=f.get("NotificationDisplayManager");a=function(){function a(b){var d=this;void 0===b&&(b=new c);this.onWindowResize=function(){0<d.notificationContainerElement.offsetHeight&&d.setNotificationAndPlayerHeight()};
this.amazonUrlCreator=this.localization=this.currentNotification=this.notificationContainerElement=null;this.notificationManager=b;this.hidingNotification=!1;this.notificationHiddenCallback=null}a.prototype.initialize=function(c,f,g,h){var k=this;this.parent=n.checkNotNullAndNotUndefined(c,"NotificationDisplayManager requires a parent element");this.playerElement=n.checkNotNullAndNotUndefined(f,"NotificationDisplayManager requires a player element");this.localization=n.checkNotNullAndNotUndefined(g,
"NotificationDisplayManager requires a Localization object");this.amazonUrlCreator=n.checkNotNullAndNotUndefined(h,"ErrorDisplayManager#initialize: amazonUrlCreator cannot be null or undefined");this.notificationManager.initialize(function(a){if(k.hidingNotification)null!==k.notificationHiddenCallback?l.error("Attempted to show a notification while another notification is waiting to be shown"):k.notificationHiddenCallback=function(){k.onShowNotification(a)};else k.onShowNotification(a)},function(a){k.onCloseNotification(a)});
this.messageIsExpanded=!1;this.notificationContainerElement=document.createElement("div");this.notificationContainerElement.className=a.CONTAINER_CSS_CLASS;c={dismiss:this.localization.getLocalizedString(a.DISMISS_STRING_KEY),dismiss_button_css_class:a.DISMISS_BUTTON_CSS_CLASS,dismiss_divider_css_class:a.DISMISS_DIVIDER_CSS_CLASS,dont_show_again:this.localization.getLocalizedString(a.DONT_SHOW_AGAIN_STRING_KEY),dont_show_again_css_class:a.DONT_SHOW_AGAIN_BUTTON_CSS_CLASS,expanded_message_css_class:a.EXPANDED_MESSAGE_CSS_CLASS,
message_css_class:a.MESSAGE_CSS_CLASS,message_text_css_class:a.MESSAGE_TEXT_CSS_CLASS,show_more:this.localization.getLocalizedString(a.SHOW_MORE_STRING_KEY),show_more_button_css_class:a.SHOW_MORE_BUTTON_CSS_CLASS,show_more_divider_css_class:a.SHOW_MORE_DIVIDER_CSS_CLASS};this.notificationContainerElement.innerHTML=b.render(a.MUSTACHE_TEMPLATE,c);this.parent.insertBefore(this.notificationContainerElement,this.parent.firstChild);this.messageElement=e.getElementsByClassName(this.notificationContainerElement,
a.MESSAGE_CSS_CLASS)[0];this.messageTextElement=e.getElementsByClassName(this.notificationContainerElement,a.MESSAGE_TEXT_CSS_CLASS)[0];this.expandedMessageElement=e.getElementsByClassName(this.notificationContainerElement,a.EXPANDED_MESSAGE_CSS_CLASS)[0];this.showMoreButton=e.getElementsByClassName(this.notificationContainerElement,a.SHOW_MORE_BUTTON_CSS_CLASS)[0];this.showMoreButton.onclick=function(){k.toggleExpandedMessage()};this.dismissButton=e.getElementsByClassName(this.notificationContainerElement,
a.DISMISS_BUTTON_CSS_CLASS)[0];this.dismissButton.onclick=function(){k.cancelNotification(k.currentNotification)};this.dontShowAgainButton=e.getElementsByClassName(this.notificationContainerElement,a.DONT_SHOW_AGAIN_BUTTON_CSS_CLASS)[0];this.dontShowAgainButton.onclick=function(){var a=k.currentNotification.getOnDontShowAgain();d.isNullOrUndefined(a)||a();k.cancelNotification(k.currentNotification)};this.dismissDivider=e.getElementsByClassName(this.notificationContainerElement,a.DISMISS_DIVIDER_CSS_CLASS)[0];
this.showMoreDivider=e.getElementsByClassName(this.notificationContainerElement,a.SHOW_MORE_DIVIDER_CSS_CLASS)[0];this.hideNotification()};a.prototype.addNotification=function(a){n.checkState(null!==this.notificationContainerElement,"The NotificationDisplayManager is not initialized, cannot addNotification");n.checkNotNullAndNotUndefined(a,"The NotificationDisplayManager#addNotification requires a NotificationEvent");this.notificationManager.addNotification(a)};a.prototype.cancelNotification=function(a){n.checkState(null!==
this.notificationContainerElement,"The NotificationDisplayManager is not initialized, cannot cancelNotification");n.checkNotNullAndNotUndefined(a,"The NotificationDisplayManager#cancelNotification requires a NotificationEvent");this.notificationManager.cancelNotification(a)};a.prototype.onShowNotification=function(b){this.currentNotification=b;b={videoIssuesUrl:this.amazonUrlCreator.createCSUrl("VIDEO_ISSUES")};this.messageTextElement.innerHTML=this.currentNotification.getMessageTemplate().renderString(this.localization,
b)+" ";this.expandedMessageElement.innerHTML="";var c=this.currentNotification.getClosable(),f=!d.isNullOrUndefined(this.currentNotification.getOnDontShowAgain()),l=!1;d.isNullOrUndefined(this.currentNotification.getExpandedMessageTemplate())||(this.expandedMessageElement.innerHTML=this.currentNotification.getExpandedMessageTemplate().renderString(this.localization,b),l=!0);this.addWindowListeners();e.addClass(this.playerElement,a.PLAYER_HEIGHT_TRANSITION_CSS_CLASS);this.messageIsExpanded=!1;this.showMoreButton.innerHTML=
this.localization.getLocalizedString(a.SHOW_MORE_STRING_KEY);this.showMoreButton.style.display=l?"":"none";this.showMoreDivider.style.display=l&&(c||f)?"":"none";this.dismissButton.style.display=c?"":"none";this.dismissDivider.style.display=c&&f?"":"none";this.dontShowAgainButton.style.display=f?"":"none";this.setNotificationAndPlayerHeight()};a.prototype.onCloseNotification=function(a){a===this.currentNotification&&this.hideNotification()};a.prototype.hideNotification=function(){var b=this;this.removeWindowListeners();
this.messageIsExpanded=!1;this.notificationContainerElement.style.height="0px";this.playerElement.style.height="100%";if(null===this.currentNotification)this.onNotificationHidden();else this.hidingNotification=!0,setTimeout(function(){b.onNotificationHidden()},a.NOTIFICATION_CLOSE_TIME)};a.prototype.onNotificationHidden=function(){this.hidingNotification=!1;e.removeClass(this.playerElement,a.PLAYER_HEIGHT_TRANSITION_CSS_CLASS);this.expandedMessageElement.innerHTML="";this.messageTextElement.innerHTML=
"";this.showMoreButton.innerHTML="";this.dismissButton.style.display="none";this.dismissDivider.style.display="none";this.dontShowAgainButton.style.display="none";this.showMoreButton.style.display="none";this.showMoreDivider.style.display="none";this.currentNotification=null;null!==this.notificationHiddenCallback&&(this.notificationHiddenCallback(),this.notificationHiddenCallback=null)};a.prototype.toggleExpandedMessage=function(){this.messageIsExpanded=!this.messageIsExpanded;this.showMoreButton.innerHTML=
this.messageIsExpanded?this.localization.getLocalizedString(a.SHOW_LESS_STRING_KEY):this.localization.getLocalizedString(a.SHOW_MORE_STRING_KEY);this.setNotificationAndPlayerHeight()};a.prototype.addWindowListeners=function(){window.addEventListener?window.addEventListener("resize",this.onWindowResize,!0):window.attachEvent&&window.attachEvent("onresize",this.onWindowResize)};a.prototype.removeWindowListeners=function(){window.removeEventListener?window.removeEventListener("resize",this.onWindowResize):
window.detachEvent&&window.detachEvent("onresize",this.onWindowResize)};a.prototype.setNotificationAndPlayerHeight=function(){this.messageIsExpanded?(this.notificationContainerElement.style.height=this.messageElement.offsetHeight+this.expandedMessageElement.offsetHeight+"px",this.playerElement.style.height=this.parent.offsetHeight-this.messageElement.offsetHeight-this.expandedMessageElement.offsetHeight+"px"):(this.notificationContainerElement.style.height=this.messageElement.offsetHeight+"px",this.playerElement.style.height=
this.parent.offsetHeight-this.messageElement.offsetHeight+"px")};a.DISMISS_STRING_KEY="NOTIFICATION_DISMISS";a.DONT_SHOW_AGAIN_STRING_KEY="NOTIFICATION_DONT_SHOW_AGAIN";a.SHOW_LESS_STRING_KEY="NOTIFICATION_SHOW_LESS";a.SHOW_MORE_STRING_KEY="NOTIFICATION_SHOW_MORE";a.CONTAINER_CSS_CLASS="notificationContainer";a.DISMISS_BUTTON_CSS_CLASS="dismissButton";a.DISMISS_DIVIDER_CSS_CLASS="dismissDivider";a.DONT_SHOW_AGAIN_BUTTON_CSS_CLASS="dontShowAgainButton";a.EXPANDED_MESSAGE_CSS_CLASS="notificationExpandedMessage";
a.MESSAGE_CSS_CLASS="notificationMessage";a.MESSAGE_TEXT_CSS_CLASS="notificationMessageText";a.PLAYER_HEIGHT_TRANSITION_CSS_CLASS="heightTransition";a.SHOW_MORE_BUTTON_CSS_CLASS="showMoreButton";a.SHOW_MORE_DIVIDER_CSS_CLASS="showMoreDivider";a.MUSTACHE_TEMPLATE="<div class='{{{message_css_class}}}'>\n            <span class='{{{message_text_css_class}}}'></span>\n            <a style='display:none;' class='{{{show_more_button_css_class}}}'>{{{show_more}}}</a>\n            <span style='display:none;' class='{{{show_more_divider_css_class}}}'> | </span>\n            <a style='display:none;' class='{{{dismiss_button_css_class}}}'>{{{dismiss}}}</a>\n            <span style='display:none;' class='{{{dismiss_divider_css_class}}}'> | </span>\n            <a style='display:none;' class='{{{dont_show_again_css_class}}}'>{{{dont_show_again}}}</a>\n        </div>\n        <div class='{{{expanded_message_css_class}}}'></div>";
a.NOTIFICATION_CLOSE_TIME=200;return a}();h.exports=a},{ATVWebLocalization:108,ATVWebNotificationManager:112,ATVWebPlayerInterface:135,"atv-objects":84,"atv-preconditions":85,"atv-utils":93,"js-logger":164,mustache:166}],24:[function(a,h,g){var e=a("underscore"),f=a("ATVWebUserAgent"),b=f.BrowserType,c=f.Version;g=a("ATVWebPlayerInterface");var d=g.PINAcceptedEvent,n=g.PINDeclinedEvent,l=g.PINErrorEvent,p=g.PINRequiredEvent,q=a("atv-events").BasicEventEmitter;a("ATVWebLocalization");var m=a("atv-utils").HTMLElementUtils,
r=a("atv-objects"),u=a("./Templates/PINModalTemplate"),k=a("atv-preconditions"),A=a("js-logger").get("PINDisplayManager");a=function(){function a(b,d){void 0===d&&(d=new q);this.webPlayer=k.checkNotNullAndNotUndefined(b,"PINDisplayManager#construtor requires a web player");this.eventEmitter=d}a.prototype.initialize=function(a,b,d,c){this.parent=k.checkNotNullAndNotUndefined(a,"PINDisplayManager#initialize requires a parent element");this.localization=k.checkNotNullAndNotUndefined(b,"PINDisplayManager#initialize requires a Localization object");
this.amazonUrlCreator=k.checkNotNullAndNotUndefined(d,"ErrorDisplayManager#initialize: amazonUrlCreator cannot be null or undefined");this.onClosePlayerClicked=k.checkNotNullAndNotUndefined(c,"PINDisplayManager#initialize: onClosePlayerClicked cannot be null or undefined");this.attachEventListeners();this.createDOMElements();this.validatingPIN=!1};a.prototype.requestPIN=function(d){var e=this;r.isNullOrUndefined(d)&&(d=this.pinLength);k.checkState(!r.isNullOrUndefined(this.parent),"PINDisplayManager must be initialized before requestPIN");
k.checkState(!r.isNullOrUndefined(d)&&0!==d,"pinLength in PINDisplayManager must be set before requestPIN");var l=m.getElementsByClassName(this.pinWrapper,a.PIN_FIELDS_CLASS)[0];l.innerHTML="";this.pinFields=[];this.pinValues=[];for(var n=f.getBrowser().getType()===b.IE&&0>f.getBrowser().getVersion().compareTo(c.fromNumber(10)),q=0;q<d;q++){var p=document.createElement("input");p.type="text";p.maxLength=1;p.className=a.PIN_FIELD_CLASS;n&&(p.className+=" ie9");l.appendChild(p);this.pinFields.push(p);
p.onkeydown=function(a){e.onKeyDown(a)};p.onkeyup=function(){e.onKeyUp()};this.pinValues.push("")}0===m.getElementsByClassName(this.parent,a.PIN_WRAPPER_CLASS).length&&this.parent.appendChild(this.pinWrapper);this.pinWrapper.style.display="block";this.pinFields[0].focus()};a.prototype.hideModal=function(){this.toggleVisibility(a.INCORRECT_PIN_TEXT_CLASS,!1);this.pinWrapper.style.display=""};a.prototype.onPINRequired=function(a){this.pinLength=a.getPINLength()};a.prototype.onPINAccepted=function(){A.info("PIN on playback was accepted.");
this.validatingPIN=!1;this.toggleVisibility(a.INCORRECT_PIN_TEXT_CLASS,!1);this.hideModal()};a.prototype.onPINDeclined=function(){A.info("PIN on playback was declined.");this.validatingPIN=!1;this.toggleVisibility(a.INCORRECT_PIN_TEXT_CLASS,!0);for(var b=0;b<this.pinFields.length;b++)this.pinFields[b].value="",this.pinValues[b]="";this.pinFields[0].focus()};a.prototype.onPINError=function(){A.error("Error returned by ValidatePin API.");this.validatingPIN=!1;this.toggleVisibility(a.INCORRECT_PIN_TEXT_CLASS,
!1);this.hideModal()};a.prototype.toggleVisibility=function(a,b){m.getElementsByClassName(this.pinWrapper,a)[0].style.display=b?"block":"none"};a.prototype.keyCodeIsNumber=function(b){return b>=a.START_OF_NUMBER_KEYCODES&&b<=a.END_OF_NUMBER_KEYCODES||b>=a.START_OF_NUMPAD_KEYCODES&&b<=a.END_OF_NUMPAD_KEYCODES};a.prototype.pinIsEntered=function(){for(var a=0;a<this.pinValues.length;a++)if(""===this.pinValues[a])return!1;return!0};a.prototype.onKeyDown=function(b){b=b||event;var d=e.indexOf(this.pinFields,
b.target||b.srcElement),c=window.event?b.keyCode:b.which;if(c===a.DELETE_KEYCODE||c===a.BACKSPACE_KEYCODE)this.preventDefault(b),b=d,0<d&&""===this.pinFields[d].value&&(b=d-1),this.pinFields[b].focus(),this.pinFields[b].value="",this.pinValues[b]="";else if(this.keyCodeIsNumber(c))this.preventDefault(b),c>a.END_OF_NUMBER_KEYCODES&&(c-=a.START_OF_NUMBER_KEYCODES),this.pinFields[d].value="\u2022",this.pinValues[d]=String.fromCharCode(c),d!==this.pinFields.length-1&&this.pinFields[d+1].focus();else if(c===
a.ESCAPE_KEYCODE)this.onCancelPIN();else c!==a.TAB_KEYCODE&&c!==a.SHIFT_KEYCODE&&this.preventDefault(b)};a.prototype.preventDefault=function(a){r.isNullOrUndefined(a.preventDefault)?a.returnValue=!1:a.preventDefault()};a.prototype.onKeyUp=function(){this.onSubmitPIN()};a.prototype.getPINString=function(){for(var a="",b=0;b<this.pinValues.length;b++)a+=this.pinValues[b];return a};a.prototype.onCancelPIN=function(){A.info("PIN on playback was cancelled.");this.hideModal();this.onClosePlayerClicked()};
a.prototype.onSubmitPIN=function(){this.pinIsEntered()&&!this.validatingPIN&&(A.info("PIN on playback was submitted."),this.validatingPIN=!0,this.webPlayer.validatePIN(this.getPINString()))};a.prototype.attachEventListeners=function(){var a=this;this.webPlayer.on(d,function(){a.onPINAccepted()});this.webPlayer.on(n,function(){a.onPINDeclined()});this.webPlayer.on(l,function(){a.onPINError()});this.webPlayer.on(p,function(b){a.onPINRequired(b)})};a.prototype.createDOMElements=function(){var b=this;
this.pinModalTemplate=new u(a.LOCALIZATION_KEY);this.pinWrapper=document.createElement("div");this.pinWrapper.className=a.PIN_WRAPPER_CLASS;this.pinWrapper.style.display="none";this.pinWrapper.innerHTML=this.pinModalTemplate.renderString(this.localization,this.amazonUrlCreator);for(var d=m.getElementsByClassName(this.pinWrapper,a.CLOSE_PLAYER_BUTTON_CLASS),c=0;c<d.length;c++)d[c].onclick=function(){b.onCancelPIN()}};a.LOCALIZATION_KEY="PIN_MODAL";a.PIN_ENTRY_TIME_METRIC="PinEntryTime";a.CLOSE_PLAYER_BUTTON_CLASS=
"closePlayerButton";a.INCORRECT_PIN_TEXT_CLASS="incorrectPINText";a.PIN_FIELD_CLASS="pinField";a.PIN_FIELDS_CLASS="pinFields";a.PIN_WRAPPER_CLASS="pinWrapper";a.START_OF_NUMBER_KEYCODES=48;a.END_OF_NUMBER_KEYCODES=57;a.START_OF_NUMPAD_KEYCODES=96;a.END_OF_NUMPAD_KEYCODES=105;a.BACKSPACE_KEYCODE=8;a.DELETE_KEYCODE=46;a.ESCAPE_KEYCODE=27;a.SHIFT_KEYCODE=16;a.TAB_KEYCODE=9;return a}();h.exports=a},{"./Templates/PINModalTemplate":25,ATVWebLocalization:108,ATVWebPlayerInterface:135,ATVWebUserAgent:158,
"atv-events":75,"atv-objects":84,"atv-preconditions":85,"atv-utils":93,"js-logger":164,underscore:173}],25:[function(a,h,g){var e=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype;a.prototype=new c};a("ATVWebLocalization");g=a("../../ModalDisplayManager/StandardModalTemplate");a("atv-utils");a=function(a){function b(b){a.call(this,b)}e(b,a);b.prototype.renderString=function(c,d){return a.prototype.renderString.call(this,
c,d,{extraText:b.PIN_TEMPLATE})};b.PIN_TEMPLATE="<div class='pinFields'></div><div class='incorrectPINText'>{{{incorrect_pin}}}</div><div class='notes'>{{{notes}}}</div>";return b}(g);h.exports=a},{"../../ModalDisplayManager/StandardModalTemplate":22,ATVWebLocalization:108,"atv-utils":93}],26:[function(a,h,g){var e=a("underscore"),f=a("atv-objects"),b=a("atv-preconditions");a=function(){function a(){this.initialized=!1}a.prototype.initialize=function(d,e,l,p,q,m,g,h,k,A){f.isNullOrUndefined(g)||f.isNullOrUndefined(l)||
(this.partnerServiceUrl=b.checkNotNullAndNotUndefined(d,"partnerServiceUrl is a required parameter."),this.clientVersion=b.checkNotNullAndNotUndefined(e,"version is a required parameter."),this.marketplaceId=b.checkNotNullAndNotUndefined(p,"marketplaceId is a required parameter."),this.deviceTypeId=b.checkNotNullAndNotUndefined(q,"deviceTypeId is a required parameter."),this.deviceId=b.checkNotNullAndNotUndefined(m,"deviceId is a required parameter."),this.primitiveSessionId=b.checkNotNullAndNotUndefined(h,
"primitiveSessionId is a required parameter."),this.operatingSystem=b.checkNotNullAndNotUndefined(k,"operatingSystem is a required parameter."),this.browser=b.checkNotNullAndNotUndefined(A,"browser is a required parameter."),this.customerId=g,this.token=l,this.asin=a.UNKNOWN,this.initialized=!0)};a.prototype.isInitialized=function(){return this.initialized};a.prototype.updateSessionIds=function(a,b){this.userWatchSessionId=a;this.primitiveSessionId=b};a.prototype.setAsin=function(a){this.asin=a};
a.prototype.reportError=function(b,e,l,p){this.initialized&&(b={firmware:a.FIRMWARE,version:a.VERSION,client_version:this.clientVersion,token:this.token,marketplaceId:this.marketplaceId,deviceTypeID:this.deviceTypeId,sourceSystem:this.deviceTypeId,deviceID:this.deviceId,customerID:this.customerId,primitiveSessionId:this.primitiveSessionId,userWatchSessionId:this.userWatchSessionId,operatingSystem:this.operatingSystem,browser:this.browser,asin:this.asin,eventType:"Error",eventSubtype:b,errorSeverity:Math.min(5,
Math.max(1,e)).toString(),httpCode:l},f.isNullOrUndefined(p)||(b.note=p),this.report(b))};a.prototype.reportInformation=function(b,e){if(this.initialized){var l={firmware:a.FIRMWARE,version:a.VERSION,client_version:this.clientVersion,token:this.token,marketplaceId:this.marketplaceId,deviceTypeID:this.deviceTypeId,sourceSystem:this.deviceTypeId,deviceID:this.deviceId,customerID:this.customerId,primitiveSessionId:this.primitiveSessionId,userWatchSessionId:this.userWatchSessionId,operatingSystem:this.operatingSystem,
browser:this.browser,asin:this.asin,eventType:"Information",eventSubtype:b};f.isNullOrUndefined(e)||(l.note=e);this.report(l)}};a.prototype.report=function(b){var f="?";e.each(b,function(a,b,d){f=f+b+"="+a+"&"});f=f.substr(0,f.length-1);(new Image).src=this.partnerServiceUrl.replace(/\/$/,"")+a.ENDPOINT+f};a.ENDPOINT="/cdp/usage/ReportEvent";a.FIRMWARE="1";a.VERSION="1";a.UNKNOWN="unknown";return a}();h.exports=a},{"atv-objects":84,"atv-preconditions":85,underscore:173}],27:[function(a,h,g){var e=
this.__extends||function(a,b){function d(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);d.prototype=b.prototype;a.prototype=new d},f=a("ATVWebUserAgent"),b=f.BrowserType;a("ATVWebLocalization");var c=a("atv-objects"),d=a("mustache");g=a("ATVWebPlayerInterface").NotificationEvent;a("atv-utils");a=function(a){function l(b){this.browserType=c.isNullOrUndefined(b)?f.getBrowser().getType():b;a.call(this,this.getSubjectTemplate(),this.getDetailsTemplate(),!0,null)}e(l,a);l.prototype.getSubjectTemplate=
function(){return{renderString:function(a,b){var c=a.getLocalizedObject(l.MESSAGE_KEY);return d.render("{{{message}}}",c)}}};l.prototype.getDetailsTemplate=function(){var a=this.isChrome();return{renderString:function(b,c){var f=b.getLocalizedObject(l.MESSAGE_KEY);f.troubleshoot=b.renderLocalizedString(f.troubleshoot,c);return d.render("{{#isChrome}}{{{chrome_unblock}}}<br />{{/isChrome}}{{{troubleshoot}}}",{isChrome:a,chrome_unblock:f.chrome_unblock,troubleshoot:f.troubleshoot})}}};l.prototype.isChrome=
function(){return this.browserType===b.Chrome||this.browserType===b.Chromium};l.MESSAGE_KEY="SL_BLOCKED";return l}(g);h.exports=a},{ATVWebLocalization:108,ATVWebPlayerInterface:135,ATVWebUserAgent:158,"atv-objects":84,"atv-utils":93,mustache:166}],28:[function(a,h,g){var e=this.__extends||function(a,c){function d(){this.constructor=a}for(var f in c)c.hasOwnProperty(f)&&(a[f]=c[f]);d.prototype=c.prototype;a.prototype=new d};a("ATVWebLocalization");g=a("ATVWebPlayerInterface").NotificationEvent;var f=
a("atv-utils").LocalStorage;a=function(a){function c(d){var c=this;void 0===d&&(d=new f);a.call(this,this.getTemplate(),null,!0,null,function(){return c.setDontShowAgain()});this.storage=d}e(c,a);c.prototype.setDontShowAgain=function(){this.storage.set(c.DONT_SHOW_AGAIN_KEY,"true")};c.prototype.getTemplate=function(){return{renderString:function(a,b){return a.getLocalizedString(c.MESSAGE_KEY)}}};c.MESSAGE_KEY="SWITCH_TO_HTML5";c.DONT_SHOW_AGAIN_KEY="dont_show_switch_to_html5";return c}(g);h.exports=
a},{ATVWebLocalization:108,ATVWebPlayerInterface:135,"atv-utils":93}],29:[function(a,h,g){var e={_silverlightCount:0,createObject:function(a,b,c,d,n,l,p){d.source=a;l&&(d.initParams=l);d.isWindowless&&!d.windowless&&(d.windowless=d.isWindowless);d.framerate&&!d.maxFramerate&&(d.maxFramerate=d.framerate);c&&!d.id&&(d.id=c);delete d.ignoreBrowserVer;delete d.inplaceInstallPrompt;delete d.version;delete d.isWindowless;delete d.framerate;delete d.data;delete d.src;delete d.alt;for(var q in n)if(n[q]){if("onLoad"==
q&&"function"==typeof n[q]&&1!=n[q].length){var m=n[q];n[q]=function(a){return m(document.getElementById(c),p,a)}}a=e.__getHandlerName(n[q]);if(null!=a)d[q]=a,n[q]=null;else throw"typeof events."+q+" must be 'function' or 'string'";}d=e.buildHTML(d);if(b)b.innerHTML=d;else return d},buildHTML:function(a){var b=[];b.push('<object type="application/x-silverlight" data="data:application/x-silverlight,"');null!=a.id&&b.push(' id="'+e.HtmlAttributeEncode(a.id)+'"');null!=a.width&&b.push(' width="'+a.width+
'"');null!=a.height&&b.push(' height="'+a.height+'"');b.push(" >");delete a.id;delete a.width;delete a.height;for(var c in a)a[c]&&b.push('<param name="'+e.HtmlAttributeEncode(c)+'" value="'+e.HtmlAttributeEncode(a[c])+'" />');b.push("</object>");return b.join("")},createObjectEx:function(a){var b=e.createObject(a.source,a.parentElement,a.id,a.properties,a.events,a.initParams,a.context);if(null==a.parentElement)return b},HtmlAttributeEncode:function(a){var b,c="";if(null==a)return null;for(var d=
0;d<a.length;d++)b=a.charCodeAt(d),c=96<b&&123>b||64<b&&91>b||43<b&&58>b&&47!=b||95==b?c+String.fromCharCode(b):c+"&#"+b+";";return c},__cleanup:function(){for(var a=e._silverlightCount-1;0<=a;a--)window["__slEvent"+a]=null;e._silverlightCount=0;window.removeEventListener?window.removeEventListener("unload",e.__cleanup,!1):window.detachEvent("onunload",e.__cleanup)},__getHandlerName:function(a){var b="";"string"==typeof a?b=a:"function"==typeof a?(0==e._silverlightCount&&(window.addEventListener?
window.addEventListener("unload",e.__cleanup,!1):window.attachEvent("onunload",e.__cleanup)),b="__slEvent"+e._silverlightCount++,window[b]=a):b=null;return b}};h.exports=e},{}],30:[function(a,h,g){var e=a("atv-events");g=a("js-logger");var f=a("atv-preconditions"),b=a("./Silverlight"),c=a("./SilverlightPluginLoadedEvent"),d=a("./SilverlightPlayerLoadedEvent"),n=a("./SilverlightPlayerLoadErrorEvent"),l=g.get("SilverlightInitializer");a=function(){function a(){var q=this;this.pluginId=this.monitoringTimer=
null;this.complete=!1;this.onMonitorCheck=function(){q.isSilverlightPluginLoaded()&&(q.clearMonitor(),q.eventEmitter.emit(c,new c),q.monitoringTimer=setTimeout(q.onXapLoadTimeout,a.PLAYER_LOAD_TIMEOUT))};this.onPlayerLoad=function(){q.clearMonitor();q.complete=!0;l.info("The XAP has successfully loaded");q.eventEmitter.emit(d,new d)};this.onPlayerError=function(a,b){l.info("A fatal error has occurred during XAP initialization",b);q.complete||(q.clearMonitor(),q.complete=!0,q.eventEmitter.emit(n,new n(b.errorCode,
b.errorType,b.errorMessage)))};this.onXapLoadTimeout=function(){q.onPlayerError(null,{errorCode:n.LOAD_TIMEOUT_ERROR_CODE})};f.checkNotNullAndNotUndefined(b,"Silverlight.js must be available on the window.");this.eventEmitter=new e.BasicEventEmitter}a.prototype.initialize=function(d,c,e,l,n,g){f.checkNotNullAndNotUndefined(d,"Silverlight initialization requires an element to use.");f.checkNotNullAndNotUndefined(c,"Silverlight initialization requires an unused id.");f.checkNotNullAndNotUndefined(e,
"Silverlight initialization requires a XAP Url.");f.checkNotNullAndNotUndefined(l,"Silverlight initialization requires a minimum version.");f.checkNotNullAndNotUndefined(n,"Silverlight initialization requires a windowless property.");this.pluginId=c;this.complete=!1;this.clearMonitor();g=this.generateInitParamString(g);this.monitoringTimer=setInterval(this.onMonitorCheck,a.SILVERLIGHT_PLUGIN_LOAD_POLL_INTERVAL);b.createObjectEx({source:e,parentElement:d,id:c,properties:{windowless:""+n,width:"100%",
height:"100%",minRuntimeVersion:l,enableGPUAcceleration:"true",background:"#000000",enableHtmlAccess:"true"},initParams:g,events:{onLoad:this.onPlayerLoad,onError:this.onPlayerError}})};a.prototype.on=function(a,b){this.eventEmitter.on(a,b)};a.prototype.once=function(a,b){this.eventEmitter.once(a,b)};a.prototype.off=function(a,b){this.eventEmitter.off(a,b)};a.prototype.stop=function(){this.clearMonitor()};a.prototype.clearMonitor=function(){clearInterval(this.monitoringTimer);clearTimeout(this.monitoringTimer);
this.monitoringTimer=null};a.prototype.isSilverlightPluginLoaded=function(){var a=document.getElementById(this.pluginId);return null!==a&&"undefined"!==typeof a.isVersionSupported};a.prototype.generateInitParamString=function(a){var b=[],d;for(d in a)a.hasOwnProperty(d)&&"string"===typeof a[d]&&null!==a[d]&&b.push(d+"="+a[d]);return b.join(",")};a.SILVERLIGHT_PLUGIN_LOAD_POLL_INTERVAL=500;a.PLAYER_LOAD_TIMEOUT=6E4;return a}();h.exports=a},{"./Silverlight":29,"./SilverlightPlayerLoadErrorEvent":31,
"./SilverlightPlayerLoadedEvent":32,"./SilverlightPluginLoadedEvent":33,"atv-events":75,"atv-preconditions":85,"js-logger":164}],31:[function(a,h,g){var e=a("underscore");a=function(){function a(b,c,d){this.errorCode=b;this.errorType=c;this.errorMessage=d}a.toString=function(){return"silverlightPlayerLoadError"};a.prototype.getErrorCode=function(){return this.errorCode};a.prototype.getErrorType=function(){return this.errorType};a.prototype.getErrorMessage=function(){return this.errorMessage};a.prototype.isCorruptionError=
function(){return e.contains([2103,2104,2105,2150,2152,2153,a.LOAD_TIMEOUT_ERROR_CODE],this.errorCode)};a.LOAD_TIMEOUT_ERROR_CODE="sl_timeout";return a}();h.exports=a},{underscore:173}],32:[function(a,h,g){a=function(){function a(){}a.toString=function(){return"silverlightPlayerLoaded"};return a}();h.exports=a},{}],33:[function(a,h,g){a=function(){function a(){}a.toString=function(){return"silverlightPluginLoaded"};return a}();h.exports=a},{}],34:[function(a,h,g){g=a("ATVWebPlayerInterface");var e=
g.AbortEvent,f=g.AsinChangedEvent,b=g.CloseEvent,c=g.ErrorSeverity,d=g.FirstFrameEvent,n=g.InitializedEvent,l=g.PINAcceptedEvent,p=g.PINDeclinedEvent,q=g.PINErrorEvent,m=g.PINRequiredEvent,r=g.PlayingEvent,u=g.PreparedEvent,k=g.NotificationCancelEvent,A=g.NotificationEvent,x=g.VideoType,E=a("ATVWebReporting").MetricsContextFactory,y=a("ATVWebUserAgent"),M=y.OperatingSystemFamily;a("ATVWebWeblabClient");var K=a("../Qos/QosReporter"),F=a("../SpinnerPanel/SpinnerPanel");a("../SpinnerPanel/SpinnerType");
var I=a("../WeblabStringifier/WeblabStringifier"),P=a("atv-constants"),U=a("atv-events"),N=a("atv-objects"),H=a("atv-preconditions");g=a("js-logger");var R=a("./SilverlightInitializer"),w=a("./Templates/SilverlightCorruptionTemplate"),D=a("./SilverlightPluginLoadedEvent"),v=a("./SilverlightPlayerLoadedEvent"),G=a("./SilverlightPlayerLoadErrorEvent"),B=a("./Notifications/SilverlightBlockedNotification"),L=a("./Notifications/SwitchToHTML5Notification"),J=a("atv-utils").LocalStorage,C=a("underscore"),
z=g.get("SilverlightWebPlayer");a=function(){function a(b,d,c,f,e,l){void 0===c&&(c=new K);void 0===f&&(f=new E);void 0===e&&(e=new F);void 0===l&&(l=new J);this.pluginBridge=this.isAVOD=this.pinVerified=this.pinRequired=this.playTrailer=this.startPosition=this.asin=this.weblabs=this.diagnostics=this.xapUrl=this.deviceId=this.locale=this.domElement=this.partnerServiceUrl=this.marketplaceId=this.token=this.customerId=null;this.currentPosition=0;this.contentDuration=1;this.spinnerPanel=null;this.version=
H.checkNotNullAndNotUndefined(b,"SilverlightWebPlayer#constructor: version cannot be null or undefined");this.initializer=N.isNullOrUndefined(d)?new R:d;this.metricsContextFactory=f;this.eventEmitter=new U.BasicEventEmitter;this.spinnerPanel=e;this.storage=l;this.os=y.getOperatingSystem();this.browser=y.getBrowser();this.isPluginLoading=this.isPrepared=this.isInitialized=!1;this.qosReporter=c;this.playerLoadErrorCallback=this.playerLoadedCallback=this.pluginLoadedCallback=this.silverlightWaitTimer=
this.pluginBlockedNotification=null}a.prototype.initialize=function(b){H.checkNotNullAndNotUndefined(b,"PlayerConfig must be defined to create a SilverlightWebPlayer");H.checkNotNullAndNotUndefined(b.marketplaceId,"A marketplaceId is required to create a SilverlightWebPlayer");H.checkNotNullAndNotUndefined(b.partnerServiceEndpoint,"A partnerServiceEndpoint is required to create a SilverlightWebPlayer");H.checkNotNullAndNotUndefined(b.domElement,"A domElement is required to create a SilverlightWebPlayer");
H.checkNotNullAndNotUndefined(b.domElement.id,"The HTMLElement used by the SilverlightWebPlayer must have an id");H.checkNotNullAndNotUndefined(b.locale,"A locale is required to create a SilverlightWebPlayer");H.checkNotNullAndNotUndefined(b.deviceId,"A deviceId is required to create a SilverlightWebPlayer");H.checkNotNullAndNotUndefined(b.assetUrls,"assetUrls are required to create a SilverlightWebPlayer");H.checkNotNullAndNotUndefined(b.assetUrls[location.protocol],"assetUrls with assets for current protocol are required to create a SilverlightWebPlayer");
H.checkNotNullAndNotUndefined(b.assetUrls[location.protocol][a.XAP_ASSET_NAME],"The XAP asset URL is required to create a SilverlightWebPlayer");H.checkNotNullAndNotUndefined(b.weblabs,"A map of weblabs is required to create a SilverlightWebPlayer");H.checkNotNullAndNotUndefined(b.userWatchSessionId,"A userWatchSessionId is required to create a SilverlightWebPlayer");H.checkNotNullAndNotUndefined(b.initialPrimitiveSessionId,"An initialPrimitiveSessionId is required to create a SilverlightWebPlayer");
this.customerId=N.isNullOrUndefined(b.customerId)?null:b.customerId;this.token=N.isNullOrUndefined(b.authToken)?null:b.authToken;this.marketplaceId=b.marketplaceId;this.partnerServiceUrl=b.partnerServiceEndpoint.replace(/\/$/,"")+"/cdp/";this.domElement=document.createElement("div");this.domElement.className="webPlayerElement";this.locale=b.locale;this.deviceId=b.deviceId;this.xapUrl=b.assetUrls[location.protocol][a.XAP_ASSET_NAME];this.diagnostics=N.isNullOrUndefined(b.diagnostics)?!1:b.diagnostics;
this.weblabs=b.weblabs;this.userWatchSessionId=b.userWatchSessionId;this.primitiveSessionId=b.initialPrimitiveSessionId;b.domElement.innerHTML="";b.domElement.appendChild(this.domElement);this.spinnerPanel.initialize(b.domElement,b.assetUrls,0,this.domElement);var d=N.isNullOrUndefined(b.customerId)?a.UNAUTHENTICATED_CUSTOMER_ID:b.customerId;this.qosReporter.initialize(b.partnerServiceEndpoint,this.version,b.authToken,b.marketplaceId,this.getDeviceTypeId(),b.deviceId,d,this.primitiveSessionId,this.os.toString(),
this.browser.toString());this.metricsContext=this.metricsContextFactory.createMetricsContext(b.partnerServiceEndpoint,b.customerId,b.deviceId,this.getDeviceTypeId(),b.marketplaceId,b.authToken,b.userWatchSessionId,this.browser);this.isInitialized=!0;this.pinVerified=this.pinRequired=!1;this.eventEmitter.emit(n)};a.prototype.prepare=function(a){H.checkState(this.isInitialized,"SilverlightWebPlayer must be initialized before prepare is called");H.checkNotNullAndNotUndefined(a,"ContentConfig must be defined to prepare the SilverlightWebPlayer");
H.checkNotNullAndNotUndefined(a.asin,"An ASIN must be defined to prepare the SilverlightWebPlayer");this.asin=a.asin;this.startPosition="number"===typeof a.position?a.position:0;this.playTrailer=a.videoType===x[x.Trailer];this.isPrepared=!0;this.isAVOD=!0===a.isAVOD;this.qosReporter.setAsin(a.asin);this.metricsContext.contentPreparationStarted(this.asin,this.playTrailer);this.metricsContext.contentPreparationSucceeded();this.eventEmitter.emit(u,new u)};a.prototype.play=function(a){H.checkNotNullAndNotUndefined(a,
"PlaybackConfig must be defined to prepare the SilverlightWebPlayer");H.checkNotNullAndNotUndefined(a.playbackInitiatedTime,"playbackInitiatedTime must be defined to prepare the SilverlightWebPlayer");this.isPrepared?null!==this.pluginBridge||this.isPluginLoading?z.warn("Ignoring call to play: play has already been called"):(this.metricsContext.prepareClickstream(a.clickstreamSessionId,a.clickstreamRefMarker),this.metricsContext.playbackInitiated(a.playbackInitiatedTime),a=N.isNullOrUndefined(a)?
{}:a,this.loadPlugin(a.audioTrackId)):z.warn("Ignoring call to play: SilverlightWebPlayer has not been prepared")};a.prototype.playbackInitiated=function(){};a.prototype.stop=function(){this.isPluginLoading&&(this.stopWaitingForSilverlight(),this.initializer.stop(),this.isPluginLoading=!1);null!==this.pluginBridge&&("function"===typeof this.pluginBridge.exitVideoPlayer&&this.pluginBridge.exitVideoPlayer(),this.pluginBridge=null);null!==this.pluginLoadedCallback&&(this.initializer.off(D,this.pluginLoadedCallback),
this.pluginLoadedCallback=null);null!==this.playerLoadedCallback&&(this.initializer.off(v,this.playerLoadedCallback),this.playerLoadedCallback=null);null!==this.playerLoadErrorCallback&&(this.initializer.off(G,this.playerLoadErrorCallback),this.playerLoadErrorCallback=null);null!==this.domElement&&(this.domElement.innerHTML="");this.playTrailer=this.startPosition=this.asin=null;this.pinVerified=this.pinRequired=this.isPrepared=!1;this.eventEmitter.emit(n)};a.prototype.seek=function(a){H.checkNotNullAndNotUndefined(a,
"Can't seek to null or undefined position");H.checkArgument(0<=a,"Can't seek to sub-zero position");null===this.pluginBridge?this.isPrepared?this.startPosition=a:z.warn("Player is not initialized, ignoring call to Seek"):this.pluginBridge.PositionSyncRequest(a+"")};a.prototype.on=function(a,b){this.eventEmitter.on(a,b)};a.prototype.once=function(a,b){this.eventEmitter.once(a,b)};a.prototype.off=function(a,b){this.eventEmitter.off(a,b)};a.prototype.getPosition=function(){return this.currentPosition};
a.prototype.getDuration=function(){return this.contentDuration};a.prototype.getDeviceTypeId=function(){return this.os.getFamily()===M.Mac?P.DeviceTypeId.SILVERLIGHT_MAC:P.DeviceTypeId.SILVERLIGHT_PC};a.prototype.validatePIN=function(a){"undefined"!==typeof this.pluginBridge?(this.metricsContext.pinSubmitted(),this.pluginBridge.ValidatePIN(a)):z.warn("Player is not initialized, ignoring call to ValidatePin")};a.prototype.generateInitParameters=function(b){var d={};d.host=a.HOST_KEY;d.token=this.token;
d.customer=this.customerId;d.marketplace=this.marketplaceId;d.culture=this.locale;d.deviceId=this.deviceId;d.partnerService=this.partnerServiceUrl;d.diag=""+this.diagnostics;d.auto_play="false";d.userAgent=this.browser.toString();d.asin=this.asin;d.v2api="true";d.playTrailer=this.playTrailer?"1":"0";d.timeCode=""+this.startPosition;d.clientVersion=this.version;d.weblabs=I.stringify(this.weblabs);d.userWatchSessionId=this.userWatchSessionId;d.primitiveSessionId=this.primitiveSessionId;"string"===typeof b&&
(d.audiotrackid=b);return d};a.prototype.createPluginEventListeners=function(){var a=this;this.pluginBridge.OnPlayerEvent=function(b,d){a.onPlayerEvent(b,d)};this.pluginBridge.OnMediaStateChanged=function(b){a.onMediaStateChanged(b)};this.pluginBridge.OnChangeASIN=function(b){a.onASINChange(b)};this.pluginBridge.OnClosePlayer=function(){a.onPlayerClose()};this.pluginBridge.OnContentPrepared=function(b,d){a.onContentPrepared(b,d)};this.pluginBridge.OnFirstFrame=function(){return a.onFirstFrame()};
this.pluginBridge.OnPINRequired=function(b,d,c){a.onPINRequired(b,d,c)};this.pluginBridge.OnPINAccepted=function(){a.onPINAccepted()};this.pluginBridge.OnPINDeclined=function(){a.onPINDeclined()};this.pluginBridge.OnPINError=function(){a.onPINError()};this.pluginBridge.OnReloadPlayer=function(){document.location.reload(!0)}};a.prototype.onPINError=function(){z.info("The Silverlight player emitted a PINError event");this.eventEmitter.emit(q)};a.prototype.onPINRequired=function(a,b,d){z.info("The Silverlight player emitted a PINRequired event");
this.pinVerified?z.info("Ignoring PINRequired event as the PIN has already been verified"):(this.pluginBridge.HideLoadingScreen(),this.pinRequired=!0,this.metricsContext.pinDialogDisplayed(),this.eventEmitter.emit(m,new m(a,b,d,!0)))};a.prototype.onPINAccepted=function(){z.info("The Silverlight player emitted a PINAccepted event");this.metricsContext.pinAccepted();this.pinRequired=!1;this.pinVerified=!0;this.pluginBridge.Play();this.eventEmitter.emit(l);this.pluginBridge.ShowLoadingScreen()};a.prototype.onPINDeclined=
function(){z.info("The Silverlight player emitted a PINDeclined event");this.metricsContext.pinDeclined();this.eventEmitter.emit(p)};a.prototype.onPlayerEvent=function(a,b){"position"===a&&"number"===typeof b?this.currentPosition=b:"loaded"===a&&"undefined"!==typeof b&&"number"===typeof b.duration&&(this.contentDuration=b.duration)};a.prototype.onMediaStateChanged=function(a){z.info("The Silverlight player changed state to "+a);switch(a){case "Playing":this.eventEmitter.emit(r);break;case "Ended":this.eventEmitter.emit(b)}};
a.prototype.onASINChange=function(a){z.info("The Silverlight player changed ASIN to "+a);"string"===typeof a&&0<a.length&&null!==this.pluginBridge?(this.metricsContext.nextTitlePlaybackInitiated(C.now()),this.metricsContext.clickstreamNextTitle(),this.metricsContext.contentPreparationStarted(a,!1),this.metricsContext.contentPreparationSucceeded(),this.eventEmitter.emit(f,new f(a))):z.error("Unable to change to asin: "+a)};a.prototype.onPlayerClose=function(){z.info("The Silverlight player emitted a Close event");
this.eventEmitter.emit(b)};a.prototype.loadPlugin=function(b){var d=this;this.isPluginLoading=!0;b=this.generateInitParameters(b);z.info("Silverlight player initialization parameters:",b);var c="silverlight_player_"+Math.floor(1E4*Math.random());this.silverlightWaitTimer=setTimeout(function(){return d.notifySilverlightNotLoaded()},a.WAIT_FOR_PLUGIN_LOAD_TIME);this.pluginLoadedCallback=function(){d.onSilverlightLoaded()};this.playerLoadedCallback=function(){d.onPluginLoaded(c)};this.playerLoadErrorCallback=
function(a){d.onPluginError(a)};this.initializer.on(D,this.pluginLoadedCallback);this.initializer.on(v,this.playerLoadedCallback);this.initializer.on(G,this.playerLoadErrorCallback);this.hideSpinner();this.metricsContext.appLoadStarted();this.initializer.initialize(this.domElement,c,this.xapUrl,a.MIN_VERSION,a.IS_WINDOWLESS,b)};a.prototype.showSpinner=function(){this.spinnerPanel.show()};a.prototype.hideSpinner=function(){this.spinnerPanel.hide()};a.prototype.notifySilverlightNotLoaded=function(){this.isPluginLoading&&
(this.pluginBlockedNotification=new B,this.eventEmitter.emit(A,this.pluginBlockedNotification),this.qosReporter.reportError("PluginLoadBlocked",c.NonFatal,"Silverlight plugin blocked or possibly corrupted"))};a.prototype.stopWaitingForSilverlight=function(){null!==this.pluginBlockedNotification&&(this.eventEmitter.emit(k,new k(this.pluginBlockedNotification)),this.pluginBlockedNotification=null);null!==this.silverlightWaitTimer&&(clearInterval(this.silverlightWaitTimer),this.silverlightWaitTimer=
null)};a.prototype.onSilverlightLoaded=function(){this.isPluginLoading&&(this.stopWaitingForSilverlight(),this.showSpinner())};a.prototype.onPluginLoaded=function(b){this.isPluginLoading=!1;var d=this.metricsContext.appLoadCompleted();this.stopWaitingForSilverlight();this.hideSpinner();b=document.getElementById(b);N.isNullOrUndefined(b)?this.abort(a.STARTUP_ERROR,"Unable to access the Silverlight plugin through the JavaScript bridge",c.Fatal):(b=b.content,N.isNullOrUndefined(b)||N.isNullOrUndefined(b.Bridge)?
this.abort(a.STARTUP_ERROR,"Unable to access the Silverlight plugin through the JavaScript bridge",c.Fatal):(this.playTrailer||"true"===this.storage.get(L.DONT_SHOW_AGAIN_KEY)||this.eventEmitter.emit(A,new L),z.info("The Silverlight player successfully initialized"),this.pluginBridge=b.Bridge,this.createPluginEventListeners(),N.isNullOrUndefined(d)?this.pluginBridge.Prepare():this.pluginBridge.Prepare('{"playerLoadTime": '+d+" }",!0)))};a.prototype.onContentPrepared=function(a,b){z.info("The Silverlight player prepared ASIN "+
a+" and is ready to play it.");this.pinRequired&&!this.pinVerified||this.pluginBridge.Play()};a.prototype.onPluginError=function(b){this.stopWaitingForSilverlight();b.isCorruptionError()?(b="Unable to load Silverlight plugin: code: "+b.getErrorCode()+", type: "+b.getErrorType()+", message: "+b.getErrorMessage(),this.abort(a.CORRUPTION_ERROR,b,c.Fatal,new w)):(b="Unable to load Silverlight plugin: code: "+b.getErrorCode()+", type: "+b.getErrorType()+", message: "+b.getErrorMessage(),this.abort(a.STARTUP_ERROR,
b,c.Fatal))};a.prototype.onFirstFrame=function(){z.info("The Silverlight player emitted a FirstFrame event");this.metricsContext.clickstreamPlaybackStarted();var a=this.metricsContext.playbackStarted(!0);this.eventEmitter.emit(d);return{ttff:a}};a.prototype.abort=function(a,b,d,c){this.eventEmitter.emit(e,new e(a,b,d,c))};a.XAP_ASSET_NAME="LEGACY_SILVERLIGHT_XAP";a.WAIT_FOR_PLUGIN_LOAD_TIME=2E3;a.CORRUPTION_ERROR="SilverlightCorruptionError";a.STARTUP_ERROR="SilverlightStartupError";a.UNAUTHENTICATED_CUSTOMER_ID=
"UNAUTHENTICATED";a.HOST_KEY="amazon";a.MIN_VERSION="5.1";a.IS_WINDOWLESS=!1;return a}();h.exports=a},{"../Qos/QosReporter":26,"../SpinnerPanel/SpinnerPanel":41,"../SpinnerPanel/SpinnerType":42,"../WeblabStringifier/WeblabStringifier":50,"./Notifications/SilverlightBlockedNotification":27,"./Notifications/SwitchToHTML5Notification":28,"./SilverlightInitializer":30,"./SilverlightPlayerLoadErrorEvent":31,"./SilverlightPlayerLoadedEvent":32,"./SilverlightPluginLoadedEvent":33,"./Templates/SilverlightCorruptionTemplate":38,
ATVWebPlayerInterface:135,ATVWebReporting:144,ATVWebUserAgent:158,ATVWebWeblabClient:161,"atv-constants":66,"atv-events":75,"atv-objects":84,"atv-preconditions":85,"atv-utils":93,"js-logger":164,underscore:173}],35:[function(a,h,g){a("ATVWebPlayerInterface");var e=a("atv-constants");a("ATVWebWeblabClient");var f=a("atv-objects"),b=a("atv-preconditions"),c=a("ATVWebUserAgent").OperatingSystemFamily,d=a("./SilverlightWebPlayerOption"),n=a("./SilverlightWebPlayer");a=function(){function a(c,e,n,g){void 0===
g&&(g=new d(c,e));b.checkNotNullAndNotUndefined(c,"SilverlightWebPlayerFactory#constructor: os cannot be null or undefined");b.checkNotNullAndNotUndefined(e,"SilverlightWebPlayerFactory#constructor: browser cannot be null or undefined");b.checkNotNullAndNotUndefined(n,"SilverlightWebPlayerFactory#constructor: playerVersions cannot be null or undefined");b.checkArgument(!f.isNullOrUndefined(n[a.PLAYER_NAME]),"SilverlightWebPlayerFactory#constructor: playerVersions is missing version for "+a.PLAYER_NAME);
this.os=c;this.browser=e;this.playerVersion=n[a.PLAYER_NAME];this.playerOption=g}a.prototype.initialize=function(a,b,d){};a.getPlayerName=function(){return a.PLAYER_NAME};a.prototype.getPlayerName=function(){return a.PLAYER_NAME};a.prototype.getPlayerVersion=function(){return this.playerVersion};a.prototype.getMetricsFeature=function(){return a.METRICS_FEATURE};a.prototype.getDeviceTypeId=function(){return this.os.getFamily()===c.Mac?e.DeviceTypeId.SILVERLIGHT_MAC:e.DeviceTypeId.SILVERLIGHT_PC};a.prototype.getPlayerCapabilities=
function(a,b,d){void 0===b&&(b={});a({supportsDrm:!0,supportsNativePlayback:!1,supportsWebPlayback:!0===b.supportsLive?!1:this.playerOption.isCompatible(),supportsAVOD:!0,supportsMidStreamMTA:!0,supportsHDMovies:this.os.getFamily()===c.Windows,supportsHDTVShows:!0,supportsLive:!1})};a.prototype.createWebPlayer=function(a,b,d){var c=this;this.playerOption.checkAvailability(function(){a(new n(c.getPlayerVersion()))},b)};a.PLAYER_NAME="silverlight";a.METRICS_FEATURE="SilverlightPlayer";return a}();h.exports=
a},{"./SilverlightWebPlayer":34,"./SilverlightWebPlayerOption":36,ATVWebPlayerInterface:135,ATVWebUserAgent:158,ATVWebWeblabClient:161,"atv-constants":66,"atv-objects":84,"atv-preconditions":85}],36:[function(a,h,g){var e=a("ATVWebPlayerInterface").ErrorSeverity;g=a("ATVWebUserAgent");var f=g.BrowserType,b=g.OperatingSystemFamily,c=g.WindowsVersion,d=a("atv-objects"),n=a("atv-preconditions");g=a("js-logger");var l=a("./Templates/SilverlightActiveXDisabledTemplate"),p=a("./Templates/SilverlightRequiredTemplate"),
q=a("./Templates/SilverlightUpgradeRequiredTemplate"),m=a("underscore"),r=g.get("SilverlightWebPlayerOption");a=function(){function a(b,d){this.os=n.checkNotNullAndNotUndefined(b,"SilverlightWebPlayerOption#constructor: os cannot be null or undefined");this.browser=n.checkNotNullAndNotUndefined(d,"SilverlightWebPlayerOption#constructor: browser cannot be null or undefined")}a.prototype.isCompatible=function(){if(this.os.getFamily()!==b.Windows&&this.os.getFamily()!==b.Mac)return r.info("Silverlight is not supported on non-Win/Mac operating systems."),
!1;if(m.contains(a.UNSUPPORTED_BROWSERS,this.browser.getType()))return r.info("Silverlight is not supported on "+f[this.browser.getType()]+"."),!1;if(this.browser.getType()===f.IE&&0>=c.WINDOWS_8.compareTo(this.os.getVersion())&&!this.isActiveXEnabled())return r.info("Silverlight is not supported on Internet Explorer Metro."),!1;r.info("Silverlight is supported on "+this.browser+" on "+this.os);return!0};a.prototype.isAvailable=function(){if(!d.isNullOrUndefined(navigator.plugins[a.SILVERLIGHT_NSAPI_ID]))return!0;
try{return new ActiveXObject(a.SILVERLIGHT_ACTIVEX_ID),!0}catch(b){return!1}};a.prototype.isUpToDate=function(){var b=navigator.plugins[a.SILVERLIGHT_NSAPI_ID];if(!d.isNullOrUndefined(b))return parseFloat(b.description)>=a.MIN_SILVERLIGHT_VERSION;try{return b=new ActiveXObject(a.SILVERLIGHT_ACTIVEX_ID),b.IsVersionSupported(""+a.MIN_SILVERLIGHT_VERSION)}catch(c){r.info("Silverlight ActiveX plugin not found.")}return!1};a.prototype.checkAvailability=function(d,n){this.os.getFamily()===b.Windows&&0<
c.WINDOWS_8.compareTo(this.os.getVersion())&&this.browser.getType()===f.IE&&!this.isActiveXEnabled()?n(a.ACTIVEX_DISABLED_ERROR,"ActiveX is not enabled",e.NonFatal,new l):this.isAvailable()?this.isUpToDate()?d():n(a.UPGRADE_REQUIRED_ERROR,"Silverlight needs to be upgraded",e.NonFatal,new q):n(a.NOT_INSTALLED_ERROR,"Silverlight is not installed",e.NonFatal,new p)};a.prototype.isActiveXEnabled=function(){try{return!!new ActiveXObject("htmlfile")}catch(a){return!1}};a.MIN_SILVERLIGHT_VERSION=5.1;a.SILVERLIGHT_NSAPI_ID=
"Silverlight Plug-In";a.SILVERLIGHT_ACTIVEX_ID="AgControl.AgControl";a.UNSUPPORTED_BROWSERS=[f.Chrome,f.Edge,f.Opera,f.Unknown];a.ACTIVEX_DISABLED_ERROR="SilverlightActiveXDisabledError";a.NOT_INSTALLED_ERROR="SilverlightNotInstalledError";a.UPGRADE_REQUIRED_ERROR="SilverlightUpgradeRequiredError";return a}();h.exports=a},{"./Templates/SilverlightActiveXDisabledTemplate":37,"./Templates/SilverlightRequiredTemplate":39,"./Templates/SilverlightUpgradeRequiredTemplate":40,ATVWebPlayerInterface:135,ATVWebUserAgent:158,
"atv-objects":84,"atv-preconditions":85,"js-logger":164,underscore:173}],37:[function(a,h,g){var e=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype;a.prototype=new c};a("ATVWebLocalization");g=a("../../ModalDisplayManager/StandardModalTemplate");a("atv-utils");a=function(a){function b(){a.call(this,b.KEY)}e(b,a);b.prototype.renderString=function(c,d){return a.prototype.renderString.call(this,c,d,{extraText:b.EXTRA_TEXT})};
b.KEY="SL_ACTIVEX";b.EXTRA_TEXT="<ol>{{#steps}}<li>{{{step}}}</li>{{/steps}}</ol>";return b}(g);h.exports=a},{"../../ModalDisplayManager/StandardModalTemplate":22,ATVWebLocalization:108,"atv-utils":93}],38:[function(a,h,g){var e=this.__extends||function(a,b){function d(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);d.prototype=b.prototype;a.prototype=new d},f=a("ATVWebUserAgent"),b=f.OperatingSystemFamily;a("ATVWebLocalization");var c=a("atv-objects"),d=a("node-uuid");g=a("../../ModalDisplayManager/StandardModalTemplate");
a("atv-utils");a=function(a){function l(d){this.osFamily=c.isNullOrUndefined(d)?f.getOperatingSystem().getFamily():d;this.osFamily===b.Mac?a.call(this,l.MAC_KEY):a.call(this,l.WINDOWS_KEY)}e(l,a);l.prototype.renderString=function(d,c){var f=this.osFamily===b.Mac?l.MAC_EXTRA_TEXT:this.createWindowsExtraText();return a.prototype.renderString.call(this,d,c,{extraText:f})};l.prototype.createWindowsExtraText=function(){var a="manual_repair_steps_"+d.v4().replace(/-/g,"");return'<ol>{{#fix_it_tool_steps}}<li>{{{step}}}</li>{{/fix_it_tool_steps}}</ol>{{#manual_repair_steps}}{{{pre_link_text}}}<a href="javascript:'+
("(function () {var e = document.getElementById('"+a+"');e.style.display = e.style.display === 'none' ? '' : 'none';})();")+'">{{{link_text}}}</a>{{{post_link_text}}}<ol id="'+a+'" style="display:none;">{{#steps}}<li>{{{step}}}</li>{{/steps}}</ol>{{/manual_repair_steps}}'};l.MAC_KEY="SL_CORRUPTION_MAC";l.WINDOWS_KEY="SL_CORRUPTION_WINDOWS";l.MAC_EXTRA_TEXT="<ol>{{#steps}}<li>{{{step}}}</li>{{/steps}}</ol>";return l}(g);h.exports=a},{"../../ModalDisplayManager/StandardModalTemplate":22,ATVWebLocalization:108,
ATVWebUserAgent:158,"atv-objects":84,"atv-utils":93,"node-uuid":167}],39:[function(a,h,g){var e=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype;a.prototype=new c};a=function(a){function b(){a.call(this,b.KEY)}e(b,a);b.KEY="SL_INSTALL";return b}(a("../../ModalDisplayManager/InstallUpdateModalTemplate"));h.exports=a},{"../../ModalDisplayManager/InstallUpdateModalTemplate":20}],40:[function(a,h,g){var e=this.__extends||
function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype;a.prototype=new c};a=function(a){function b(){a.call(this,b.KEY)}e(b,a);b.KEY="SL_UPGRADE";return b}(a("../../ModalDisplayManager/InstallUpdateModalTemplate"));h.exports=a},{"../../ModalDisplayManager/InstallUpdateModalTemplate":20}],41:[function(a,h,g){var e=a("atv-objects"),f=a("atv-preconditions");a("./SpinnerType");a=function(){function a(){}a.prototype.initialize=function(c,d,
e,l){this.parent=f.checkNotNullAndNotUndefined(c,"SpinnerPanel#initialize: parent cannot be null or undefined");this.assetUrls=f.checkNotNullAndNotUndefined(d,"SpinnerPanel#initialize: assetUrls cannot be null or undefined");0===e&&(f.checkNotNullAndNotUndefined(d[location.protocol],"SpinnerPanel#initialize: assetUrls with a list of assets for current protocol is required"),f.checkNotNullAndNotUndefined(d[location.protocol][a.SPINNER_GIF_NAME],"SpinnerPanel#initialize: asset for GIF spinner is required"),
f.checkNotNullAndNotUndefined(d[location.protocol][a.SPINNER_SVG_NAME],"SpinnerPanel#initialize: asset for SVG spinner is required"));this.contents=l;this.createHTMLElements(e)};a.prototype.createHTMLElements=function(c){this.spinner=document.createElement("div");this.spinner.className="playerLoadingOverlay";this.spinner.style.width="100%";this.spinner.style.height="100%";var d=this.assetUrls[location.protocol];this.spinner.innerHTML=0===c?'\n                <div style="width:100%; height:44%"></div>\n                <div style="width:100%; height:11.36%">\n                    \x3c!--[if gte IE 10]>\x3c!--\x3e\n                        <img class="spinning orangeSpinner" src="'+
d[a.SPINNER_SVG_NAME]+'"/>\n                    \x3c!--<![endif]--\x3e\n                    \x3c!--[if lte IE 9]>\n                        <img src="'+d[a.SPINNER_GIF_NAME]+'" />\n                    <![endif]--\x3e\n                </div>\n                <div style="width:100%; height:4.5%"></div>':'<div class="spinning whiteSpinner"></div>';this.parent.appendChild(this.spinner);this.show()};a.prototype.show=function(){this.spinner.style.display="";e.isNullOrUndefined(this.contents)||(this.contents.style.width=
"1px",this.contents.style.height="1px")};a.prototype.hide=function(){this.spinner.style.display="none";e.isNullOrUndefined(this.contents)||(this.contents.style.width="",this.contents.style.height="")};a.SPINNER_GIF_NAME="ORANGE_SPINNER_GIF";a.SPINNER_SVG_NAME="ORANGE_SPINNER_SVG";return a}();h.exports=a},{"./SpinnerType":42,"atv-objects":84,"atv-preconditions":85}],42:[function(a,h,g){var e;a=e||(e={});a[a.ORANGE=0]="ORANGE";a[a.WHITE=1]="WHITE";h.exports=e},{}],43:[function(a,h,g){a=function(){function a(){}
a.toString=function(){return"aborted"};return a}();h.exports=a},{}],44:[function(a,h,g){a=function(){function a(){}a.toString=function(){return"asinChanged"};return a}();h.exports=a},{}],45:[function(a,h,g){a=function(){function a(f){this.position=f}a.toString=function(){return"closed"};return a}();h.exports=a},{}],46:[function(a,h,g){a=function(){function a(){}a.toString=function(){return"playing"};return a}();h.exports=a},{}],47:[function(a,h,g){var e=a("./Events/AbortedEvent"),f=a("./Events/AsinChangedEvent"),
b=a("./Events/ClosedEvent"),c=a("./Events/PlayingEvent");g=a("ATVWebPlayerInterface");var d=g.CloseEvent,n=g.InitializedEvent,l=g.PreparedEvent,p=g.PlayingEvent,q=g.StoppingEvent,m=g.EndOfContentEvent,r=g.AsinChangedEvent,u=g.PlayerCapabilitiesEvent,k=g.CacheType;a("ATVWebUserAgent");var A=a("atv-preconditions"),x=a("atv-objects"),E=a("atv-events"),y=a("underscore");g=a("js-logger");var M=a("../DelegatingWebPlayer/DelegatingWebPlayer"),K=a("../DelegatingWebPlayer/extend"),F=a("../DelegatingWebPlayer/PlayerState"),
I=g.get("StatelessWebPlayer");a=function(){function a(b,d,e){var l=this;void 0===b&&(b=M);void 0===d&&(d=y.now);void 0===e&&(e=!0);this.playerCapabilities=this.newPlaybackConfig=this.newContentConfig=this.newPlayerConfig=this.playbackConfig=this.contentConfig=this.playerConfig=this.webPlayer=null;this.isWaiting=!1;this.canPrepareOnInitialize=!0;this.shouldEmitClosed=!1;this.lastPosition=null;this.cacheType=k.CacheMiss;this.playInvokedTime=null;this.eventEmitter=new E.BasicEventEmitter;this.onStateChanged=
function(){l.isWaiting=!1;var a=l.getPlayerState();I.info("Changed state to: "+F[a]);switch(a){case 0:l.onUninitialized();break;case 2:l.onInitialized();break;case 3:l.onPreparing();break;case 4:l.onPrepared();break;case 5:l.onPlaying();break;case 6:l.onStopping();break;case 7:l.onAborted();break;default:throw Error("Unable to transition at invalid state: "+a);}};this.onPlayerCapabilities=function(a){a=a.capabilities;y.isEqual(l.playerCapabilities,a)||(l.playerCapabilities=K(!0,{},a),l.emitEvent(u,
{capabilities:l.playerCapabilities}))};this.onPlayerClose=function(){l.shouldEmitClosed=!0;var a=l.getPlayerState();if(4===a||5===a)l.lastPosition=l.webPlayer.getPosition();l.newContentConfig=null;l.newPlaybackConfig=null;l.onStateChanged()};this.reportPlaying=function(a){l.emitEvent(c,a)};this.reportAsinChanged=function(a){l.emitEvent(f,a)};this.webPlayerClass=b;this.now=d;this.preInitEnabled=e}a.prototype.initialize=function(a){if(this.preInitEnabled)try{I.info("Initialize called."),this.updateConfig(a)}catch(b){throw I.error("Unhandled exception in initialize.",
b),b;}else I.info("Pre-init disabled, ignoring call to initialize.")};a.prototype.prepare=function(a,b){if(this.preInitEnabled)if(x.isNullOrUndefined(this.newPlaybackConfig))try{I.info("Prepare called."),this.isEqualWithoutPosition(b,this.newContentConfig)&&null!==this.newPlaybackConfig?I.info("Content config matches previous call to play, ignoring call to prepare."):this.updateConfig(a,b)}catch(d){throw I.error("Unhandled exception in prepare.",d),d;}else I.warn("Pre-init disabled while already playing content, ignoring calls to prepare.");
else I.warn("Pre-init disabled, ignoring call to prepare.")};a.prototype.play=function(a,b,d){try{I.info("Play called.");if(!(null!==this.playInvokedTime||y.isEqual(b,this.newContentConfig)&&y.isEqual(d,this.newPlaybackConfig))){this.playInvokedTime=this.now();switch(this.getPlayerState()){case 4:this.cacheType=k.CacheHit;break;case 3:this.cacheType=k.CachePartialHit;break;default:this.cacheType=k.CacheMiss}null!==this.webPlayer&&this.webPlayer.playbackInitiated(this.isEqualWithoutPosition(b,this.newContentConfig))}y.isEqual(b,
this.newContentConfig)||(this.cacheType=k.CacheMiss);this.updateConfig(a,b,d)}catch(c){throw I.error("Unhandled exception in play.",c),c;}};a.prototype.on=function(a,b){this.eventEmitter.on(a,b)};a.prototype.once=function(a,b){this.eventEmitter.once(a,b)};a.prototype.off=function(a,b){this.eventEmitter.off(a,b)};a.prototype.updateConfig=function(a,b,d){void 0===b&&(b=null);void 0===d&&(d=null);A.checkArgument(null===this.playerConfig||y.isEqual(this.playerConfig,a),"The playerConfig cannot be changed after initialization.");
this.newPlayerConfig=K(!0,{},a);this.newContentConfig=null!==b?K(!0,{},b):null;this.newPlaybackConfig=null!==d?K(!0,{},d):null;null!==b&&(this.canPrepareOnInitialize=!0);this.shouldEmitClosed&&(this.shouldEmitClosed=!1);if(!this.isWaiting)this.onStateChanged()};a.prototype.onUninitialized=function(){this.playerConfig=this.newPlayerConfig;null!==this.webPlayer&&(this.webPlayer.off(n,this.onStateChanged),this.webPlayer.off(l,this.onStateChanged),this.webPlayer.off(p,this.onStateChanged),this.webPlayer.off(p,
this.reportPlaying),this.webPlayer.off(r,this.reportAsinChanged),this.webPlayer.off(d,this.onPlayerClose),this.webPlayer.off(m,this.onPlayerClose),this.webPlayer.off(u,this.onPlayerCapabilities));this.webPlayer=new this.webPlayerClass;this.webPlayer.on(n,this.onStateChanged);this.webPlayer.on(l,this.onStateChanged);this.webPlayer.on(p,this.onStateChanged);this.webPlayer.on(p,this.reportPlaying);this.webPlayer.on(q,this.onStateChanged);this.webPlayer.on(r,this.reportAsinChanged);this.webPlayer.on(d,
this.onPlayerClose);this.webPlayer.on(m,this.onPlayerClose);this.webPlayer.once(u,this.onPlayerCapabilities);this.isWaiting=!0;this.webPlayer.initialize(this.playerConfig);null!==this.newPlaybackConfig&&this.webPlayer.playbackInitiated(!0)};a.prototype.onInitialized=function(){this.reportClosedEvent();if(!this.canPrepareOnInitialize)this.canPrepareOnInitialize=!0,this.playbackConfig=this.contentConfig=null;else if(!y.isEqual(this.playerConfig,this.newPlayerConfig))this.onUninitialized();else if(!y.isEqual(this.contentConfig,
this.newContentConfig)||!y.isEqual(this.playbackConfig,this.newPlaybackConfig))if(this.contentConfig=this.newContentConfig,null!==this.contentConfig){var a=!x.isNullOrUndefined(this.newPlaybackConfig);this.canPrepareOnInitialize=!1;this.webPlayer.prepare(y.extend({immediateConsumption:a},this.contentConfig))}else this.playbackConfig=null};a.prototype.onPreparing=function(){var a=this.isEqualWithoutPosition(this.contentConfig,this.newContentConfig);y.isEqual(this.playerConfig,this.newPlayerConfig)&&
a||(this.isWaiting=!0,this.webPlayer.stop())};a.prototype.onPrepared=function(){this.canPrepareOnInitialize=!0;var a=this.isEqualWithoutPosition(this.contentConfig,this.newContentConfig);y.isEqual(this.playerConfig,this.newPlayerConfig)&&a?(y.isNumber(this.newContentConfig.position)&&this.contentConfig.position!==this.newContentConfig.position&&(this.contentConfig.position=this.newContentConfig.position,this.webPlayer.seek(this.contentConfig.position)),this.playbackConfig=this.newPlaybackConfig,null!==
this.playbackConfig&&(this.webPlayer.play(K({},this.playbackConfig,{playbackInitiatedTime:this.playInvokedTime,cacheType:this.cacheType})),this.playInvokedTime=null)):(this.isWaiting=!0,this.webPlayer.stop())};a.prototype.onPlaying=function(){var a=this.isEqualWithoutPosition(this.contentConfig,this.newContentConfig);y.isEqual(this.playerConfig,this.newPlayerConfig)&&a&&y.isEqual(this.playbackConfig,this.newPlaybackConfig)?(null!==this.contentConfig&&y.isNumber(this.newContentConfig.position)&&this.contentConfig.position!==
this.newContentConfig.position&&this.webPlayer.seek(this.newContentConfig.position),this.newContentConfig.position=null,this.contentConfig=this.newContentConfig):(this.isWaiting=!0,this.webPlayer.stop())};a.prototype.onStopping=function(){this.newPlaybackConfig=this.newContentConfig=null};a.prototype.onAborted=function(){this.reportClosedEvent();this.emitEvent(e,new e)};a.prototype.reportClosedEvent=function(){this.shouldEmitClosed&&(this.emitEvent(b,new b(this.lastPosition)),this.lastPosition=null,
this.shouldEmitClosed=!1)};a.prototype.emitEvent=function(a,b){try{this.eventEmitter.emit(a,b)}catch(d){x.isNullOrUndefined(window.console)||console.error("An exception was thrown in a StatelessWebPlayer callback for event: "+a,d)}};a.prototype.getPlayerState=function(){return null===this.webPlayer?0:this.webPlayer.getState()};a.prototype.isEqualWithoutPosition=function(a,b){return y.isEqual(y.omit(a,"position"),y.omit(b,"position"))};return a}();h.exports=a},{"../DelegatingWebPlayer/DelegatingWebPlayer":4,
"../DelegatingWebPlayer/PlayerState":6,"../DelegatingWebPlayer/extend":14,"./Events/AbortedEvent":43,"./Events/AsinChangedEvent":44,"./Events/ClosedEvent":45,"./Events/PlayingEvent":46,ATVWebPlayerInterface:135,ATVWebUserAgent:158,"atv-events":75,"atv-objects":84,"atv-preconditions":85,"js-logger":164,underscore:173}],48:[function(a,h,g){var e;a=e||(e={});a[a.BROWSER_OUT_OF_DATE=0]="BROWSER_OUT_OF_DATE";a[a.MISSING_CODEC=1]="MISSING_CODEC";a[a.MISSING_CDM=2]="MISSING_CDM";a[a.UNSUPPORTED_BROWSER=
3]="UNSUPPORTED_BROWSER";a[a.UNSUPPORTED_OS=4]="UNSUPPORTED_OS";h.exports=e},{}],49:[function(a,h,g){a("ATVWebWeblabClient");a("atv-constants");g=a("js-logger");var e=a("atv-objects"),f=a("atv-preconditions"),b=a("underscore"),c=g.get("WebPlayerFactorySelector");a=function(){function a(){this.sortedPlayerFactories=null}a.prototype.initialize=function(a,d,c,e){this.sortedPlayerFactories=f.checkNotNullAndNotUndefined(a,"WebPlayerFactorySelector requires a defined and non-null factoryList");f.checkNotNullAndNotUndefined(c,
"WebPlayerFactorySelector requires a defined and non-null weblab map");b.forEach(this.sortedPlayerFactories,function(a){a.initialize(d,c,e)})};a.prototype.reset=function(){this.sortedPlayerFactories=null};a.prototype.selectFactory=function(a,d,p){f.checkState(null!==this.sortedPlayerFactories,"selectFactory cannot be called before WebPlayerFactorySelector is initialized");var q=b.clone(this.sortedPlayerFactories);if(!e.isNullOrUndefined(p)){p=p.toLowerCase();for(var g=-1,h=0;h<q.length;++h)if(q[h].getPlayerName()===
p){g=h;break}-1===g?c.warn("Cannot find preferred player factory."):(p=q.splice(g,1),q.splice(0,0,p[0]))}this.findPlayerFactory(q,0,a,d)};a.prototype.findPlayerFactory=function(a,b,d,c,f,g){var h=this;void 0===f&&(f="");void 0===g&&(g=null);this.isFactorySupported(a[b],function(k,A,x,E){e.isNullOrUndefined(x)&&(x="");null===g&&(g=E);k?d(a[b],A,f+x):b!==a.length-1?h.findPlayerFactory(a,b+1,d,c,f+x,g):d(null,null,x,g)},c)};a.prototype.selectFactoryWithOverride=function(a,d){f.checkNotNullAndNotUndefined(d,
"WebPlayerFactorySelector#selectFactoryWithOverride: override cannot be null or undefined");f.checkState(null!==this.sortedPlayerFactories,"selectFactoryWithOverride cannot be called before WebPlayerFactorySelector is initialized");var e=d.toLowerCase(),q=b.find(this.sortedPlayerFactories,function(a){return a.getPlayerName()===e});b.isUndefined(q)?(c.error("Overridden player '"+d+"' does not exist."),a(null)):this.isFactorySupported(q,function(b,f){b||c.warn("Overridden player '"+d+"' is not supported on this platform. Playback may not function.");
a(q,f)})};a.prototype.isFactorySupported=function(a,b,d){a.getPlayerCapabilities(function(a,d,c){b(a.supportsWebPlayback||a.supportsNativePlayback,a,d,c)},d)};return a}();h.exports=a},{ATVWebWeblabClient:161,"atv-constants":66,"atv-objects":84,"atv-preconditions":85,"js-logger":164,underscore:173}],50:[function(a,h,g){var e=a("atv-objects"),f=a("atv-preconditions"),b=a("ATVWebWeblabClient").WeblabTreatment;a=function(){function a(){}a.stringify=function(a){f.checkNotNullAndNotUndefined(a,"Can't stringify null or undefined weblab list");
var c=[],l;for(l in a)if(a.hasOwnProperty(l)){var p=a[l],p=e.isNullOrUndefined(p)?"C":b[p];c.push(l+":"+p)}return c.join(" ")};return a}();h.exports=a},{ATVWebWeblabClient:161,"atv-objects":84,"atv-preconditions":85}],51:[function(a,h,g){var e=a("atv-constants").MarketplaceID;g=a("ATVWebPlayerInterface");var f=g.InitializedEvent,b=g.PreparedEvent,c=g.VideoType,d=a("atv-preconditions"),n=a("atv-events").BasicEventEmitter,l=a("atv-objects"),p=a("js-logger").get("iOSWebPlayer");a=function(){function a(){this.isPrepared=
this.isInitialized=!1;this.eventEmitter=new n;this.appStoreLinks={};this.appStoreLinks[e.DE]="https://itunes.apple.com/de/app/amazon-lovefilm/id457830447";this.appStoreLinks[e.JP]="https://itunes.apple.com/jp/app/amazon-instant-video-japan/id777564327";this.appStoreLinks[e.UK]="https://itunes.apple.com/gb/app/amazon-lovefilm-instant/id454468674";this.appStoreLinks[e.US]="https://itunes.apple.com/us/app/amazon-instant-video/id545519333";this.appStoreProtocols={};this.appStoreProtocols[e.DE]="aiv-de";
this.appStoreProtocols[e.JP]="aiv-jp";this.appStoreProtocols[e.UK]="aiv-uk";this.appStoreProtocols[e.US]="aiv"}a.prototype.initialize=function(a){this.marketplaceID=a.marketplaceId;this.isInitialized=!0;this.eventEmitter.emit(f)};a.prototype.prepare=function(a){d.checkState(this.isInitialized,"iOSWebPlayer must be initialized before prepare()");d.checkNotNullAndNotUndefined(a,"ContentConfig must be defined to prepare the iOSWebPlayer");d.checkNotNullAndNotUndefined(a.asin,"An ASIN must be defined to prepare the iOSWebPlayer");
this.asin=a.asin;this.playTrailer=a.videoType===c[c.Trailer];this.startTime=l.isNullOrUndefined(a.position)?0:a.position;this.isPrepared=!0;this.eventEmitter.emit(b)};a.prototype.play=function(){d.checkState(this.isPrepared,"iOSWebPlayer must be prepared before play()");var b=a.OPEN_APP_LINK_TEMPLATE.replace("{{protocol}}",this.appStoreProtocols[this.marketplaceID]).replace("{{action}}",0===this.startTime?a.PLAY_ACTION:a.RESUME_ACTION).replace("{{asin}}",this.asin);0!==this.startTime&&(b+=a.TIME_PARAM_TEMPLATE.replace("{{time}}",
""+this.startTime));this.playTrailer&&(b+=a.PLAY_TRAILER_PARAM);this.runDeepLink(b)};a.prototype.playbackInitiated=function(){};a.prototype.stop=function(){d.checkState(this.isPrepared,"iOSWebPlayer must be prepared before stop()");this.startTime=this.playTrailer=this.asin=null;this.isPrepared=!1;this.eventEmitter.emit(f)};a.prototype.seek=function(a){throw Error("iOSWebPlayer does not support seeking");};a.prototype.on=function(a,b){this.eventEmitter.on(a,b)};a.prototype.once=function(a,b){this.eventEmitter.once(a,
b)};a.prototype.off=function(a,b){this.eventEmitter.off(a,b)};a.prototype.getPosition=function(){return 0};a.prototype.getDuration=function(){return 0};a.prototype.getDeviceTypeId=function(){throw Error("iOSWebPlayer#getDeviceTypeId is not supported");};a.prototype.validatePIN=function(a){p.info("iOSWebPlayer#validatePIN is not implemented.")};a.prototype.runDeepLink=function(b){var d=this,c=(new Date).getTime(),f=!0;window.setTimeout(function(){if((new Date).getTime()-c>a.WAIT_FOR_APP_MS+a.WAIT_FOR_APP_THRESHOLD_MS)f=
!1;else d.onAppLaunchFail()},a.WAIT_FOR_APP_MS);window.addEventListener("pageshow",function(){f&&(f=!1,d.onReturnFromInstall())});document.location.href=b};a.prototype.onAppLaunchFail=function(){document.location.href=this.appStoreLinks[this.marketplaceID]};a.prototype.onReturnFromInstall=function(){document.location.reload()};a.PLAY_ACTION="play";a.RESUME_ACTION="resume";a.OPEN_APP_LINK_TEMPLATE="{{protocol}}://aiv/{{action}}/?asin={{asin}}";a.TIME_PARAM_TEMPLATE="&time={{time}}";a.PLAY_TRAILER_PARAM=
"&type=trailer";a.WAIT_FOR_APP_MS=1E3;a.WAIT_FOR_APP_THRESHOLD_MS=100;return a}();h.exports=a},{ATVWebPlayerInterface:135,"atv-constants":66,"atv-events":75,"atv-objects":84,"atv-preconditions":85,"js-logger":164}],52:[function(a,h,g){a("atv-constants");a("ATVWebWeblabClient");var e=a("ATVWebUserAgent").OperatingSystemFamily,f=a("atv-preconditions"),b=a("./iOSWebPlayer");a=function(){function a(b){this.os=f.checkNotNullAndNotUndefined(b,"iOSWebPlayerFactory#constructor: os cannot be null or undefined")}
a.prototype.initialize=function(a,b){};a.prototype.getPlayerName=function(){return a.PLAYER_NAME};a.prototype.getPlayerVersion=function(){return a.PLAYER_VERSION};a.prototype.getMetricsFeature=function(){return a.METRICS_FEATURE};a.prototype.getDeviceTypeId=function(){return""};a.prototype.getPlayerCapabilities=function(a,b){a({supportsDrm:!0,supportsNativePlayback:this.os.getFamily()===e.iOS,supportsWebPlayback:!1,supportsAVOD:!1,supportsMidStreamMTA:!1,supportsHDMovies:!1,supportsHDTVShows:!1,supportsLive:!1})};
a.prototype.createWebPlayer=function(a,c,f){a(new b)};a.PLAYER_NAME="ios";a.PLAYER_VERSION="unknown";a.METRICS_FEATURE="iOSPlayer";return a}();h.exports=a},{"./iOSWebPlayer":51,ATVWebUserAgent:158,ATVWebWeblabClient:161,"atv-constants":66,"atv-preconditions":85}],53:[function(a,h,g){g.WEB_PLAYER="1.0.560.6";g.html5="1.2.639.0";g.silverlight="1.0.97.0"},{}],54:[function(a,h,g){var e=a("./Modules/StatelessWebPlayer/StatelessWebPlayer");window.StatelessWebPlayer=function(){var a=new e;this.initialize=
function(b){a.initialize(b)};this.prepare=function(b,c){a.prepare(b,c)};this.play=function(b,c,d){a.play(b,c,d)};this.on=function(b,c){a.on(b,c)};this.once=function(b,c){a.once(b,c)};this.off=function(b,c){a.off(b,c)}}},{"./Modules/StatelessWebPlayer/StatelessWebPlayer":47}],55:[function(a,h,g){var e=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype;a.prototype=new c};a=function(a){function b(){a.apply(this,arguments)}
e(b,a);b.PlayStream=new b("PlayStream");b.PlayTrailer=new b("PlayTrailer");return b}(a("./ClickstreamParameter"));h.exports=a},{"./ClickstreamParameter":56}],56:[function(a,h,g){a=function(){function a(f){this.name=f}a.prototype.toString=function(){return this.name};return a}();h.exports=a},{}],57:[function(a,h,g){var e=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype;a.prototype=new c};a=function(a){function b(){a.apply(this,
arguments)}e(b,a);b.PageHit=new b("PageHit");b.PageTouch=new b("PageTouch");return b}(a("./ClickstreamParameter"));h.exports=a},{"./ClickstreamParameter":56}],58:[function(a,h,g){var e=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype;a.prototype=new c};a=function(a){function b(){a.apply(this,arguments)}e(b,a);b.Player=new b("Player");return b}(a("./ClickstreamParameter"));h.exports=a},{"./ClickstreamParameter":56}],
59:[function(a,h,g){var e=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype;a.prototype=new c};a=function(a){function b(){a.apply(this,arguments)}e(b,a);b.ASIN=new b("ASIN");return b}(a("./ClickstreamParameter"));h.exports=a},{"./ClickstreamParameter":56}],60:[function(a,h,g){var e=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype;
a.prototype=new c};a=function(a){function b(){a.apply(this,arguments)}e(b,a);b.Pin=new b("Pin");b.PinError=new b("PinError");b.Player=new b("Player");return b}(a("./ClickstreamParameter"));h.exports=a},{"./ClickstreamParameter":56}],61:[function(a,h,g){var e;a=e||(e={});a[a.plr_hd_on=0]="plr_hd_on";a[a.plr_hd_off=1]="plr_hd_off";a[a.plr_nxt_ep=2]="plr_nxt_ep";a[a.plr_pin_ok=3]="plr_pin_ok";a[a.plr_b_fscrn_on=4]="plr_b_fscrn_on";a[a.plr_b_fscrn_off=5]="plr_b_fscrn_off";h.exports=e},{}],62:[function(a,
h,g){g=a("./ClickstreamParameters/Action");var e=a("./ClickstreamParameters/ClickstreamParameter"),f=a("./ClickstreamParameters/HitType"),b=a("./ClickstreamParameters/PageType"),c=a("./ClickstreamParameters/PageTypeIdSource"),d=a("./RefMarker");a=a("./ClickstreamParameters/SubPageType");h.exports={Action:g,ClickstreamParameter:e,HitType:f,PageType:b,PageTypeIdSource:c,RefMarker:d,SubPageType:a}},{"./ClickstreamParameters/Action":55,"./ClickstreamParameters/ClickstreamParameter":56,"./ClickstreamParameters/HitType":57,
"./ClickstreamParameters/PageType":58,"./ClickstreamParameters/PageTypeIdSource":59,"./ClickstreamParameters/SubPageType":60,"./RefMarker":61}],63:[function(a,h,g){var e=a("ATVWebHTTPRequest").HttpRequest,f=a("atv-objects"),b=a("atv-preconditions");a=function(){function a(d,f,l,p,q,g,h){void 0===h&&(h=e);b.checkNotNullAndNotUndefined(d,"ClickstreamClient#constructor: partnerServiceEndpoint cannot be null or undefined");this.clickstreamSessionId=b.checkNotNullAndNotUndefined(f,"ClickstreamClient#constructor: clickstreamSessionId cannot be null or undefined");
this.customerId=b.checkNotNullAndNotUndefined(l,"ClickstreamClient#constructor: customerId cannot be null or undefined");this.deviceId=b.checkNotNullAndNotUndefined(p,"ClickstreamClient#constructor: deviceId cannot be null or undefined");this.deviceTypeId=b.checkNotNullAndNotUndefined(q,"ClickstreamClient#constructor: deviceTypeId cannot be null or undefined");this.token=b.checkNotNullAndNotUndefined(g,"ClickstreamClient#constructor: token cannot be null or undefined");this.url=d.replace(/\/$/,"")+
a.URL_PATH;this.httpRequest=h}a.isSupported=function(){return e.isSupported()&&"undefined"!==typeof Array.prototype.forEach&&"undefined"!==typeof Array.prototype.map};a.prototype.report=function(d,e,l){b.checkNotNullAndNotUndefined(d,"ClickstreamClient#report: event cannot be null or undefined");d=this.httpRequest.post(this.url).header("x-atv-session-id",this.clickstreamSessionId).header("x-retry-count","0").header("x-request-priority","NOTIFICATION").timeout(a.HTTP_REQUEST_TIMEOUT_MS).query({customerID:this.customerId,
deviceID:this.deviceId,deviceTypeID:this.deviceTypeId,firmware:"1",token:this.token}).body(this.createBody(d));if(!f.isNullOrUndefined(e))d.onLoad(function(a){e(a.getLatencyMs())});if(!f.isNullOrUndefined(l))d.onError(function(a,b){f.isNullOrUndefined(b)?l(a):l(a,b.getLatencyMs())});d.send()};a.prototype.createBody=function(a){var b;b="<ClickstreamRequest><EntryList><member>"+("<pageType>"+a.pageType+"</pageType>");b+="<refMarker>"+a.refMarker+"</refMarker>";f.isNullOrUndefined(a.action)||(b+="<action>"+
a.action+"</action>");f.isNullOrUndefined(a.hitType)||(b+="<hitType>"+a.hitType+"</hitType>");f.isNullOrUndefined(a.pageTypeId)||(b+="<pageTypeId>"+a.pageTypeId+"</pageTypeId>");f.isNullOrUndefined(a.pageTypeIdSource)||(b+="<pageTypeIdSource>"+a.pageTypeIdSource+"</pageTypeIdSource>");f.isNullOrUndefined(a.subPageType)||(b+="<subPageType>"+a.subPageType+"</subPageType>");return b+"</member></EntryList></ClickstreamRequest>"};a.URL_PATH="/cdp/usage/Clickstream";a.HTTP_REQUEST_TIMEOUT_MS=4E3;return a}();
h.exports=a},{ATVWebHTTPRequest:104,"atv-objects":84,"atv-preconditions":85}],64:[function(a,h,g){a=function(){function a(){this.subPageType=this.refMarker=this.pageTypeIdSource=this.pageTypeId=this.pageType=this.hitType=this.action=null}a.prototype.withAction=function(a){this.action=a.toString();return this};a.prototype.withHitType=function(a){this.hitType=a.toString();return this};a.prototype.withPageType=function(a){this.pageType=a.toString();return this};a.prototype.withPageTypeId=function(a){this.pageTypeId=
a;return this};a.prototype.withPageTypeIdSource=function(a){this.pageTypeIdSource=a.toString();return this};a.prototype.withRefMarker=function(a){this.refMarker=a;return this};a.prototype.withSubPageType=function(a){this.subPageType=a.toString();return this};a.prototype.build=function(){if(!this.refMarker||!this.pageType)return null;var a={refMarker:this.refMarker,pageType:this.pageType};this.subPageType&&(a.subPageType=this.subPageType);this.hitType&&(a.hitType=this.hitType);this.pageTypeId&&(a.pageTypeId=
this.pageTypeId);this.pageTypeIdSource&&(a.pageTypeIdSource=this.pageTypeIdSource);this.action&&(a.action=this.action);return a};return a}();h.exports=a},{}],65:[function(a,h,g){g=a("./ClickstreamClient");a=a("./ClickstreamEventBuilder");h.exports={ClickstreamClient:g,ClickstreamEventBuilder:a}},{"./ClickstreamClient":63,"./ClickstreamEventBuilder":64}],66:[function(a,h,g){g=a("./Constants/AmazonFQDN");var e=a("./Constants/MarketplaceID"),f=a("./Constants/Weblabs"),b=a("./Constants/DeviceTypeId"),
c=a("./Constants/PartnerServiceEndpoint"),d=a("./Constants/Styling");a=a("./Constants/KeyCode");h.exports={AmazonFQDN:g,DeviceTypeId:b,KeyCode:a,MarketplaceID:e,PartnerServiceEndpoint:c,Styling:d,Weblabs:f}},{"./Constants/AmazonFQDN":67,"./Constants/DeviceTypeId":68,"./Constants/KeyCode":69,"./Constants/MarketplaceID":70,"./Constants/PartnerServiceEndpoint":71,"./Constants/Styling":72,"./Constants/Weblabs":73}],67:[function(a,h,g){var e=a("./MarketplaceID");a=function(){function a(){}a.fromMarketplaceId=
function(b){switch(b){case e.DE:return a.DE;case e.JP:return a.JP;case e.UK:return a.UK;case e.US:return a.US;default:throw Error("Can't get AmazonFQDN for unknown MarketplaceId! Received: "+b);}};a.DE="www.amazon.de";a.JP="www.amazon.co.jp";a.UK="www.amazon.co.uk";a.US="www.amazon.com";return a}();h.exports=a},{"./MarketplaceID":70}],68:[function(a,h,g){a=function(){function a(){}a.SILVERLIGHT_PC="A63V4FRV3YUP9";a.SILVERLIGHT_MAC="A2G17C9GWLWFKO";a.HTML5="AOAGZA014O5RE";return a}();h.exports=a},
{}],69:[function(a,h,g){a=function(){function a(){}a.ESC=27;a.SPACE=32;a.LEFT_ARROW=37;a.UP_ARROW=38;a.RIGHT_ARROW=39;a.DOWN_ARROW=40;a.F=70;a.M=77;return a}();h.exports=a},{}],70:[function(a,h,g){a=function(){function a(){}a.DE="A1PA6795UKMFR9";a.JP="A1VC38T7YXB528";a.UK="A1F83G8C2ARO7P";a.US="ATVPDKIKX0DER";return a}();h.exports=a},{}],71:[function(a,h,g){var e=a("./MarketplaceID");a=function(){function a(){}a.fromMarketplaceId=function(b){switch(b){case e.US:return a.US;case e.UK:case e.DE:return a.EU;
case e.JP:return a.JP;default:throw Error("Can't get PartnerServiceEndpoint for unknown MarketplaceId! Received: "+b);}};a.US="https://atv-ps.amazon.com";a.EU="https://atv-ps-eu.amazon.com";a.JP="https://atv-ps-fe.amazon.com";return a}();h.exports=a},{"./MarketplaceID":70}],72:[function(a,h,g){a=function(){function a(){}a.EXTRA_SMALL_SCREEN_MAX_WIDTH=479;a.SMALL_SCREEN_MIN_WIDTH=480;a.MEDIUM_SCREEN_MIN_WIDTH=640;a.LARGE_SCREEN_MIN_WIDTH=1200;a.EXTRA_LARGE_SCREEN_MIN_WIDTH=1921;a.SCALE_FACTOR_EXTRA_SMALL=
1;a.SCALE_FACTOR_SMALL=100/a.SMALL_SCREEN_MIN_WIDTH;a.SCALE_FACTOR_MEDIUM=100/a.MEDIUM_SCREEN_MIN_WIDTH;a.SCALE_FACTOR_LARGE=100/a.LARGE_SCREEN_MIN_WIDTH;a.SCALE_FACTOR_EXTRA_LARGE=100/a.EXTRA_LARGE_SCREEN_MIN_WIDTH;a.SCREEN_EXTRA_SMALL_MEDIA_QUERY="(max-width: "+a.EXTRA_SMALL_SCREEN_MAX_WIDTH+"px)";a.SCREEN_SMALL_MEDIA_QUERY="(min-width: "+a.SMALL_SCREEN_MIN_WIDTH+"px)";a.SCREEN_MEDIUM_MEDIA_QUERY="(min-width: "+a.MEDIUM_SCREEN_MIN_WIDTH+"px)";a.SCREEN_LARGE_MEDIA_QUERY="(min-width: "+a.LARGE_SCREEN_MIN_WIDTH+
"px)";a.SCREEN_EXTRA_LARGE_MEDIA_QUERY="(min-width: "+a.EXTRA_LARGE_SCREEN_MIN_WIDTH+"px)";return a}();h.exports=a},{}],73:[function(a,h,g){a=function(){function a(){}a.getActiveWeblabs=function(){return[a.HTML5_AVOD_CHROME,a.HTML5_AVOD_IE,a.HTML5_DRAPER,a.HTML5_DRAPER_IE,a.HTML5_DRAPER_OPERA,a.HTML5_HEURISTIC,a.HTML5_RANGE_REQUESTS_OVER_HTTPS,a.HTML5_SAFARI,a.SILVERLIGHT_HTTPS_STREAMING,a.HTML5_LIVE_HEURISTIC,a.HTML5_LIVE_BUFFER_MARGIN,a.HTML5_PLAYER_LOAD,a.HTML5_XRAY_LAUNCH,a.HTML5_CHROME_ANDROID]};
a.HTML5_AVOD_CHROME="AIV_HTML5_CHROME_WEB_PLAYER_AVOD_63626";a.HTML5_AVOD_IE="AIV_HTML5_IE_WEB_PLAYER_AVOD_63624";a.HTML5_DRAPER="AIV_HTML5_WEB_PLAYER_DRAPER_60926";a.HTML5_DRAPER_IE="AIV_HTML5_IE_WEB_PLAYER_DRAPER_63621";a.HTML5_DRAPER_OPERA="AIV_HTML5_OPERA_WEB_PLAYER_DRAPER_64125";a.HTML5_HEURISTIC="AIV_HTML5_HEURISTIC_50908";a.HTML5_RANGE_REQUESTS_OVER_HTTPS="AIV_HTML5_RANGE_REQUESTS_HTTPS_58100";a.HTML5_SAFARI="AIV_HTML5_WEB_PLAYER_SAFARI_60654";a.HTML5_LIVE_HEURISTIC="AIV_HTML5_LIVE_HEURISTIC_63332";
a.HTML5_LIVE_BUFFER_MARGIN="AIV_HTML5_LIVE_BUFFER_MARGIN_63336";a.HTML5_PLAYER_LOAD="AIV_WEB_PLAYER_HTML5_LOAD_66073";a.SILVERLIGHT_HTTPS_STREAMING="AIV_SL_HTTPS_STREAMING_63941";a.HTML5_XRAY_LAUNCH="AIVXRAY_67739";a.HTML5_CHROME_ANDROID="AIV_HTML5_CHROME_ANDROID_SUPPORT_68013";return a}();h.exports=a},{}],74:[function(a,h,g){var e=a("eventemitter2");g=a("js-logger");var f=a("atv-preconditions");g.get("BasicEventEmitter");a=function(){function a(){this.eventEmitter=new e.EventEmitter2}a.prototype.on=
function(a,b){var f=this.getKey(a);this.eventEmitter.on(f,b)};a.prototype.onAny=function(a){this.eventEmitter.onAny(a)};a.prototype.once=function(a,b){var f=this.getKey(a);this.eventEmitter.once(f,b)};a.prototype.many=function(a,b,f){a=this.getKey(a);this.eventEmitter.many(a,b,f)};a.prototype.off=function(a,b){var f=this.getKey(a);this.eventEmitter.off(f,b)};a.prototype.offAny=function(a){this.eventEmitter.offAny(a)};a.prototype.emit=function(a,b){var f=this.getKey(a);this.eventEmitter.emit(f,"undefined"!==
typeof b?b:a)};a.prototype.getKey=function(a){f.checkNotNullAndNotUndefined(a,"Parameter 'eventType' cannot be null or undefined.");f.checkArgument("function"===typeof a.toString,"Parameter 'eventType' must have a 'toString' method.");return a.toString()};return a}();h.exports=a},{"atv-preconditions":85,eventemitter2:163,"js-logger":164}],75:[function(a,h,g){a={BasicEventEmitter:a("./BasicEventEmitter")};h.exports=a},{"./BasicEventEmitter":74}],76:[function(a,h,g){g=a("js-logger");var e=a("underscore"),
f=a("atv-objects"),b=g.get("FiniteStateMachine");a=function(){function a(b){this.currentState=b;this.states={};this.transitionCallbacks=[];this.transitionsInProgress=0;this.illegalTransitionCallbacks=[];this.stateCallbacks={}}a.prototype.addTransition=function(a,b){this.states[b]=e.union(this.states[b],[a]);f.isUndefined(this.stateCallbacks[b])&&(this.stateCallbacks[b]=[])};a.prototype.onTransition=function(a){this.transitionCallbacks=e.union(this.transitionCallbacks,[a])};a.prototype.onIllegalTransition=
function(a){this.illegalTransitionCallbacks=e.union(this.illegalTransitionCallbacks,[a])};a.prototype.onTransitionTo=function(a,b){this.stateCallbacks[a]=e.union(this.stateCallbacks[a],[b])};a.prototype.transitionTo=function(a,c,l,p){if(f.isUndefined(this.states[a])||!e.contains(this.states[a],this.currentState))return this.callCallbacks(this.illegalTransitionCallbacks,this.currentState,a),!1;0<this.transitionsInProgress&&b.warn("Requesting state transition to nextState: "+a+" while "+this.transitionsInProgress+
" transitions are already in progress.");this.transitionsInProgress++;if(!f.isNullOrUndefined(l)&&!l())return this.transitionsInProgress--,!1;l=this.currentState;this.currentState=a;if(!f.isNullOrUndefined(p)&&!p())return this.transitionsInProgress--,this.currentState=l,!1;this.callCallbacks(this.transitionCallbacks,l,a,c);this.callCallbacks(this.stateCallbacks[a],l,a,c);this.transitionsInProgress--;return!0};a.prototype.canTransitionTo=function(a){return!f.isUndefined(this.states[a])&&e.contains(this.states[a],
this.currentState)};a.prototype.getCurrentState=function(){return this.currentState};a.prototype.callCallbacks=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];e.each(a,function(a){a.apply(null,b)})};return a}();h.exports=a},{"atv-objects":84,"js-logger":164,underscore:173}],77:[function(a,h,g){g=a("./Operations");var e=a("./CappedGeometricSequence"),f=a("./LinearRegressionCalculator"),b=a("./PiecewiseLinearFunction"),c=a("./SampleAggregator");a=a("./SlidingWindowEventTracker");
h.exports={CappedGeometricSequence:e,LinearRegressionCalculator:f,PiecewiseLinearFunction:b,SampleAggregator:c,SlidingWindowEventTracker:a,stdDev:g.stdDev,average:g.average,lerp:g.lerp,exponentialInterp:g.exponentialInterp,isApprxEqual:g.isApprxEqual}},{"./CappedGeometricSequence":78,"./LinearRegressionCalculator":79,"./Operations":80,"./PiecewiseLinearFunction":81,"./SampleAggregator":82,"./SlidingWindowEventTracker":83}],78:[function(a,h,g){var e=a("atv-preconditions");a=function(){function a(b){void 0===
b&&(b=Math.random);e.checkNotNullAndNotUndefined(b,"CappedGeometricSequence#constructor: random cannot be null or undefined");this.initialValue=0;this.exponentialFactor=1;this.randomizationFactor=0;this.maxValue=-1;this.random=b}a.prototype.withInitialValue=function(a){e.checkNotNullAndNotUndefined(a,"CappedGeometricSequence#withInitialValue: initialValue cannot be null or undefined");e.checkArgument(0<=a,"CappedGeometricSequence#withInitialValue: initialValue must be positive");this.initialValue=
a;return this};a.prototype.withExponentialFactor=function(a){e.checkNotNullAndNotUndefined(a,"CappedGeometricSequence#withExponentialFactor: exponentialFactor cannot be null or undefined");e.checkArgument(0<a,"CappedGeometricSequence#withExponentialFactor: exponentialFactor must be greater than 0.");this.exponentialFactor=a;return this};a.prototype.withRandomizationFactor=function(a){e.checkNotNullAndNotUndefined(a,"CappedGeometricSequence#withRandomizationFactor: randomizationFactor cannot be null or undefined");
e.checkArgument(0<=a,"CappedGeometricSequence#withRandomizationFactor: randomizationFactor must be positive.");this.randomizationFactor=a;return this};a.prototype.withMaxValue=function(a){e.checkNotNullAndNotUndefined(a,"CappedGeometricSequence#withMaxValue: maxValue cannot be null or undefined");e.checkArgument(0<a,"CappedGeometricSequence#withMaxValue: maxValue must be greater than 0.");this.maxValue=a;return this};a.prototype.getValue=function(a){e.checkNotNullAndNotUndefined(a,'CappedGeometricSequence#getValue: "n" cannot be null or undefined');
e.checkArgument(0<a,'CappedGeometricSequence#getValue: "n" must be greater than 0.');a=this.initialValue*Math.pow(this.exponentialFactor,a-1)+Math.floor(this.random()*this.randomizationFactor*a);-1!=this.maxValue&&a>this.maxValue&&(a=this.maxValue);return a};return a}();h.exports=a},{"atv-preconditions":85}],79:[function(a,h,g){var e=a("atv-preconditions"),f=a("./SampleAggregator");a=function(){function a(b){this.APPRX_ZERO=1E-6;e.checkNotNullAndNotUndefined(b,"maxSamples is a required parameter.");
e.checkArgument(0<b,"maxSamples must be greater than zero");this.xSampleAggregator=new f(b);this.ySampleAggregator=new f(b)}a.prototype.addPoint=function(a,b){e.checkNotNullAndNotUndefined(a,"x is a required parameter.");e.checkNotNullAndNotUndefined(b,"y is a required parameter.");this.xSampleAggregator.addSample(a);this.ySampleAggregator.addSample(b)};a.prototype.reset=function(){this.xSampleAggregator.reset();this.ySampleAggregator.reset()};a.prototype.linearRegression=function(a){e.checkNotNullAndNotUndefined(a,
"windowSize is a required parameter.");e.checkArgument(2<=a,"windowSize must be at least 2.");var b=this.xSampleAggregator.getSamplesInWindow(a),f=this.ySampleAggregator.getSamplesInWindow(a);e.checkState(b.length===f.length,"x and y sample counts should be identical.");var l=b.length;if(2>l)return{slope:0,yIntercept:0,determinationCoefficient:0};var p=this.xSampleAggregator.getAverage(l),q=this.ySampleAggregator.getAverage(l);a=this.xSampleAggregator.getStdDev(l);for(var g=this.ySampleAggregator.getStdDev(l),
h=0,u=0,k=0;k<l;++k)var A=b[k]-p,h=h+A*(f[k]-q),u=u+A*A;if(0===u)return{slope:0,yIntercept:0,determinationCoefficient:0};b=h/u;p=q-b*p;a=Math.abs(g)<this.APPRX_ZERO?0:b/(g/a);return{slope:b,yIntercept:p,determinationCoefficient:a*a}};return a}();h.exports=a},{"./SampleAggregator":82,"atv-preconditions":85}],80:[function(a,h,g){var e=a("atv-preconditions");a=function(){function a(){}a.average=function(a){e.checkNotNullAndNotUndefined(a,"values is a required parameter.");e.checkArgument(0<a.length,
"values must contain at least one element.");return a.reduce(function(a,b){return a+b},0)/a.length};a.stdDev=function(b){e.checkNotNullAndNotUndefined(b,"values is a required parameter.");e.checkArgument(0<b.length,"values must contain at least one element.");var c=a.average(b),d=b.reduce(function(a,b){return a+(b-c)*(b-c)},0);return Math.sqrt(d/b.length)};a.lerp=function(a,c,d){e.checkNotNullAndNotUndefined(a,"start is a required parameter.");e.checkNotNullAndNotUndefined(c,"end is a required parameter.");
e.checkNotNullAndNotUndefined(d,"amount is a required parameter.");return a+(c-a)*Math.min(Math.max(d,0),1)};a.exponentialInterp=function(b,c,d,n){e.checkNotNullAndNotUndefined(b,"exponentialFactor is a required parameter.");e.checkArgument(0!==b,"exponentialFactor must not be zero.");e.checkNotNullAndNotUndefined(c,"start is a required parameter.");e.checkNotNullAndNotUndefined(d,"end is a required parameter.");e.checkNotNullAndNotUndefined(n,"amount is a required parameter.");return a.lerp(c,d,
(Math.exp(b*Math.min(Math.max(n,0),1))-1)/(Math.exp(b)-1))};a.isApprxEqual=function(a,c,d){e.checkNotNullAndNotUndefined(a,"value is a required parameter.");e.checkNotNullAndNotUndefined(c,"expected is a required parameter.");e.checkNotNullAndNotUndefined(d,"delta is a required parameter.");e.checkArgument(0<=d,"delta must be >= 0");return Math.abs(c-a)<=d};return a}();h.exports=a},{"atv-preconditions":85}],81:[function(a,h,g){var e=a("atv-preconditions"),f=a("./Operations");a=function(){function a(b,
d){this.xCoords=e.checkNotNullAndNotUndefined(b,"xCoords is a required parameter.");this.yCoords=e.checkNotNullAndNotUndefined(d,"yCoords is a required parameter.");e.checkArgument(0<this.xCoords.length,"at least one coordinate must be provided.");e.checkArgument(this.xCoords.length===this.yCoords.length,"xCoords and yCoords must be of equal length.");for(var f=0;f<this.xCoords.length-1;++f)e.checkArgument(this.xCoords[f]<this.xCoords[f+1],"x coordinates must be ordered and unique.")}a.prototype.evaluate=
function(a){e.checkNotNullAndNotUndefined(a,"xValue is a required parameter.");if(a>=this.xCoords[this.xCoords.length-1])return this.yCoords[this.xCoords.length-1];for(var b=this.xCoords.length-2;0<=b;--b)if(a>=this.xCoords[b])return f.lerp(this.yCoords[b],this.yCoords[b+1],(a-this.xCoords[b])/(this.xCoords[b+1]-this.xCoords[b]));return this.yCoords[0]};return a}();h.exports=a},{"./Operations":80,"atv-preconditions":85}],82:[function(a,h,g){var e=a("underscore"),f=a("atv-preconditions"),b=a("./Operations");
a=function(){function a(b){f.checkNotNullAndNotUndefined(b,"maxSamples is a required parameter.");f.checkArgument(0<b,"maxSamples must be greater than zero.");this.maxSamples=b;this.reset()}a.prototype.addSample=function(a){f.checkNotNullAndNotUndefined(a,"sample is a required parameter.");this.samples.length>=this.maxSamples&&this.samples.shift();this.samples.push(a)};a.prototype.reset=function(){this.samples=[]};a.prototype.getAverage=function(a){f.checkNotNullAndNotUndefined(a,"windowSize is a required parameter");
f.checkArgument(0<a,"windowSize must be greater than zero");a=this.getSamplesInWindow(a);return 0===a.length?0:b.average(a)};a.prototype.getStdDev=function(a){f.checkNotNullAndNotUndefined(a,"windowSize is a required parameter");f.checkArgument(0<a,"windowSize must be greater than zero");a=this.getSamplesInWindow(a);return 0===a.length?0:b.stdDev(a)};a.prototype.getSum=function(a){f.checkNotNullAndNotUndefined(a,"windowSize is a required parameter");f.checkArgument(0<a,"windowSize must be greater than zero");
a=this.getSamplesInWindow(a);return 0===a.length?0:a.reduce(function(a,b){return a+b},0)};a.prototype.getMinimum=function(a){f.checkNotNullAndNotUndefined(a,"windowSize is a required parameter");f.checkArgument(0<a,"windowSize must be greater than zero");a=this.getSamplesInWindow(a);return 0===a.length?0:e.min(a)};a.prototype.getSamplesInWindow=function(a){return e.last(this.samples,Math.min(this.maxSamples,a))};return a}();h.exports=a},{"./Operations":80,"atv-preconditions":85,underscore:173}],83:[function(a,
h,g){var e=a("atv-objects"),f=a("atv-preconditions"),b=a("underscore");a=function(){function a(d,c){void 0===c&&(c=b.now);this.eventTimestamps=[];f.checkArgument(0<d,"#constructor: windowLengthMs should be greater than zero");this.windowLengthMs=d;this.now=c}a.prototype.recordEvent=function(a){e.isNullOrUndefined(a)&&(a=this.now());f.checkArgument(0<a,"#recordEvent: eventTimestamp should be greater than zero");this.eventTimestamps.push(a)};a.prototype.getEventCountInWindow=function(){this.purgeRecordsOutsideWindow();
return this.eventTimestamps.length};a.prototype.purgeRecordsOutsideWindow=function(){var a=this,c=this.now();this.eventTimestamps=b.filter(this.eventTimestamps,function(b){return c-b<=a.windowLengthMs})};return a}();h.exports=a},{"atv-objects":84,"atv-preconditions":85,underscore:173}],84:[function(a,h,g){var e=a("atv-preconditions"),f=a("underscore");a=function(){function a(){}a.isNullOrUndefined=function(a){return null===a||"undefined"===typeof a};a.isUndefined=function(a){return"undefined"===typeof a};
a.isPropertyNullOrUndefined=function(a,b){e.checkNotNullAndNotUndefined(b,"Parameter 'propertyName' can't be null or undefined.");return this.isNullOrUndefined(a)||null===a[b]||"undefined"===typeof a[b]};a.nestedValue=function(c,d,n){void 0===n&&(n=null);e.checkNotNullAndNotUndefined(d,"Parameter 'keys' can't be null or undefined.");d="string"===typeof d?d.split("."):d;if(0==d.length)return n;c=f.reduce(d,function(d,c){return a.isNullOrUndefined(d)?null:d[c]},c);return a.isNullOrUndefined(c)?n:c};
return a}();h.exports=a},{"atv-preconditions":85,underscore:173}],85:[function(a,h,g){var e=a("js-logger").get("Preconditions");a=function(){function a(){}a.checkArgument=function(b,c){if(!b){e.error(c);var d=Error(c);d.name=a.ILLEGAL_ARGUMENT_ERROR;throw d;}};a.checkState=function(b,c){if(!b){e.error(c);var d=Error(c);d.name=a.ILLEGAL_STATE_ERROR;throw d;}};a.checkNotNull=function(b,c){if(null===b){e.error(c);var d=Error(c);d.name=a.NULL_ARGUMENT_ERROR;throw d;}return b};a.checkNotUndefined=function(b,
c){if("undefined"===typeof b){e.error(c);var d=Error(c);d.name=a.UNDEFINED_ARGUMENT_ERROR;throw d;}return b};a.checkNotNullAndNotUndefined=function(b,c){a.checkNotNull(b,c);a.checkNotUndefined(b,c);return b};a.checkRequiredProperties=function(b,c){for(var d=0,e=b.length;d<e;d++){var l=b[d];a.checkNotUndefined(c[l],"Required property '"+l+"' is missing");a.checkNotNull(c[l],"Property '"+l+"' cannot be null")}};a.checkRequiredOptions=function(b,c){a.checkRequiredProperties(b,c)};a.ILLEGAL_ARGUMENT_ERROR=
"IllegalArgumentError";a.ILLEGAL_STATE_ERROR="IllegalStateError";a.NULL_ARGUMENT_ERROR="NullArgumentError";a.UNDEFINED_ARGUMENT_ERROR="UndefinedArgumentError";return a}();h.exports=a},{"js-logger":164}],86:[function(a,h,g){var e=a("atv-objects"),f=a("atv-constants").AmazonFQDN,b=a("atv-preconditions");a=function(){function a(d,c){this.DEFAULT_MARKETPLACE="*";this.DETAIL_PAGE_BASE="/dp/";this.ERROR_BASE="/dv/error/";this.csUrlPathMap=this.marketplaceID=null;this.marketplaceID=b.checkNotNullAndNotUndefined(d,
"marketplaceID cannot be null or undefined");this.csUrlPathMap=b.checkNotNullAndNotUndefined(c,"csUrlPathMap cannot be null or undefined")}a.prototype.createCSUrl=function(a){b.checkNotNullAndNotUndefined(this.csUrlPathMap[a],"csUrlPathKey cannot map to a null map of Urls");return f.fromMarketplaceId(this.marketplaceID)+this.csUrlPathMap[a][e.isNullOrUndefined(this.csUrlPathMap[a][this.marketplaceID])?this.DEFAULT_MARKETPLACE:this.marketplaceID]};a.prototype.createDetailPageUrl=function(a){return f.fromMarketplaceId(this.marketplaceID)+
this.DETAIL_PAGE_BASE+a};a.prototype.createErrorUrl=function(a){return f.fromMarketplaceId(this.marketplaceID)+this.ERROR_BASE+a};return a}();h.exports=a},{"atv-constants":66,"atv-objects":84,"atv-preconditions":85}],87:[function(a,h,g){var e=a("atv-preconditions");a=function(){function a(){}a.getAttributeOrThrow=function(a,c){e.checkNotNullAndNotUndefined(a,"Unable to get an attribute of a null or undefined element");e.checkNotNullAndNotUndefined(c,"Unable to get an attribute that is null or undefined");
var d=a.getAttribute(c);if(null===d)throw Error("Unable to get attribute '"+c+"'");return d};a.querySelectOrThrow=function(a,c){e.checkNotNullAndNotUndefined(a,"Unable to do a querySelect of a null or undefined element");e.checkNotNullAndNotUndefined(c,"Unable to do a querySelect that is null or undefined");var d=a.querySelector(c);if(null===d)throw Error("Unable to querySelect '"+c+"'");return d};a.querySelectAllOrThrow=function(a,c){e.checkNotNullAndNotUndefined(a,"Unable to do a querySelectAll of a null or undefined element");
e.checkNotNullAndNotUndefined(c,"Unable to do a querySelectAll that is null or undefined");var d=a.querySelectorAll(c);if(null===d||0===d.length)throw Error("Unable to querySelectAll '"+c+"'");return d};return a}();h.exports=a},{"atv-preconditions":85}],88:[function(a,h,g){var e=a("underscore"),f=a("atv-objects"),b=a("atv-preconditions");a=function(){function a(){}a.addClass=function(a,b){if("undefined"!==typeof a.className){var c=a.className.split(" ");"undefined"===typeof e.find(c,function(a){return a===
b})&&(a.className+=" "+b)}};a.removeClass=function(a,b){if("undefined"!==typeof a.className){var c=a.className.split(" ");"undefined"!==typeof e.find(c,function(a){return a===b})&&(c=e.filter(c,function(a){return a!==b}),a.className=c.join(" "))}};a.getElementsByClassName=function(a,b){return f.isUndefined(a.getElementsByClassName)?a.querySelectorAll("."+b):a.getElementsByClassName(b)};a.clickedInElement=function(a,c){b.checkNotNullAndNotUndefined(a,"HTMLElementUtils#clickedInElement requires a non-null and not undefined HTMLElement");
b.checkNotNullAndNotUndefined(c,"HTMLElementUtils#clickedInElement requires a non-null and not undefined MouseEvent");var f=a.getBoundingClientRect();return f.left<c.clientX&&f.left+a.offsetWidth>c.clientX&&f.top<c.clientY&&f.top+a.offsetHeight>c.clientY};return a}();h.exports=a},{"atv-objects":84,"atv-preconditions":85,underscore:173}],89:[function(a,h,g){var e=a("atv-preconditions"),f=a("atv-objects");a=function(){function a(b){this.EXTENSION_REGEX=/(?:\.([^.]+))?$/;this.timeoutMillis=12E4;e.checkArgument("undefined"===
typeof b||null===b||"number"===typeof b&&0<b,"timeoutMillis must be a number greater than zero. Instead it was: "+b);f.isNullOrUndefined(b)||(this.timeoutMillis=b)}a.prototype.acquire=function(a,b){e.checkArgument("undefined"===typeof b||"function"===typeof b,"the onComplete callback must be a function, was "+typeof b);var f=this.getFileExtension(a);if("js"===f)this.acquireJavaScript(a,b);else if("css"===f)this.acquireCSS(a,b);else throw Error("Unable to acquire non-JavaScript or CSS resource: "+
a);};a.prototype.getFileExtension=function(a){return this.EXTENSION_REGEX.exec(a)[1]};a.prototype.acquireJavaScript=function(a,b){var f=this,e=function(a){clearTimeout(p);q&&(q.onload=q.onerror=null);"function"===typeof b&&b(a)},p=setTimeout(function(){e(Error("Timed out acquiring resource after "+f.timeoutMillis+"ms: "+a))},this.timeoutMillis),q=document.createElement("script");q.src=a;q.onload=function(){e()};q.onerror=function(b){e(Error("Error acquiring resource (probably doesn't exist): "+a))};
document.getElementsByTagName("head")[0].appendChild(q)};a.prototype.acquireCSS=function(a,b){var f=document.createElement("link");f.setAttribute("rel","stylesheet");f.setAttribute("type","text/css");f.setAttribute("href",a);document.getElementsByTagName("head")[0].appendChild(f);"function"===typeof b&&b()};return a}();h.exports=a},{"atv-objects":84,"atv-preconditions":85}],90:[function(a,h,g){var e=this.__extends||function(a,c){function d(){this.constructor=a}for(var f in c)c.hasOwnProperty(f)&&
(a[f]=c[f]);d.prototype=c.prototype;a.prototype=new d};g=a("./WebStorage");var f=a("atv-objects");a("js-logger").get("LocalStorage");a=function(a){function c(d){void 0===d&&(d=window);d=f.isNullOrUndefined(d.localStorage)?null:d.localStorage;a.call(this,d)}e(c,a);return c}(g);h.exports=a},{"./WebStorage":92,"atv-objects":84,"js-logger":164}],91:[function(a,h,g){var e=this.__extends||function(a,c){function d(){this.constructor=a}for(var f in c)c.hasOwnProperty(f)&&(a[f]=c[f]);d.prototype=c.prototype;
a.prototype=new d};g=a("./WebStorage");var f=a("atv-objects");a("js-logger").get("LocalStorage");a=function(a){function c(d){void 0===d&&(d=window);d=f.isNullOrUndefined(d.sessionStorage)?null:d.sessionStorage;a.call(this,d)}e(c,a);return c}(g);h.exports=a},{"./WebStorage":92,"atv-objects":84,"js-logger":164}],92:[function(a,h,g){var e=a("js-logger").get("WebStorage");a=function(){function a(b){void 0===b&&(b=null);this.storage=b}a.prototype.set=function(a,c){if(null===this.storage)e.warn("Storage is unavailable. Local storage is "+
window.localStorage);else try{this.storage.setItem(a,c)}catch(d){e.warn("Failed to save key "+a+" to storage",d)}};a.prototype.get=function(a){if(null===this.storage)return e.warn("Storage is unavailable. Local storage is "+window.localStorage),null;try{return this.storage.getItem(a)}catch(c){return e.warn("Failed to retrieve key "+a+" from storage",c),null}};a.prototype.remove=function(a){if(null===this.storage)e.warn("Storage is unavailable. Local storage is "+window.localStorage);else try{this.storage.removeItem(a)}catch(c){e.warn("Failed to remove key "+
a+" from storage",c)}};a.prototype.removeAll=function(){if(null===this.storage)e.warn("Storage is unavailable. Local storage is "+window.localStorage);else try{this.storage.clear()}catch(a){e.warn("Failed to clear storage",a)}};return a}();h.exports=a},{"js-logger":164}],93:[function(a,h,g){g=a("./Storage/LocalStorage");var e=a("./Storage/SessionStorage"),f=a("./ResourceAcquirer"),b=a("./HTMLElementUtils"),c=a("./DOMUtils");a=a("./AmazonUrlCreator");h.exports={LocalStorage:g,SessionStorage:e,ResourceAcquirer:f,
HTMLElementUtils:b,DOMUtils:c,AmazonUrlCreator:a}},{"./AmazonUrlCreator":86,"./DOMUtils":87,"./HTMLElementUtils":88,"./ResourceAcquirer":89,"./Storage/LocalStorage":90,"./Storage/SessionStorage":91}],94:[function(a,h,g){a=function(){function a(){}a.newError=function(a,b,c){b=Error(b);b.name=a;"undefined"!==typeof c&&null!==c&&(b.cause=c);return b};a.newIllegalArgumentError=function(f){return a.newError(a.ILLEGAL_ARGUMENT_ERROR_NAME,f)};a.newIllegalStateError=function(f){return a.newError(a.ILLEGAL_STATE_ERROR_NAME,
f)};a.getAllErrorNames=function(a){for(var b=[a.name];a.cause instanceof Error;)a=a.cause,b.push(a.name);return b};a.ILLEGAL_ARGUMENT_ERROR_NAME="IllegalArgumentError";a.ILLEGAL_STATE_ERROR_NAME="IllegalStateError";return a}();h.exports=a},{}],95:[function(a,h,g){var e=a("underscore");a=function(){function a(){}a.hasEndpoint=function(b){return e.contains(a.MARKETPLACE_IDS,b)};a.getEmptyResponseBaseUrl=function(b,c){return a.getBaseUrl(b,c)+"OE"};a.getImageResponseBaseUrl=function(b,c){return a.getBaseUrl(b,
c)+"OP"};a.getBaseUrl=function(b,c){return"https://"+a.ENDPOINTS[b]+"/1/"+c+"/1/"};a.MARKETPLACE_IDS=["A1F83G8C2ARO7P","A1PA6795UKMFR9","A1VC38T7YXB528","ATVPDKIKX0DER"];a.ENDPOINTS={A1F83G8C2ARO7P:"fls-eu.amazon.com",A1PA6795UKMFR9:"fls-eu.amazon.com",A1VC38T7YXB528:"fls-fe.amazon.com",ATVPDKIKX0DER:"fls-na.amazon.com"};return a}();h.exports=a},{underscore:173}],96:[function(a,h,g){var e=a("ATVWebHTTPRequest").HttpRequest,f=a("atv-preconditions"),b=a("json-stringify-safe"),c=a("underscore"),d=a("./Endpoints"),
n;(function(a){a[a.DEBUG=0]="DEBUG";a[a.INFO=1]="INFO";a[a.WARN=2]="WARN";a[a.ERROR=3]="ERROR"})(n||(n={}));a=function(){function a(b,c,n,g,h){void 0===g&&(g=0);void 0===h&&(h=e);f.checkNotNullAndNotUndefined(b,"LogPublisher#constructor: marketplaceId cannot be null or undefined");f.checkArgument(d.hasEndpoint(b),"LogPublisher#constructor: marketplaceId is invalid");f.checkNotNullAndNotUndefined(c,"LogPublisher#constructor: customerId cannot be null or undefined");f.checkNotNullAndNotUndefined(n,
"LogPublisher#constructor: sessionId cannot be null or undefined");this.url=d.getEmptyResponseBaseUrl(b,a.CHANNEL);this.customerId=c;this.sessionId=n;this.batchSize=g;this.lines=[];this.httpRequest=h}a.prototype.updateSessionId=function(a){this.flush();this.sessionId=f.checkNotNullAndNotUndefined(a,"LogPublisher#updateSessionId: sessionId cannot be null or undefined")};a.isSupported=function(){return e.isSupported()&&"undefined"!==typeof Array.isArray&&"undefined"!==typeof Array.prototype.map&&"undefined"!==
typeof Date.prototype.toISOString&&"undefined"!==typeof JSON};a.prototype.log=function(a,b){var d=this;f.checkNotNullAndNotUndefined(a,"LogPublisher#log: level cannot be null or undefined");var e=n[a.toUpperCase()];f.checkArgument(!c.isUndefined(e),"LogPublisher#log: level must be one of DEBUG, INFO, WARN, ERROR");f.checkNotNullAndNotUndefined(b,"LogPublisher#log: message cannot be null or undefined");f.checkArgument(0<b.length,"LogPublisher#log: message cannot be empty");var l=b.map(function(a){return d.stringify(a)}),
l=this.escapeNewlines(l.join(" ")),l="["+this.customerId+"] ["+this.sessionId+"] ["+this.getTime()+"] ["+n[e]+"] "+l+"\n";this.lines.push(l);(this.lines.length>=this.batchSize||3<=e)&&this.flush()};a.prototype.flush=function(){if(!(1>this.lines.length)){var a=this.lines.join("");this.httpRequest.post(this.url).body(a).send();this.lines=[]}};a.prototype.getTime=function(){return(new Date).toISOString()};a.prototype.stringify=function(a){var d=this;if("function"===typeof a)return"[function]";if("object"!==
typeof a)return""+a;if(a instanceof Error){for(var c=a.toString();a.cause instanceof Error;)a=a.cause,c+=" caused by: "+a.toString();return c}return this.hasOverriddenToString(a)?a.toString():b(a,function(a,b){return d.hasOverriddenToString(b)?b.toString():b})};a.prototype.hasOverriddenToString=function(b){return"object"===typeof b&&null!==b&&!Array.isArray(b)&&b.toString()!==a.DEFAULT_OBJECT_STRING};a.prototype.escapeNewlines=function(a){return a.replace(/\r?\n/g,"\\n")};a.CHANNEL="aiv-web-player";
a.DEFAULT_OBJECT_STRING={}.toString();return a}();h.exports=a},{"./Endpoints":95,ATVWebHTTPRequest:104,"atv-preconditions":85,"json-stringify-safe":162,underscore:173}],97:[function(a,h,g){var e=a("ATVWebHTTPRequest").HttpRequest,f=a("atv-objects"),b=a("atv-preconditions"),c=a("./Endpoints");a=function(){function a(f,l,p,q){void 0===q&&(q=e);b.checkNotNullAndNotUndefined(f,"MetricsPublisher#constructor: marketplaceId cannot be null or undefined");b.checkArgument(c.hasEndpoint(f),"MetricsPublisher#constructor: marketplaceId is invalid");
b.checkNotNullAndNotUndefined(l,"MetricsPublisher#constructor: sessionId cannot be null or undefined");b.checkNotNullAndNotUndefined(p,"MetricsPublisher#constructor: client cannot be null or undefined");this.marketplaceId=f;this.sessionId=l;this.client=p;q.isSupported()?(this.baseUrl=c.getEmptyResponseBaseUrl(f,a.CHANNEL)+"/aiv-web-player/action/",this.handler=this.putMetricXhr):(this.baseUrl=c.getImageResponseBaseUrl(f,a.CHANNEL)+"/aiv-web-player/action/",this.handler=this.putMetricImg);this.httpRequest=
q}a.prototype.updateSessionId=function(a){this.sessionId=b.checkNotNullAndNotUndefined(a,"MetricsPublisher#updateSessionId: sessionId cannot be null or undefined")};a.prototype.putMetric=function(a,d,c,e){void 0===c&&(c=1);b.checkNotNullAndNotUndefined(a,"MetricsPublisher#putMetric: feature cannot be null or undefined");b.checkNotNullAndNotUndefined(d,"MetricsPublisher#putMetric: resource cannot be null or undefined");a=this.baseUrl+a+":"+d+"@v="+c;f.isNullOrUndefined(e)||(a=a+":u="+e);this.handler(a,
!0);this.handler(a,!1)};a.prototype.putMetricImg=function(b,c){var f="?marketplace="+a.MARKETPLACES[this.marketplaceId]+"&marketplaceId="+this.marketplaceId+"&requestId=1&service="+a.SERVICE_NAME+"&session="+this.sessionId;c&&(f+="&client="+this.client);(new Image).src=b+f};a.prototype.putMetricXhr=function(b,c){var f={marketplace:a.MARKETPLACES[this.marketplaceId],marketplaceId:this.marketplaceId,requestId:1,service:a.SERVICE_NAME,session:this.sessionId};c&&(f.client=this.client);this.httpRequest.get(b).query(f).send()};
a.CHANNEL="action-impressions";a.SERVICE_NAME="AIVWebPlayer";a.MARKETPLACES={A1F83G8C2ARO7P:"uk",A1PA6795UKMFR9:"de",A1VC38T7YXB528:"jp",ATVPDKIKX0DER:"us"};return a}();h.exports=a},{"./Endpoints":95,ATVWebHTTPRequest:104,"atv-objects":84,"atv-preconditions":85}],98:[function(a,h,g){g=a("./LogPublisher");a=a("./MetricsPublisher");h.exports={LogPublisher:g,MetricsPublisher:a}},{"./LogPublisher":96,"./MetricsPublisher":97}],99:[function(a,h,g){var e;a=e||(e={});a[a.GET=0]="GET";a[a.POST=1]="POST";h.exports=
e},{}],100:[function(a,h,g){var e=a("atv-preconditions"),f=a("underscore"),b=a("atv-objects"),c=a("./HttpMethod"),d=a("./HttpResponse"),n=a("./HttpResponseType"),l=a("./KeyValuePair");a=function(){function a(b,d,c){void 0===c&&(c=window.performance);e.checkNotNullAndNotUndefined(b,"HttpRequest#constructor: method cannot be null or undefined");e.checkNotNullAndNotUndefined(d,"HttpRequest#constructor: url cannot be null or undefined");this.performance=c;this.method=b;this.url=d;this.xhrData=this.queryString=
null;this.xhrFields=[];this.xhrRequestHeaders={};this.xhrResponseType=null;this.xhrTimeout=0;this.xhrWithCredentials=!1;this.delayMs=0;this.delayTimeoutId=null;this.isAborted=this.sent=!1;this.abortXhr=null;this.loadCallbacks=[];this.errorCallbacks=[];this.timeoutCallbacks=[];this.abortCallbacks=[];this.eventListeners=[]}a.isSupported=function(){if("undefined"===typeof JSON||"undefined"===typeof XMLHttpRequest||f.isUndefined(Array.prototype.forEach))return!1;var a=new XMLHttpRequest;return!f.isUndefined(a.abort)&&
!f.isUndefined(a.addEventListener)&&!f.isUndefined(a.getAllResponseHeaders)&&!f.isUndefined(a.open)&&!f.isUndefined(a.readyState)&&!f.isUndefined(a.removeEventListener)&&!f.isUndefined(a.response)&&!f.isUndefined(a.responseText)&&!f.isUndefined(a.responseType)&&!f.isUndefined(a.send)&&!f.isUndefined(a.setRequestHeader)&&!f.isUndefined(a.status)&&!f.isUndefined(a.timeout)&&!f.isUndefined(a.withCredentials)};a.get=function(b){e.checkNotNullAndNotUndefined(b,"HttpRequest#get: url cannot be null or undefined");
return new a(0,b)};a.post=function(b){e.checkNotNullAndNotUndefined(b,"HttpRequest#post: url cannot be null or undefined");return new a(1,b)};a.prototype.header=function(a,b){e.checkNotNullAndNotUndefined(a,"HttpRequest#header: header cannot be null or undefined");e.checkNotNullAndNotUndefined(b,"HttpRequest#header: value cannot be null or undefined");e.checkState(!this.sent,"HttpRequest#header cannot be called after send");this.xhrRequestHeaders[a]=b;return this};a.prototype.headers=function(a){e.checkNotNullAndNotUndefined(a,
"HttpRequest#headers: headers cannot be null or undefined");e.checkState(!this.sent,"HttpRequest#headers cannot be called after send");f.extend(this.xhrRequestHeaders,a);return this};a.prototype.contentType=function(a){e.checkNotNullAndNotUndefined(a,"HttpRequest#contentType: mimeType cannot be null or undefined");e.checkState(!this.sent,"HttpRequest#mimeType cannot be called after send");this.header("Content-Type",a);return this};a.prototype.accept=function(a){e.checkNotNullAndNotUndefined(a,"HttpRequest#accept: mimeType cannot be null or undefined");
e.checkState(!this.sent,"HttpRequest#accept cannot be called after send");this.header("Accept",a);return this};a.prototype.responseType=function(a){e.checkNotNullAndNotUndefined(a,"HttpRequest#responseType: type cannot be null or undefined");e.checkState(!this.sent,"HttpRequest#responseType cannot be called after send");this.xhrResponseType=a;return this};a.prototype.delay=function(a){e.checkNotNullAndNotUndefined(a,"HttpRequest#delay: delayMs cannot be null or undefined");e.checkState(!this.sent,
"HttpRequest#delay cannot be called after send");this.delayMs=a;return this};a.prototype.timeout=function(a){e.checkNotNullAndNotUndefined(a,"HttpRequest#timeout: timeoutMs cannot be null or undefined");e.checkState(!this.sent,"HttpRequest#timeout cannot be called after send");this.xhrTimeout=a;return this};a.prototype.withCredentials=function(){e.checkState(!this.sent,"HttpRequest#withCredentials cannot be called after send");this.xhrWithCredentials=!0;return this};a.prototype.query=function(a){e.checkNotNullAndNotUndefined(a,
"HttpRequest#query: parameters cannot be null or undefined");e.checkState(!this.sent,"HttpRequest#query cannot be called after send");this.queryString=l.toUriEncodedString(f.map(a,function(a,b){return new l(b,a)}));return this};a.prototype.body=function(a){e.checkNotNullAndNotUndefined(a,"HttpRequest#body: data cannot be null or undefined");e.checkState(!this.sent,"HttpRequest#body cannot be called after send");e.checkState(f.isEmpty(this.xhrFields),"HttpRequest#body cannot be used with the field or fields method on the same HttpRequest object");
this.xhrData=a;return this};a.prototype.json=function(a){e.checkNotNullAndNotUndefined(a,"HttpRequest#body: data cannot be null or undefined");e.checkState(!this.sent,"HttpRequest#body cannot be called after send");e.checkState(f.isEmpty(this.xhrFields),"HttpRequest#json cannot be used with the field or fields method on the same HttpRequest object");this.xhrData=JSON.stringify(a);this.contentType("application/json");return this};a.prototype.field=function(a,b){e.checkNotNullAndNotUndefined(a,"HttpRequest#field: name cannot be null or undefined");
e.checkNotNullAndNotUndefined(b,"HttpRequest#field: value cannot be null or undefined");e.checkState(!this.sent,"HttpRequest#field cannot be called after send");e.checkState(null===this.xhrData,"HttpRequest#field cannot be used with the body or json method on the same HttpRequest object");this.xhrFields.push(new l(a,b));this.contentType("application/x-www-form-urlencoded");return this};a.prototype.fields=function(a){var b=this;e.checkNotNullAndNotUndefined(a,"HttpRequest#fields: fields cannot be null or undefined");
e.checkState(!this.sent,"HttpRequest#fields cannot be called after send");e.checkState(null===this.xhrData,"HttpRequest#fields cannot be used with the body or json method on the same HttpRequest object");f.each(a,function(a,d){b.xhrFields.push(new l(d,a))});this.contentType("application/x-www-form-urlencoded");return this};a.prototype.onLoad=function(a){e.checkNotNullAndNotUndefined(a,"HttpRequest#onLoad: callback cannot be null or undefined");e.checkState(!this.sent,"HttpRequest#onLoad cannot be called after send");
this.loadCallbacks=f.union(this.loadCallbacks,[a]);return this};a.prototype.onError=function(a){e.checkNotNullAndNotUndefined(a,"HttpRequest#onError: callback cannot be null or undefined");e.checkState(!this.sent,"HttpRequest#onError cannot be called after send");this.errorCallbacks=f.union(this.errorCallbacks,[a]);return this};a.prototype.onTimeout=function(a){e.checkNotNullAndNotUndefined(a,"HttpRequest#onTimeout: callback cannot be null or undefined");e.checkState(!this.sent,"HttpRequest#onTimeout cannot be called after send");
this.timeoutCallbacks=f.union(this.timeoutCallbacks,[a]);return this};a.prototype.onAbort=function(a){e.checkNotNullAndNotUndefined(a,"HttpRequest#onAbort: callback cannot be null or undefined");e.checkState(!this.sent,"HttpRequest#onAbort cannot be called after send");this.abortCallbacks=f.union(this.abortCallbacks,[a]);return this};a.prototype.abort=function(){this.isAborted=!0;null!==this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null,this.handleAbort(Object.freeze({requestStarted:!1,
responseReceived:!1,loadedBytes:0,totalBytes:0,latencyMs:0,downloadMs:0,totalMs:0})));null!==this.abortXhr&&(this.abortXhr(),this.abortXhr=null)};a.prototype.send=function(){var a=this;0<this.delayMs?this.delayTimeoutId=setTimeout(function(){a.delayTimeoutId=null;a.sendRequest()},this.delayMs):this.sendRequest();return this};a.prototype.sendRequest=function(){this.sent=!0;var a=c[this.method],b=null!==this.queryString?this.url+"?"+this.queryString:this.url,d=new XMLHttpRequest;(0<this.loadCallbacks.length||
0<this.errorCallbacks.length||0<this.timeoutCallbacks.length||0<this.abortCallbacks.length)&&this.addEventListeners(d);d.open(a,b,!0);f.each(this.xhrRequestHeaders,function(a,b){d.setRequestHeader(b,a)});null!==this.xhrResponseType&&(d.responseType=n[this.xhrResponseType].toLowerCase());0<this.xhrTimeout&&(d.timeout=this.xhrTimeout);this.xhrWithCredentials&&(d.withCredentials=!0);this.abortXhr=function(){d.abort()};null!==this.xhrData?(d.send(this.xhrData),this.xhrData=null):f.isEmpty(this.xhrFields)?
d.send():(d.send(l.toWwwFormUrlEncodedString(this.xhrFields)),this.xhrFields.length=0)};a.prototype.addEventListeners=function(b){var c=this,f=null,e=null;this.addEventListener(b,a.LOAD_START_EVENT,function(a){f=c.correctXHREventTimeStamp(a.timeStamp)});var l=function(d){b.readyState===XMLHttpRequest.HEADERS_RECEIVED&&(e=c.correctXHREventTimeStamp(d.timeStamp),b.removeEventListener(a.READY_STATE_CHANGE_EVENT,l))};this.addEventListener(b,a.READY_STATE_CHANGE_EVENT,l);(0<this.loadCallbacks.length||
0<this.errorCallbacks.length)&&this.addEventListener(b,a.LOAD_EVENT,function(a){c.abortXhr=null;c.removeAllListeners(b);c.isAborted?c.handleAbort(c.createAbortEvent(f,e,a)):c.handleLoad(d.createFromXMLHttpRequest(b,f,e,c.correctXHREventTimeStamp(a.timeStamp)))});0<this.errorCallbacks.length&&this.addEventListener(b,a.ERROR_EVENT,function(a){c.abortXhr=null;c.removeAllListeners(b);c.isAborted?c.handleAbort(c.createAbortEvent(f,e,a)):c.handleError()});(0<this.timeoutCallbacks.length||0<this.errorCallbacks.length)&&
this.addEventListener(b,a.TIMEOUT_EVENT,function(a){c.abortXhr=null;c.removeAllListeners(b);c.isAborted?c.handleAbort(c.createAbortEvent(f,e,a)):c.handleTimeout(c.createTimeoutEvent(b.timeout,f,e,a))});0<this.abortCallbacks.length&&this.addEventListener(b,a.ABORT_EVENT,function(a){c.abortXhr=null;c.removeAllListeners(b);c.handleAbort(c.createAbortEvent(f,e,a))})};a.prototype.addEventListener=function(a,b,d){this.eventListeners.push({type:b,listener:d});a.addEventListener(b,d)};a.prototype.removeAllListeners=
function(a){this.eventListeners.forEach(function(b){a.removeEventListener(b.type,b.listener)});this.eventListeners.length=0};a.prototype.handleLoad=function(a){if(200<=a.getStatus()&&400>a.getStatus())this.loadCallbacks.forEach(function(b){b(a)});else{var b=Error("Request to "+this.url+" resulted in HTTP status code "+a.getStatus());this.errorCallbacks.forEach(function(d){d(b,a)})}this.clearCallbacks()};a.prototype.handleError=function(){var a=Error("An unknown network error occurred while attempting a request to "+
this.url+" with query string "+this.queryString);this.errorCallbacks.forEach(function(b){b(a)});this.clearCallbacks()};a.prototype.handleTimeout=function(a){if(0<this.timeoutCallbacks.length)this.timeoutCallbacks.forEach(function(b){b(a)});else{var b=Error("Request to "+this.url+" timed out after "+a.timeoutMs+" ms");this.errorCallbacks.forEach(function(a){a(b)})}this.clearCallbacks()};a.prototype.handleAbort=function(a){this.abortCallbacks.forEach(function(b){b(a)});this.clearCallbacks()};a.prototype.createAbortEvent=
function(a,b,d){return Object.freeze({requestStarted:!0,responseReceived:null!==b,loadedBytes:d.lengthComputable?d.loaded:0,totalBytes:d.lengthComputable?d.total:0,latencyMs:null!==b?b-a:0,downloadMs:null!==b?d.timeStamp-b:0,totalMs:null!==a?d.timeStamp-a:0})};a.prototype.createTimeoutEvent=function(a,b,d,c){return Object.freeze({timeoutMs:a,responseReceived:null!==d,loadedBytes:c.lengthComputable?c.loaded:0,totalBytes:c.lengthComputable?c.total:0,latencyMs:null!==d?d-b:0,downloadMs:null!==d?c.timeStamp-
d:0,totalMs:null!==b?c.timeStamp-b:0})};a.prototype.clearCallbacks=function(){this.loadCallbacks.length=0;this.errorCallbacks.length=0;this.timeoutCallbacks.length=0;this.abortCallbacks.length=0};a.prototype.correctXHREventTimeStamp=function(a){return b.isNullOrUndefined(this.performance)?a:1E3>=a-this.performance.now()?a:this.performance.now()};a.ABORT_EVENT="abort";a.ERROR_EVENT="error";a.LOAD_EVENT="load";a.LOAD_START_EVENT="loadstart";a.READY_STATE_CHANGE_EVENT="readystatechange";a.TIMEOUT_EVENT=
"timeout";return a}();h.exports=a},{"./HttpMethod":99,"./HttpResponse":101,"./HttpResponseType":102,"./KeyValuePair":103,"atv-objects":84,"atv-preconditions":85,underscore:173}],101:[function(a,h,g){var e=a("atv-objects"),f=a("underscore");a=function(){function a(b,d,n,l,g,h,m,r,u){var k=this;this.sizeBytes=0;this.status=b;this.headers={};Object.keys(d).forEach(function(a){k.headers[a.toLowerCase()]=d[a]});this.arrayBuffer=n;this.blob=l;this.text=g;this.document=h;this.latencyMs=m;this.downloadMs=
r;this.totalMs=u;b=parseInt(this.getHeader("Content-Length"));e.isNullOrUndefined(this.arrayBuffer)?f.isNaN(b)||(this.sizeBytes=b):this.sizeBytes=this.arrayBuffer.byteLength}a.createFromXMLHttpRequest=function(c,d,f,e){var g=a.parseHeaders(c.getAllResponseHeaders()),h=f-d;f=e-f;d=e-d;return c.response instanceof ArrayBuffer?new a(c.status,g,c.response,null,null,null,h,f,d):c.response instanceof Blob?new a(c.status,g,null,c.response,null,null,h,f,d):new a(c.status,g,null,null,c.responseText,c.responseXML,
h,f,d)};a.prototype.getStatus=function(){return this.status};a.prototype.getHeader=function(a){a=this.headers[a.toLowerCase()];return f.isUndefined(a)?null:a};a.prototype.getHeaders=function(){return f.clone(this.headers)};a.prototype.getArrayBuffer=function(){return this.arrayBuffer};a.prototype.getBlob=function(){return this.blob};a.prototype.getText=function(){return this.text};a.prototype.getDocument=function(){return this.document};a.prototype.getLatencyMs=function(){return this.latencyMs};a.prototype.getDownloadMs=
function(){return this.downloadMs};a.prototype.getTotalMs=function(){return this.totalMs};a.prototype.getMetrics=function(){return Object.freeze({requestStarted:!0,responseReceived:!0,loadedBytes:this.sizeBytes,totalBytes:this.sizeBytes,latencyMs:this.latencyMs,downloadMs:this.downloadMs,totalMs:this.totalMs})};a.parseHeaders=function(c){var d={};c.split(/\r?\n/).forEach(function(c){(c=a.HEADER_REGEX.exec(c))&&(d[c[1]]=c[2])});return d};a.HEADER_REGEX=/^\s*(.+?)\s*:\s*(.+?)\s*$/;return a}();h.exports=
a},{"atv-objects":84,underscore:173}],102:[function(a,h,g){var e;a=e||(e={});a[a.ArrayBuffer=0]="ArrayBuffer";a[a.Blob=1]="Blob";a[a.Text=2]="Text";a[a.Document=3]="Document";h.exports=e},{}],103:[function(a,h,g){var e=a("atv-preconditions");a=function(){function a(b,c){this.key=e.checkNotNullAndNotUndefined(b,"KeyValuePair#constructor: key cannot be null or undefined");this.value=e.checkNotNullAndNotUndefined(c,"KeyValuePair#constructor: value cannot be null or undefined")}a.toUriEncodedString=function(a){return a.map(function(a){return a.toUriEncodedString()}).join("&")};
a.toWwwFormUrlEncodedString=function(a){return a.map(function(a){return a.toWwwFormUrlEncodedString()}).join("&")};a.prototype.toUriEncodedString=function(){return encodeURIComponent(this.key)+"="+encodeURIComponent(this.value)};a.prototype.toWwwFormUrlEncodedString=function(){return this.encodeWwwFormUrlComponent(this.key)+"="+this.encodeWwwFormUrlComponent(this.value)};a.prototype.encodeWwwFormUrlComponent=function(a){return encodeURIComponent(a).replace(/%20/g,"+")};return a}();h.exports=a},{"atv-preconditions":85}],
104:[function(a,h,g){g=a("./HttpMethod");var e=a("./HttpRequest"),f=a("./HttpResponse");a=a("./HttpResponseType");h.exports={HttpMethod:g,HttpRequest:e,HttpResponse:f,HttpResponseType:a}},{"./HttpMethod":99,"./HttpRequest":100,"./HttpResponse":101,"./HttpResponseType":102}],105:[function(a,h,g){var e=a("atv-preconditions");a=function(){function a(){}a.getIso639_1LanguageCode=function(b){for(var c=0;c<a.LANGUAGE_MAP.length;++c){var d=a.LANGUAGE_MAP[c];if(d["iso639-2t"]===b)return d["iso639-1"]}return null};
a.getIso639_2tLanguageCode=function(b){for(var c=0;c<a.LANGUAGE_MAP.length;++c){var d=a.LANGUAGE_MAP[c];if(d["iso639-1"]===b)return d["iso639-2t"]}return null};a.getLanguageCodeFromLocale=function(a){e.checkNotNullAndNotUndefined(a,"locale must exist");return a.split("-")[0]};a.LANGUAGE_MAP=[{"iso639-1":"ab","iso639-2t":"abk"},{"iso639-1":"aa","iso639-2t":"aar"},{"iso639-1":"af","iso639-2t":"afr"},{"iso639-1":"ak","iso639-2t":"aka"},{"iso639-1":"sq","iso639-2t":"sqi"},{"iso639-1":"am","iso639-2t":"amh"},
{"iso639-1":"ar","iso639-2t":"ara"},{"iso639-1":"an","iso639-2t":"arg"},{"iso639-1":"hy","iso639-2t":"hye"},{"iso639-1":"as","iso639-2t":"asm"},{"iso639-1":"av","iso639-2t":"ava"},{"iso639-1":"ae","iso639-2t":"ave"},{"iso639-1":"ay","iso639-2t":"aym"},{"iso639-1":"az","iso639-2t":"aze"},{"iso639-1":"bm","iso639-2t":"bam"},{"iso639-1":"ba","iso639-2t":"bak"},{"iso639-1":"eu","iso639-2t":"eus"},{"iso639-1":"be","iso639-2t":"bel"},{"iso639-1":"bn","iso639-2t":"ben"},{"iso639-1":"bh","iso639-2t":"bih"},
{"iso639-1":"bi","iso639-2t":"bis"},{"iso639-1":"bs","iso639-2t":"bos"},{"iso639-1":"br","iso639-2t":"bre"},{"iso639-1":"bg","iso639-2t":"bul"},{"iso639-1":"my","iso639-2t":"mya"},{"iso639-1":"ca","iso639-2t":"cat"},{"iso639-1":"ch","iso639-2t":"cha"},{"iso639-1":"ce","iso639-2t":"che"},{"iso639-1":"ny","iso639-2t":"nya"},{"iso639-1":"zh","iso639-2t":"zho"},{"iso639-1":"cv","iso639-2t":"chv"},{"iso639-1":"kw","iso639-2t":"cor"},{"iso639-1":"co","iso639-2t":"cos"},{"iso639-1":"cr","iso639-2t":"cre"},
{"iso639-1":"hr","iso639-2t":"hrv"},{"iso639-1":"cs","iso639-2t":"ces"},{"iso639-1":"da","iso639-2t":"dan"},{"iso639-1":"dv","iso639-2t":"div"},{"iso639-1":"nl","iso639-2t":"nld"},{"iso639-1":"dz","iso639-2t":"dzo"},{"iso639-1":"en","iso639-2t":"eng"},{"iso639-1":"eo","iso639-2t":"epo"},{"iso639-1":"et","iso639-2t":"est"},{"iso639-1":"ee","iso639-2t":"ewe"},{"iso639-1":"fo","iso639-2t":"fao"},{"iso639-1":"fj","iso639-2t":"fij"},{"iso639-1":"fi","iso639-2t":"fin"},{"iso639-1":"fr","iso639-2t":"fra"},
{"iso639-1":"ff","iso639-2t":"ful"},{"iso639-1":"gl","iso639-2t":"glg"},{"iso639-1":"ka","iso639-2t":"kat"},{"iso639-1":"de","iso639-2t":"deu"},{"iso639-1":"el","iso639-2t":"ell"},{"iso639-1":"gn","iso639-2t":"grn"},{"iso639-1":"gu","iso639-2t":"guj"},{"iso639-1":"ht","iso639-2t":"hat"},{"iso639-1":"ha","iso639-2t":"hau"},{"iso639-1":"he","iso639-2t":"heb"},{"iso639-1":"hz","iso639-2t":"her"},{"iso639-1":"hi","iso639-2t":"hin"},{"iso639-1":"ho","iso639-2t":"hmo"},{"iso639-1":"hu","iso639-2t":"hun"},
{"iso639-1":"ia","iso639-2t":"ina"},{"iso639-1":"id","iso639-2t":"ind"},{"iso639-1":"ie","iso639-2t":"ile"},{"iso639-1":"ga","iso639-2t":"gle"},{"iso639-1":"ig","iso639-2t":"ibo"},{"iso639-1":"ik","iso639-2t":"ipk"},{"iso639-1":"io","iso639-2t":"ido"},{"iso639-1":"is","iso639-2t":"isl"},{"iso639-1":"it","iso639-2t":"ita"},{"iso639-1":"iu","iso639-2t":"iku"},{"iso639-1":"ja","iso639-2t":"jpn"},{"iso639-1":"jv","iso639-2t":"jav"},{"iso639-1":"kl","iso639-2t":"kal"},{"iso639-1":"kn","iso639-2t":"kan"},
{"iso639-1":"kr","iso639-2t":"kau"},{"iso639-1":"ks","iso639-2t":"kas"},{"iso639-1":"kk","iso639-2t":"kaz"},{"iso639-1":"km","iso639-2t":"khm"},{"iso639-1":"ki","iso639-2t":"kik"},{"iso639-1":"rw","iso639-2t":"kin"},{"iso639-1":"ky","iso639-2t":"kir"},{"iso639-1":"kv","iso639-2t":"kom"},{"iso639-1":"kg","iso639-2t":"kon"},{"iso639-1":"ko","iso639-2t":"kor"},{"iso639-1":"ku","iso639-2t":"kur"},{"iso639-1":"kj","iso639-2t":"kua"},{"iso639-1":"la","iso639-2t":"lat"},{"iso639-1":"lb","iso639-2t":"ltz"},
{"iso639-1":"lg","iso639-2t":"lug"},{"iso639-1":"li","iso639-2t":"lim"},{"iso639-1":"ln","iso639-2t":"lin"},{"iso639-1":"lo","iso639-2t":"lao"},{"iso639-1":"lt","iso639-2t":"lit"},{"iso639-1":"lu","iso639-2t":"lub"},{"iso639-1":"lv","iso639-2t":"lav"},{"iso639-1":"gv","iso639-2t":"glv"},{"iso639-1":"mk","iso639-2t":"mkd"},{"iso639-1":"mg","iso639-2t":"mlg"},{"iso639-1":"ms","iso639-2t":"msa"},{"iso639-1":"ml","iso639-2t":"mal"},{"iso639-1":"mt","iso639-2t":"mlt"},{"iso639-1":"mi","iso639-2t":"mri"},
{"iso639-1":"mr","iso639-2t":"mar"},{"iso639-1":"mh","iso639-2t":"mah"},{"iso639-1":"mn","iso639-2t":"mon"},{"iso639-1":"na","iso639-2t":"nau"},{"iso639-1":"nv","iso639-2t":"nav"},{"iso639-1":"nd","iso639-2t":"nde"},{"iso639-1":"ne","iso639-2t":"nep"},{"iso639-1":"ng","iso639-2t":"ndo"},{"iso639-1":"nb","iso639-2t":"nob"},{"iso639-1":"nn","iso639-2t":"nno"},{"iso639-1":"no","iso639-2t":"nor"},{"iso639-1":"ii","iso639-2t":"iii"},{"iso639-1":"nr","iso639-2t":"nbl"},{"iso639-1":"oc","iso639-2t":"oci"},
{"iso639-1":"oj","iso639-2t":"oji"},{"iso639-1":"cu","iso639-2t":"chu"},{"iso639-1":"om","iso639-2t":"orm"},{"iso639-1":"or","iso639-2t":"ori"},{"iso639-1":"os","iso639-2t":"oss"},{"iso639-1":"pa","iso639-2t":"pan"},{"iso639-1":"pi","iso639-2t":"pli"},{"iso639-1":"fa","iso639-2t":"fas"},{"iso639-1":"pl","iso639-2t":"pol"},{"iso639-1":"ps","iso639-2t":"pus"},{"iso639-1":"pt","iso639-2t":"por"},{"iso639-1":"qu","iso639-2t":"que"},{"iso639-1":"rm","iso639-2t":"roh"},{"iso639-1":"rn","iso639-2t":"run"},
{"iso639-1":"ro","iso639-2t":"ron"},{"iso639-1":"ru","iso639-2t":"rus"},{"iso639-1":"sa","iso639-2t":"san"},{"iso639-1":"sc","iso639-2t":"srd"},{"iso639-1":"sd","iso639-2t":"snd"},{"iso639-1":"se","iso639-2t":"sme"},{"iso639-1":"sm","iso639-2t":"smo"},{"iso639-1":"sg","iso639-2t":"sag"},{"iso639-1":"sr","iso639-2t":"srp"},{"iso639-1":"gd","iso639-2t":"gla"},{"iso639-1":"sn","iso639-2t":"sna"},{"iso639-1":"si","iso639-2t":"sin"},{"iso639-1":"sk","iso639-2t":"slk"},{"iso639-1":"sl","iso639-2t":"slv"},
{"iso639-1":"so","iso639-2t":"som"},{"iso639-1":"st","iso639-2t":"sot"},{"iso639-1":"es","iso639-2t":"spa"},{"iso639-1":"su","iso639-2t":"sun"},{"iso639-1":"sw","iso639-2t":"swa"},{"iso639-1":"ss","iso639-2t":"ssw"},{"iso639-1":"sv","iso639-2t":"swe"},{"iso639-1":"ta","iso639-2t":"tam"},{"iso639-1":"te","iso639-2t":"tel"},{"iso639-1":"tg","iso639-2t":"tgk"},{"iso639-1":"th","iso639-2t":"tha"},{"iso639-1":"ti","iso639-2t":"tir"},{"iso639-1":"bo","iso639-2t":"bod"},{"iso639-1":"tk","iso639-2t":"tuk"},
{"iso639-1":"tl","iso639-2t":"tgl"},{"iso639-1":"tn","iso639-2t":"tsn"},{"iso639-1":"to","iso639-2t":"ton"},{"iso639-1":"tr","iso639-2t":"tur"},{"iso639-1":"ts","iso639-2t":"tso"},{"iso639-1":"tt","iso639-2t":"tat"},{"iso639-1":"tw","iso639-2t":"twi"},{"iso639-1":"ty","iso639-2t":"tah"},{"iso639-1":"ug","iso639-2t":"uig"},{"iso639-1":"uk","iso639-2t":"ukr"},{"iso639-1":"ur","iso639-2t":"urd"},{"iso639-1":"uz","iso639-2t":"uzb"},{"iso639-1":"ve","iso639-2t":"ven"},{"iso639-1":"vi","iso639-2t":"vie"},
{"iso639-1":"vo","iso639-2t":"vol"},{"iso639-1":"wa","iso639-2t":"wln"},{"iso639-1":"cy","iso639-2t":"cym"},{"iso639-1":"wo","iso639-2t":"wol"},{"iso639-1":"fy","iso639-2t":"fry"},{"iso639-1":"xh","iso639-2t":"xho"},{"iso639-1":"yi","iso639-2t":"yid"},{"iso639-1":"yo","iso639-2t":"yor"},{"iso639-1":"za","iso639-2t":"zha"},{"iso639-1":"zu","iso639-2t":"zul"}];return a}();h.exports=a},{"atv-preconditions":85}],106:[function(a,h,g){var e=a("atv-objects"),f=a("atv-constants").MarketplaceID,b=a("atv-preconditions"),
c=a("./LanguageCodes");a=function(){function a(){}a.getStandardizedLocale=function(b){if(e.isNullOrUndefined(b))return null;b=a[b.replace("-","_").toUpperCase()];return e.isNullOrUndefined(b)?null:b};a.getLocaleFromMarketplaceId=function(a){b.checkNotNullAndNotUndefined(a,"marketplaceId must exist");a=this.MARKETPLACE_LOCALE_MAP[a];return"undefined"===typeof a?null:a};a.getClosestLocale=function(a,d){b.checkNotNullAndNotUndefined(a,"requestedLocale must exist");b.checkNotNullAndNotUndefined(d,"availableLocales must exist");
b.checkArgument(0<d.length,"availableLocales must not be empty");for(var f=c.getLanguageCodeFromLocale(a),e=null,g=0;g<d.length;++g){var h=d[g],u=c.getLanguageCodeFromLocale(h);if(a===h)return h;null===e&&(e=f===u?h:null)}return e};a.EN_US="en-US";a.EN_GB="en-GB";a.DE_DE="de-DE";a.JA_JP="ja-JP";a.MARKETPLACE_LOCALE_MAP=function(){var b={};b[f.US]=a.EN_US;b[f.UK]=a.EN_GB;b[f.DE]=a.DE_DE;b[f.JP]=a.JA_JP;return b}();return a}();h.exports=a},{"./LanguageCodes":105,"atv-constants":66,"atv-objects":84,
"atv-preconditions":85}],107:[function(a,h,g){var e=a("atv-objects"),f=a("atv-preconditions"),b=a("mustache"),c=a("./Locales");g=a("js-logger");var d=a("underscore"),n=g.get("Localization");a=function(){function a(b,d,e){this.marketplaceID=this.localizedStrings=this.currentLocale=null;this.localizedStrings=f.checkNotNullAndNotUndefined(d,"Parameter 'localizedStrings cannot be null or undefined.");this.marketplaceID=f.checkNotNullAndNotUndefined(e,"Parameter marketplaceId cannot be null or undefined.");
b=c.getStandardizedLocale(b);this.currentLocale=null!==b?this.isLocaleInLocalizedStrings(b)?b:this.getFallbackLocale():this.getFallbackLocale()}a.prototype.isLocaleInLocalizedStrings=function(a){return!e.isNullOrUndefined(this.localizedStrings[a])};a.prototype.getLocalizedObject=function(a){a=this.localizedStrings[this.currentLocale][a];return"undefined"!==typeof a?a:null};a.prototype.getLocalizedString=function(b,c){var f=this.localizedStrings[this.currentLocale][b];e.isUndefined(f)?(f=a.KEY_NOT_FOUND,
c={key:b},n.error("No localized value found for key: "+b)):d.isString(f)||(n.error("Expected localized value for key: "+b+" to be a string but was "+f),f="");return this.renderLocalizedString(f,c)};a.prototype.renderLocalizedString=function(a,d){return e.isNullOrUndefined(a)?null:b.render(a,d)};a.prototype.getCurrentLocale=function(){return this.currentLocale};a.prototype.getFallbackLocale=function(){return c.EN_US};a.prototype.getMarketplaceID=function(){return this.marketplaceID};a.KEY_NOT_FOUND=
"Unable to find a localized string for the given key: {{ key }}";return a}();h.exports=a},{"./Locales":106,"atv-objects":84,"atv-preconditions":85,"js-logger":164,mustache:166,underscore:173}],108:[function(a,h,g){g=a("./Modules/Localization/LanguageCodes");var e=a("./Modules/Localization/Localization");a=a("./Modules/Localization/Locales");h.exports={LanguageCodes:g,Localization:e,Locales:a}},{"./Modules/Localization/LanguageCodes":105,"./Modules/Localization/Locales":106,"./Modules/Localization/Localization":107}],
109:[function(a,h,g){var e=a("atv-preconditions");g=a("js-logger");var f=a("./Timer"),b=g.get("Metrics");a=function(){function a(){}a.setHandler=function(b){a.handler=e.checkNotNullAndNotUndefined(b,"Metrics#setHandler: handler cannot be null or undefined")};a.putMetric=function(d,f,l){e.checkNotNullAndNotUndefined(d,"Metrics#putMetric: name cannot be null or undefined");try{a.handler(d,f,l)}catch(g){b.error("An error occurred while publishing metric "+d+": "+g.name+": "+g.message,g)}};a.startTimer=
function(b){return new f(a,b)};a.MILLISECONDS="ms";a.handler=function(){};return a}();h.exports=a},{"./Timer":110,"atv-preconditions":85,"js-logger":164}],110:[function(a,h,g){var e=a("atv-preconditions"),f=a("js-logger").get("Timer");a=function(){function a(c,d){this.metrics=e.checkNotNullAndNotUndefined(c,"Timer#constructor: metrics cannot be null or undefined");this.metricName=e.checkNotNullAndNotUndefined(d,"Timer#constructor: metricName cannot be null or undefined");this.startTime=a.now();this.elapsedTime=
null}a.prototype.end=function(){if(null===this.elapsedTime){this.elapsedTime=a.now()-this.startTime;try{this.metrics.putMetric(this.metricName,this.elapsedTime,a.UNIT)}catch(c){f.error("An error occurred while stopping the timer for metric "+this.metricName+": "+c.name+": "+c.message,c)}f.info(""+this.metricName+" was "+this.elapsedTime+" "+a.UNIT)}return this.elapsedTime};a.UNIT="ms";a.now="undefined"!==typeof Date.now?Date.now:function(){return(new Date).getTime()};return a}();h.exports=a},{"atv-preconditions":85,
"js-logger":164}],111:[function(a,h,g){var e=a("atv-objects"),f=a("atv-preconditions"),b=a("underscore");a=function(){function a(){this.initialized=!1}a.prototype.initialize=function(a,b,c){void 0===c&&(c=1);f.checkState(!this.initialized,"NotificationManager is already initialized.");this.onShowNotification=f.checkNotNullAndNotUndefined(a,"NotificationManager requires an onShowNotification callback.");this.onCloseNotification=f.checkNotNullAndNotUndefined(b,"NotificationManager requires an onCloseNotification callback.");
this.currentNotifications=[];this.maxNotificationsAtOnce=c;this.queuedNotifications=[];this.initialized=!0};a.prototype.addNotification=function(a){f.checkState(this.initialized,"NotificationManager must be initialized before calling addNotification.");f.checkNotNullAndNotUndefined(a,"NotificationManager#addNotification requires a notification.");this.queuedNotifications.push(a);this.runNotification()};a.prototype.cancelNotification=function(a){var c=this;f.checkState(this.initialized,"NotificationManager must be initialized before calling cancelNotification.");
f.checkNotNullAndNotUndefined(a,"NotificationManager#cancelNotification requires a notification.");b.some(this.currentNotifications,function(b){if(b.notification===a)return c.closeNotification(a),!0})||b.some(this.queuedNotifications,function(b,f){if(b===a)return c.queuedNotifications.splice(f,1),!0})};a.prototype.closeNotification=function(a){b.some(this.currentNotifications,function(b){if(b.notification===a&&!e.isNullOrUndefined(b.timeoutID))return clearTimeout(b.timeoutID),!0});this.runNextNotification(a)};
a.prototype.runNotification=function(){var a=this;if(this.currentNotifications.length!==this.maxNotificationsAtOnce){var b={notification:this.queuedNotifications.shift()};this.currentNotifications.push(b);this.onShowNotification(b.notification);e.isNullOrUndefined(b.notification.getDisplayTimeSeconds())||(b.timeoutID=setTimeout(function(){a.runNextNotification(b.notification)},1E3*b.notification.getDisplayTimeSeconds()))}};a.prototype.runNextNotification=function(a){var c=this;this.onCloseNotification(a);
b.some(this.currentNotifications,function(b,f){if(b.notification===a)return c.currentNotifications.splice(f,1),!0});0<this.queuedNotifications.length&&this.runNotification()};return a}();h.exports=a},{"atv-objects":84,"atv-preconditions":85,underscore:173}],112:[function(a,h,g){a={NotificationManager:a("./NotificationManager")};h.exports=a},{"./NotificationManager":111}],113:[function(a,h,g){var e;a=e||(e={});a[a.CacheMiss=0]="CacheMiss";a[a.CachePartialHit=1]="CachePartialHit";a[a.CacheHit=2]="CacheHit";
h.exports=e},{}],114:[function(a,h,g){var e;a=e||(e={});a[a.Crash=1]="Crash";a[a.Fatal=2]="Fatal";a[a.NonFatal=3]="NonFatal";a[a.Retriable=4]="Retriable";a[a.NoImpact=5]="NoImpact";h.exports=e},{}],115:[function(a,h,g){var e=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},f=a("atv-objects"),b=a("atv-preconditions");g=a("./WebPlayerEvent");var c=a("../ErrorSeverity");
a=function(a){function g(e,h,n,m){void 0===n&&(n=c.Fatal);b.checkNotNullAndNotUndefined(e,"AbortEvent#constructor requires a non-null error name");b.checkNotNullAndNotUndefined(h,"AbortEvent#constructor requires a non-null error or error message");a.call(this);this.errorName=e;this.errorSeverity=n;this.template=f.isUndefined(m)?null:m;h instanceof Error?(this.errorMessage=h.message,this.error=h):(this.errorMessage=h,this.error=null)}e(g,a);g.prototype.getErrorName=function(){return this.errorName};
g.prototype.getErrorMessage=function(){return this.errorMessage};g.prototype.getErrorSeverity=function(){return this.errorSeverity};g.prototype.getTemplate=function(){return this.template};g.prototype.getError=function(){return this.error};g.toString=function(){return"abort"};return g}(g);h.exports=a},{"../ErrorSeverity":114,"./WebPlayerEvent":133,"atv-objects":84,"atv-preconditions":85}],116:[function(a,h,g){a=function(){function a(){}a.toString=function(){return"aborted"};return a}();h.exports=
a},{}],117:[function(a,h,g){var e=this&&this.__extends||function(a,c){function d(){this.constructor=a}for(var f in c)c.hasOwnProperty(f)&&(a[f]=c[f]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)},f=a("atv-preconditions");a=function(a){function c(d){a.call(this);f.checkNotNullAndNotUndefined(d,"The AsinChangedEvent requires an ASIN");this.asin=d}e(c,a);c.toString=function(){return"asinChanged"};return c}(a("./WebPlayerEvent"));h.exports=a},{"./WebPlayerEvent":133,"atv-preconditions":85}],
118:[function(a,h,g){var e=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};a=function(a){function b(){a.apply(this,arguments)}e(b,a);b.toString=function(){return"close"};return b}(a("./WebPlayerEvent"));h.exports=a},{"./WebPlayerEvent":133}],119:[function(a,h,g){var e=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&
(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};a=function(a){function b(){a.apply(this,arguments)}e(b,a);b.toString=function(){return"contentEnd"};return b}(a("./WebPlayerEvent"));h.exports=a},{"./WebPlayerEvent":133}],120:[function(a,h,g){var e=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};a=function(a){function b(){a.apply(this,
arguments)}e(b,a);b.toString=function(){return"firstFrame"};return b}(a("./WebPlayerEvent"));h.exports=a},{"./WebPlayerEvent":133}],121:[function(a,h,g){var e=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};a=function(a){function b(){a.apply(this,arguments)}e(b,a);b.toString=function(){return"initialized"};return b}(a("./WebPlayerEvent"));h.exports=a},{"./WebPlayerEvent":133}],
122:[function(a,h,g){var e=this&&this.__extends||function(a,c){function d(){this.constructor=a}for(var f in c)c.hasOwnProperty(f)&&(a[f]=c[f]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)},f=a("atv-preconditions");a=function(a){function c(d){a.call(this);f.checkNotNullAndNotUndefined(d,"The NotificationCancelEvent requires a NotificationEvent.");this.notification=d}e(c,a);c.prototype.getNotification=function(){return this.notification};c.toString=function(){return"notificationCancel"};
return c}(a("./../WebPlayerEvent"));h.exports=a},{"./../WebPlayerEvent":133,"atv-preconditions":85}],123:[function(a,h,g){var e=this&&this.__extends||function(a,c){function d(){this.constructor=a}for(var f in c)c.hasOwnProperty(f)&&(a[f]=c[f]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)},f=a("atv-preconditions");a=function(a){function c(d,c,e,g,h){void 0===e&&(e=!1);void 0===g&&(g=5);a.call(this);f.checkNotNullAndNotUndefined(d,"NotificationEvent requires a LocalizedTemplate.");
this.messageTemplate=d;this.expandedMessageTemplate=c;this.closable=e;this.displayTimeSeconds=g;this.onDontShowAgain=h}e(c,a);c.prototype.getMessageTemplate=function(){return this.messageTemplate};c.prototype.getExpandedMessageTemplate=function(){return this.expandedMessageTemplate};c.prototype.getClosable=function(){return this.closable};c.prototype.getDisplayTimeSeconds=function(){return this.displayTimeSeconds};c.prototype.getOnDontShowAgain=function(){return this.onDontShowAgain};c.toString=function(){return"notification"};
return c}(a("./../WebPlayerEvent"));h.exports=a},{"./../WebPlayerEvent":133,"atv-preconditions":85}],124:[function(a,h,g){var e=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};a=function(a){function b(){a.apply(this,arguments)}e(b,a);b.toString=function(){return"pinAccepted"};return b}(a("./WebPlayerEvent"));h.exports=a},{"./WebPlayerEvent":133}],125:[function(a,
h,g){var e=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};a=function(a){function b(){a.apply(this,arguments)}e(b,a);b.toString=function(){return"pinDeclined"};return b}(a("./WebPlayerEvent"));h.exports=a},{"./WebPlayerEvent":133}],126:[function(a,h,g){var e=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&
(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};a=function(a){function b(){a.apply(this,arguments)}e(b,a);b.toString=function(){return"pinError"};return b}(a("./WebPlayerEvent"));h.exports=a},{"./WebPlayerEvent":133}],127:[function(a,h,g){var e=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};a=function(a){function b(b,d,e,l){void 0===
d&&(d=!1);void 0===e&&(e=!1);void 0===l&&(l=!1);a.call(this);this.pinLength=b;this.requiresPINSetup=d;this.hidePlayer=l;this.requiresAgeVerification=e}e(b,a);b.prototype.getHidePlayer=function(){return this.hidePlayer};b.prototype.getPINLength=function(){return this.pinLength};b.prototype.getRequiresAgeVerification=function(){return this.requiresAgeVerification};b.prototype.getRequiresPINSetup=function(){return this.requiresPINSetup};b.toString=function(){return"pinRequired"};return b}(a("./WebPlayerEvent"));
h.exports=a},{"./WebPlayerEvent":133}],128:[function(a,h,g){var e=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};a=function(a){function b(){a.apply(this,arguments)}e(b,a);b.toString=function(){return"paused"};return b}(a("./WebPlayerEvent"));h.exports=a},{"./WebPlayerEvent":133}],129:[function(a,h,g){var e=this&&this.__extends||function(a,c){function d(){this.constructor=
a}for(var e in c)c.hasOwnProperty(e)&&(a[e]=c[e]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)},f=a("atv-preconditions");a=function(a){function c(d){a.call(this);f.checkNotNullAndNotUndefined(d,"The PlayerCapabilities requires playerCapabilities");this.capabilities=d}e(c,a);c.toString=function(){return"playerCapabilities"};return c}(a("./WebPlayerEvent"));h.exports=a},{"./WebPlayerEvent":133,"atv-preconditions":85}],130:[function(a,h,g){var e=this&&this.__extends||function(a,
b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};a=function(a){function b(){a.apply(this,arguments)}e(b,a);b.toString=function(){return"playing"};return b}(a("./WebPlayerEvent"));h.exports=a},{"./WebPlayerEvent":133}],131:[function(a,h,g){var e=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):
(c.prototype=b.prototype,new c)};a=function(a){function b(){a.apply(this,arguments)}e(b,a);b.toString=function(){return"prepared"};return b}(a("./WebPlayerEvent"));h.exports=a},{"./WebPlayerEvent":133}],132:[function(a,h,g){var e=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};a=function(a){function b(){a.apply(this,arguments)}e(b,a);b.toString=function(){return"stopping"};
return b}(a("./WebPlayerEvent"));h.exports=a},{"./WebPlayerEvent":133}],133:[function(a,h,g){a=function(){return function(){}}();h.exports=a},{}],134:[function(a,h,g){var e;a=e||(e={});a[a.Feature=0]="Feature";a[a.Trailer=1]="Trailer";a[a.Live=2]="Live";a[a.External=3]="External";h.exports=e},{}],135:[function(a,h,g){g=a("./Modules/Events/AbortEvent");var e=a("./Modules/Events/AbortedEvent"),f=a("./Modules/Events/AsinChangedEvent"),b=a("./Modules/CacheType"),c=a("./Modules/Events/CloseEvent"),d=a("./Modules/Events/EndOfContentEvent"),
n=a("./Modules/ErrorSeverity"),l=a("./Modules/Events/FirstFrameEvent"),p=a("./Modules/Events/InitializedEvent"),q=a("./Modules/Events/Notifications/NotificationCancelEvent"),m=a("./Modules/Events/Notifications/NotificationEvent"),r=a("./Modules/Events/PINAcceptedEvent"),u=a("./Modules/Events/PINDeclinedEvent"),k=a("./Modules/Events/PINErrorEvent"),A=a("./Modules/Events/PINRequiredEvent"),x=a("./Modules/Events/PausedEvent"),E=a("./Modules/Events/PlayerCapabilitiesEvent"),y=a("./Modules/Events/PlayingEvent"),
M=a("./Modules/Events/PreparedEvent"),K=a("./Modules/Events/StoppingEvent"),F=a("./Modules/VideoType");a=a("./Modules/Events/WebPlayerEvent");h.exports={AbortEvent:g,AbortedEvent:e,AsinChangedEvent:f,CacheType:b,CloseEvent:c,EndOfContentEvent:d,ErrorSeverity:n,FirstFrameEvent:l,InitializedEvent:p,NotificationCancelEvent:q,NotificationEvent:m,PINAcceptedEvent:r,PINDeclinedEvent:u,PINErrorEvent:k,PINRequiredEvent:A,PausedEvent:x,PlayerCapabilitiesEvent:E,PlayingEvent:y,PreparedEvent:M,StoppingEvent:K,
VideoType:F,WebPlayerEvent:a}},{"./Modules/CacheType":113,"./Modules/ErrorSeverity":114,"./Modules/Events/AbortEvent":115,"./Modules/Events/AbortedEvent":116,"./Modules/Events/AsinChangedEvent":117,"./Modules/Events/CloseEvent":118,"./Modules/Events/EndOfContentEvent":119,"./Modules/Events/FirstFrameEvent":120,"./Modules/Events/InitializedEvent":121,"./Modules/Events/Notifications/NotificationCancelEvent":122,"./Modules/Events/Notifications/NotificationEvent":123,"./Modules/Events/PINAcceptedEvent":124,
"./Modules/Events/PINDeclinedEvent":125,"./Modules/Events/PINErrorEvent":126,"./Modules/Events/PINRequiredEvent":127,"./Modules/Events/PausedEvent":128,"./Modules/Events/PlayerCapabilitiesEvent":129,"./Modules/Events/PlayingEvent":130,"./Modules/Events/PreparedEvent":131,"./Modules/Events/StoppingEvent":132,"./Modules/Events/WebPlayerEvent":133,"./Modules/VideoType":134}],136:[function(a,h,g){var e=a("atv-objects"),f=a("atv-preconditions"),b=a("qs"),c=a("underscore");a=function(){function a(){}a.getParameter=
function(b,c){f.checkNotNullAndNotUndefined(b,"QueryString#getParameter: name cannot be null or undefined");var e=a.getQueryString(c);return e.hasOwnProperty(b)?e[b]:null};a.getQueryString=function(c){if(e.isNullOrUndefined(c)){if("undefined"===typeof location||"undefined"===typeof location.search)return{};c=location.search}try{var f=b.parse(c.replace(/^\?/,""));return a.parseStrings(f)}catch(g){return{}}};a.parseStrings=function(b){if(c.isString(b))return/^true$/i.test(b)?!0:/^false$/i.test(b)?!1:
/^null$/i.test(b)?null:/^undefined$/i.test(b)?a.UNDEFINED:/^\d+$/.test(b)?parseInt(b,10):b;if(c.isArray(b)||c.isObject(b)){var e=c.isArray(b)?[]:{},f;for(f in b)b.hasOwnProperty(f)&&(e[f]=this.parseStrings(b[f]));return e}return b};a.UNDEFINED=void 0;return a}();h.exports=a},{"atv-objects":84,"atv-preconditions":85,qs:168,underscore:173}],137:[function(a,h,g){a=function(){function a(){}a.prototype.fatalErrorOccurred=function(a){};a.prototype.nonFatalErrorOccurred=function(a){};a.prototype.appLoadStarted=
function(){};a.prototype.appLoadCompleted=function(){return 0};a.prototype.playerInitializationStarted=function(){};a.prototype.playerInitializationCompleted=function(){};a.prototype.contentPreparationStarted=function(a,b){};a.prototype.contentPreparationSucceeded=function(){};a.prototype.contentPreparationFailed=function(){};a.prototype.playbackInitiated=function(a){};a.prototype.playbackStarted=function(a){return 0};a.prototype.pinDialogDisplayed=function(){};a.prototype.pinSubmitted=function(){};
a.prototype.pinAccepted=function(){};a.prototype.pinDeclined=function(){};a.prototype.seekInitiated=function(){};a.prototype.seekCompleted=function(){};a.prototype.nextTitlePlaybackInitiated=function(){};a.prototype.hdToggled=function(a){};a.prototype.cacheMiss=function(){};a.prototype.cachePartialHit=function(){};a.prototype.cacheHit=function(){};a.prototype.manifestDownloadStarted=function(){};a.prototype.manifestDownloaded=function(){};a.prototype.prepareClickstream=function(a,b){};a.prototype.clickstreamNextTitle=
function(){};a.prototype.clickstreamPlaybackStarted=function(){};a.prototype.reportClickstream=function(a){};a.prototype.fullScreenToggled=function(a,b,c){};return a}();h.exports=a},{}],138:[function(a,h,g){g=a("ATVWebClickstream");var e=g.Action,f=g.PageType,b=g.RefMarker,c=g.SubPageType,d=g.HitType,n=a("ATVWebClickstreamClient").ClickstreamEventBuilder,l=a("atv-objects"),p=a("atv-preconditions"),q=a("js-logger").get("MetricsContext");a=function(){function a(b,d,c,e){p.checkNotNullAndNotUndefined(b,
"MetricsContext#constructor: metricsFeature cannot be null or undefined");p.checkNotNullAndNotUndefined(d,"MetricsContext#constructor: metricsPublisher cannot be null or undefined");p.checkNotNullAndNotUndefined(c,"MetricsContext#constructor: createClickstreamClient cannot be null or undefined");this.metricsFeature=b;this.metricsPublisher=d;this.createClickstreamClient=c;this.now=l.isNullOrUndefined(e)?Date.now?Date.now:function(){return(new Date).getTime()}:e;this.pinDialogDisplayedTime=this.manifestDownloadStartTime=
this.nextTitlePlaybackInitiatedTime=this.contentPreparationStartTime=this.appLoadStartTime=this.refMarker=this.asin=this.clickstreamClient=null;this.pinEntryTime=0;this.seekInitiatedTime=this.playerInitializationStartTime=this.playbackInitiatedTime=null}a.prototype.fatalErrorOccurred=function(b){this.nonFatalErrorOccurred(b);this.putMetric(a.FATAL_ERROR_METRIC)};a.prototype.nonFatalErrorOccurred=function(a){p.checkNotNullAndNotUndefined(a,"MetricsContext#nonFatalErrorOccurred: error cannot be null or undefined");
a instanceof Error?this.putMetric(a.name):this.putMetric(a)};a.prototype.appLoadStarted=function(){null!==this.appLoadStartTime?q.error("appLoadStarted called when app load is already in progress"):this.appLoadStartTime=this.now()};a.prototype.appLoadCompleted=function(){if(null===this.appLoadStartTime)q.error("appLoadCompleted called when app load is not in progress");else{var b=this.now()-this.appLoadStartTime;this.putTime(a.APP_LOAD_TIME_METRIC,b);this.appLoadStartTime=null;return b}};a.prototype.playerInitializationStarted=
function(){null!==this.playerInitializationStartTime?q.error("playerInitializationStarted called when player initialization is already in progress"):this.playerInitializationStartTime=this.now()};a.prototype.playerInitializationCompleted=function(){if(null===this.playerInitializationStartTime)q.error("playerInitializationCompleted called when player initialization is not in progress");else{var b=this.now()-this.playerInitializationStartTime;this.putTime(a.INITIALIZE_TIME_METRIC,b);this.playerInitializationStartTime=
null}};a.prototype.contentPreparationStarted=function(a,b){this.asin=p.checkNotNullAndNotUndefined(a,"MetricsContext#contentPreparationStarted: asin cannot be null or undefined");this.isTrailer=p.checkNotNullAndNotUndefined(b,"MetricsContext#contentPreparationStarted: isTrailer cannot be null or undefined");null!==this.contentPreparationStartTime?q.error("contentPreparationStarted called when content preparation is already in progress"):this.contentPreparationStartTime=this.now()};a.prototype.contentPreparationSucceeded=
function(){if(null===this.contentPreparationStartTime)q.error("contentPreparationSucceeded called when content preparation is not in progress");else{var b=this.now()-this.contentPreparationStartTime;this.putTime(a.PREPARE_TIME_METRIC,b);this.contentPreparationStartTime=null}};a.prototype.contentPreparationFailed=function(){null===this.contentPreparationStartTime?q.error("contentPreparationFailed called when content preparation is not in progress"):this.contentPreparationStartTime=null};a.prototype.playbackInitiated=
function(b){p.checkNotNullAndNotUndefined(b,"MetricsContext#playbackInitiated: playbackInitiatedTime cannot be null or undefined");null===this.asin||null===this.isTrailer?q.error("playbackStarted called without first preparing content"):null!==this.playbackInitiatedTime?q.error("playbackInitiated called when playback has already been initiated"):(this.putMetric(a.PLAY_METRIC),this.playbackInitiatedTime=b)};a.prototype.playbackStarted=function(b){void 0===b&&(b=!1);if(null===this.playbackInitiatedTime&&
null===this.nextTitlePlaybackInitiatedTime)q.error("playbackStarted called when neither initial playback or next title playback has been initiated");else if(null!==this.playbackInitiatedTime&&null!==this.nextTitlePlaybackInitiatedTime)q.error("playbackStarted called when both playback and next title playback have been initiated");else return null!==this.playbackInitiatedTime?(b=this.now()-(b?this.pinEntryTime:0)-this.playbackInitiatedTime,this.putTime(a.TTFF_METRIC,b),this.playbackInitiatedTime=null):
(b=this.now()-(b?this.pinEntryTime:0)-this.nextTitlePlaybackInitiatedTime,this.putTime(a.NEXT_TITLE_TTFF_METRIC,b),this.nextTitlePlaybackInitiatedTime=null),this.pinEntryTime=0,b};a.prototype.pinDialogDisplayed=function(){null!==this.pinDialogDisplayedTime?q.error("pinDialogDisplayed called when PIN dialog is already displayed"):(this.pinDialogDisplayedTime=this.now(),this.reportClickstreamPageType(f.Player,c.Pin))};a.prototype.pinSubmitted=function(){null===this.pinDialogDisplayedTime?q.error("pinSubmitted called when PIN dialog is not displayed"):
this.refMarker=b[b.plr_pin_ok]};a.prototype.pinAccepted=function(){null===this.pinDialogDisplayedTime?q.error("pinAccepted called when PIN dialog is not displayed"):(this.pinEntryTime=this.now()-this.pinDialogDisplayedTime,this.putTime(a.PIN_ENTRY_TIME_METRIC,this.pinEntryTime),this.pinDialogDisplayedTime=null)};a.prototype.pinDeclined=function(){null===this.pinDialogDisplayedTime?q.error("pinDeclined called when PIN dialog is not displayed"):this.reportClickstreamPageType(f.Player,c.PinError)};a.prototype.seekInitiated=
function(){this.seekInitiatedTime=this.now()};a.prototype.seekCompleted=function(){if(null===this.seekInitiatedTime)q.error("seekCompleted called when seek is not in progress");else{var b=this.now()-this.seekInitiatedTime;this.putTime(a.SEEK_TIME_METRIC,b);this.seekInitiatedTime=null}};a.prototype.nextTitlePlaybackInitiated=function(a){p.checkNotNullAndNotUndefined(a,"MetricsContext#nextTitlePlaybackInitiated: playbackInitiatedTime cannot be null or undefined");null!==this.nextTitlePlaybackInitiatedTime?
q.error("nextTitlePlaybackInitiated called when next title playback has already been initiated"):this.nextTitlePlaybackInitiatedTime=a};a.prototype.hdToggled=function(a){a=(new n).withPageTypeId(this.asin).withRefMarker(a?b[b.plr_hd_on]:b[b.plr_hd_off]).withPageType(f.Player).withSubPageType(c.Player).build();this.reportClickstream(a)};a.prototype.fullScreenToggled=function(a,c,e){a=(new n).withPageTypeId(this.asin).withRefMarker(a?b[b.plr_b_fscrn_on]:b[b.plr_b_fscrn_off]).withPageType(c).withSubPageType(e).withHitType(d.PageTouch).build();
this.reportClickstream(a)};a.prototype.cacheMiss=function(){this.putMetric(a.CACHE_MISS_METRIC)};a.prototype.cachePartialHit=function(){this.putMetric(a.CACHE_PARTIAL_HIT_METRIC)};a.prototype.cacheHit=function(){this.putMetric(a.CACHE_HIT_METRIC)};a.prototype.manifestDownloadStarted=function(){this.manifestDownloadStartTime=this.now()};a.prototype.manifestDownloaded=function(){if(null===this.manifestDownloadStartTime)q.error("manifestDownloaded called when manifest download has not been started");
else{var b=this.now()-this.manifestDownloadStartTime;this.putTime(a.MANIFEST_DOWNLOAD_TIME_METRIC,b);this.manifestDownloadStartTime=null}};a.prototype.prepareClickstream=function(b,d){l.isNullOrUndefined(b)?(q.error("No clickstreamSessionId was provided; Clickstream events will not be reported"),this.putMetric(a.MISSING_CLICKSTREAM_SESSION_ID_ERROR_METRIC)):l.isNullOrUndefined(d)?(q.error("No clickstreamRefMarker was provided; Clickstream events will not be reported"),this.putMetric(a.MISSING_CLICKSTREAM_REF_MARKER_ERROR_METRIC)):
(this.clickstreamClient=this.createClickstreamClient(b),this.refMarker=d)};a.prototype.clickstreamNextTitle=function(){this.refMarker=b[b.plr_nxt_ep]};a.prototype.clickstreamPlaybackStarted=function(){this.reportClickstreamAction(this.isTrailer?e.PlayTrailer:e.PlayStream,f.Player)};a.prototype.reportClickstream=function(b){var d=this;if(null===this.clickstreamClient)q.error("Attempted to report a Clickstream page with a null Clickstream client reference");else if(null===b)q.error("Attempted to report a Clickstream page type with a null event");
else if(null===b.refMarker)q.error("Attempted to report a Clickstream page type without a ref marker");else if(null===b.pageTypeId)q.error("Attempted to report Clickstream with no pageTypeId");else{q.info("Reporting Clickstream event for Action '"+b.action+"'\n            with page type '"+b.pageType+"' SubPageType '"+b.subPageType+"' and ref marker\n            '"+b.refMarker+"' for pageTypeId '"+b.pageTypeId+"'");try{this.clickstreamClient.report(b,function(b){d.putTime(a.CLICKSTREAM_TIME_METRIC,
b)},function(b,c){q.error("Unable to send Clickstream event: "+b,b);d.putMetric(a.CLICKSTREAM_ERROR_METRIC);l.isNullOrUndefined(c)||d.putTime(a.CLICKSTREAM_TIME_METRIC,c)})}catch(c){q.error("Failed to send ClickStream event: "+c,c)}this.refMarker=null}};a.prototype.putMetric=function(a){try{this.metricsPublisher.putMetric(this.metricsFeature,"."+a)}catch(b){q.error("An error occurred while publishing metric "+a+": "+b.name+": "+b.message,b)}};a.prototype.putTime=function(b,d){q.info(b+" was "+d+" ms");
try{this.metricsPublisher.putMetric(this.metricsFeature,"."+b,d,a.MILLISECONDS)}catch(c){q.error("An error occurred while publishing metric "+b+": "+c.name+": "+c.message,c)}};a.prototype.reportClickstreamAction=function(a,b){var d=(new n).withAction(a).withPageType(b).withRefMarker(this.refMarker).withSubPageType(c.Player).withPageTypeId(this.asin).build();this.reportClickstream(d)};a.prototype.reportClickstreamPageType=function(a,b){if(null!==this.clickstreamClient){var d=(new n).withPageType(a).withSubPageType(b).withRefMarker(this.refMarker).withPageTypeId(this.asin).build();
this.reportClickstream(d)}};a.MILLISECONDS="ms";a.APP_LOAD_TIME_METRIC="AppLoadTime";a.CACHE_HIT_METRIC="CacheHit";a.CACHE_MISS_METRIC="CacheMiss";a.CACHE_PARTIAL_HIT_METRIC="CachePartialHit";a.CLICKSTREAM_ERROR_METRIC="ClickstreamError";a.CLICKSTREAM_TIME_METRIC="ClickstreamTime";a.FATAL_ERROR_METRIC="FatalError";a.INITIALIZE_TIME_METRIC="InitializeTime";a.MANIFEST_DOWNLOAD_TIME_METRIC="ManifestDownloadTime";a.MISSING_CLICKSTREAM_REF_MARKER_ERROR_METRIC="MissingClickstreamRefMarkerError";a.MISSING_CLICKSTREAM_SESSION_ID_ERROR_METRIC=
"MissingClickstreamSessionIdError";a.NEXT_TITLE_TTFF_METRIC="NextTitleTTFF";a.PIN_ENTRY_TIME_METRIC="PinEntryTime";a.PLAY_METRIC="Play";a.PREPARE_TIME_METRIC="PrepareTime";a.SEEK_TIME_METRIC="SeekTime";a.TTFF_METRIC="TTFF";return a}();h.exports=a},{ATVWebClickstream:62,ATVWebClickstreamClient:65,"atv-objects":84,"atv-preconditions":85,"js-logger":164}],139:[function(a,h,g){var e=a("atv-objects");a=function(){function a(){this.capturedLogs=[]}a.prototype.getHandler=function(){var a=this;return function(c,
d){a.capturedLogs.push({messages:c,context:d})}};a.prototype.flushTo=function(a,c){for(var d=0;d<this.capturedLogs.length;d++)(e.isNullOrUndefined(c)||this.capturedLogs[d].context.level.value>=c.value)&&a(this.capturedLogs[d].messages,this.capturedLogs[d].context);this.capturedLogs.length=0};return a}();h.exports=a},{"atv-objects":84}],140:[function(a,h,g){var e=a("js-logger"),f=a("atv-objects"),b=a("atv-preconditions");a=function(){function a(){}a.parseLevel=function(d){b.checkNotNullAndNotUndefined(d,
"Logging#parseLevel: level cannot be null or undefined");d=a.LEVELS[d.toLowerCase()];return f.isUndefined(d)?a.DEFAULT_LOG_LEVEL:d};a.createHandler=function(b,e,l){void 0===e&&(e=!1);f.isNullOrUndefined(l)&&"undefined"!==typeof console&&(l=console);var g=[];e&&"undefined"!==typeof l&&g.push(function(b,d){try{var e=Array.prototype.slice.apply(d,[0]);e.unshift(a.dateTimeToString(new Date));var f=a.getConsoleMethodForLevel(b,l);Function.prototype.apply.call(f,l,e)}catch(g){}});f.isNullOrUndefined(b)||
g.push(function(a,c){try{b.log(a.name,c)}catch(e){}});return 0===g.length?function(a,b){}:function(a,b){if(0!==a.length){var d=Array.prototype.slice.call(a);f.isNullOrUndefined(b.name)||d.unshift("["+b.name+"]");for(var c=0;c<g.length;c++)g[c](b.level,d)}}};a.dateTimeToString=function(a){var b=function(a,b){return(b+a).slice(-b.length)};return b(a.getFullYear(),"0000")+"-"+b(a.getMonth(),"00")+"-"+b(a.getDate(),"00")+" "+b(a.getHours(),"00")+":"+b(a.getMinutes(),"00")+":"+b(a.getSeconds(),"00")+"."+
b(a.getMilliseconds(),"000")};a.getConsoleMethodForLevel=function(a,b){var c=b[a.name.toLowerCase()];return f.isUndefined(c)?b.log:c};a.DEFAULT_LOG_LEVEL=e.INFO;a.LEVELS={debug:e.DEBUG,info:e.INFO,warn:e.WARN,error:e.ERROR};return a}();h.exports=a},{"atv-objects":84,"atv-preconditions":85,"js-logger":164}],141:[function(a,h,g){a=function(){function a(){this.capturedMetrics=[]}a.prototype.getHandler=function(){var a=this;return function(b,c,d){a.capturedMetrics.push({name:b,value:c,unit:d})}};a.prototype.flushTo=
function(a){for(var b=0;b<this.capturedMetrics.length;b++)a(this.capturedMetrics[b].name,this.capturedMetrics[b].value,this.capturedMetrics[b].unit);this.capturedMetrics.length=0};return a}();h.exports=a},{}],142:[function(a,h,g){var e=a("ATVWebClickstreamClient").ClickstreamClient,f=a("ATVWebForesterClient").MetricsPublisher,b=a("ATVWebUserAgent").BrowserType,c=a("atv-constants").DeviceTypeId;g=a("js-logger");var d=a("atv-objects"),n=a("atv-preconditions"),l=a("./DefaultMetricsContext");g.get("MetricsContextFactory");
a=function(){function a(){}a.prototype.createMetricsContext=function(a,b,c,g,h,p,x,E){n.checkNotNullAndNotUndefined(a,"MetricsContextFactory#createMetricsContext: partnerServiceEndpoint cannot be null or undefined");n.checkNotNullAndNotUndefined(c,"MetricsContextFactory#createMetricsContext: deviceId cannot be null or undefined");n.checkNotNullAndNotUndefined(g,"MetricsContextFactory#createMetricsContext: deviceTypeId cannot be null or undefined");n.checkNotNullAndNotUndefined(h,"MetricsContextFactory#createMetricsContext: marketplaceId cannot be null or undefined");
n.checkNotNullAndNotUndefined(x,"MetricsContextFactory#createMetricsContext: userWatchSessionId cannot be null or undefined");n.checkNotNullAndNotUndefined(E,"MetricsContextFactory#createMetricsContext: browser cannot be null or undefined");var y=this.getMetricsFeature(g);if(null===y)throw Error("deviceTypeId is not supported: "+g);E=this.getClient(E);h=new f(h,x,E);return new l(y,h,function(f){return!e.isSupported()||d.isNullOrUndefined(b)||d.isNullOrUndefined(p)?null:new e(a,f,b,c,g,p)})};a.prototype.getMetricsFeature=
function(a){switch(a){case c.SILVERLIGHT_PC:case c.SILVERLIGHT_MAC:return"SilverlightPlayer";case c.HTML5:return"HTML5Player";default:return null}};a.prototype.getClient=function(a){return b[a.getType()]};return a}();h.exports=a},{"./DefaultMetricsContext":138,ATVWebClickstreamClient:65,ATVWebForesterClient:98,ATVWebUserAgent:158,"atv-constants":66,"atv-objects":84,"atv-preconditions":85,"js-logger":164}],143:[function(a,h,g){g=a("ATVWebForesterClient");var e=g.LogPublisher,f=g.MetricsPublisher,b=
a("ATVWebUserAgent").BrowserType,c=a("js-logger"),d=a("ATVWebMetrics"),n=a("atv-objects"),l=a("atv-preconditions"),p=a("./LogCaptor"),q=a("./Logging"),m=a("./MetricsCaptor");c.get("Reporter");a=function(){function a(b){void 0===b&&(b=window);this.areMetricsInitialized=this.isLoggingInitialized=!1;this.flushLogs=this.metricsPublisher=this.logPublisher=this.metricsCaptor=this.logCaptor=null;this._window=b}a.prototype.preInitializeLogging=function(){this.isLoggingInitialized||(this.logCaptor=new p,c.setLevel(c.DEBUG),
c.setHandler(this.logCaptor.getHandler()))};a.prototype.initializeLogging=function(a,b,d,f,g,h){var p=this;void 0===g&&(g=0);void 0===h&&(h=!1);l.checkNotNullAndNotUndefined(a,"Reporting#initializeLogging: marketplaceId cannot be null or undefined");l.checkNotNullAndNotUndefined(b,"Reporting#initializeLogging: customerId cannot be null or undefined");l.checkNotNullAndNotUndefined(d,"Reporting#initializeLogging: sessionId cannot be null or undefined");f=n.isNullOrUndefined(f)?q.DEFAULT_LOG_LEVEL:q.parseLevel(f);
c.setLevel(f);e.isSupported()?(this.logPublisher=new e(a,b,d,g),a=q.createHandler(this.logPublisher,h),c.setHandler(a),this.flushLogs=function(){try{p.logPublisher.flush()}catch(a){}},this.addBeforeUnloadListener(this.flushLogs),null!==this.logCaptor&&(this.logCaptor.flushTo(a,f),this.logCaptor=null),this.isLoggingInitialized=!0):c.setHandler(q.createHandler(null,h))};a.prototype.updateLoggingSessionId=function(a){l.checkNotNullAndNotUndefined(a,"Reporting#updateLoggingSessionId: sessionId cannot be null or undefined");
null!==this.logPublisher&&this.logPublisher.updateSessionId(a)};a.prototype.preInitializeMetrics=function(){this.areMetricsInitialized||(this.metricsCaptor=new m,d.setHandler(this.metricsCaptor.getHandler()))};a.prototype.initializeMetrics=function(a,b,c,e){var g=this;l.checkNotNullAndNotUndefined(a,"Reporting#initializeMetrics: marketplaceId cannot be null or undefined");l.checkNotNullAndNotUndefined(b,"Reporting#initializeMetrics: sessionId cannot be null or undefined");e=this.getClient(e);this.metricsPublisher=
new f(a,b,e);a=function(a,b,d){g.metricsPublisher.putMetric(c,"."+a,b,d)};d.setHandler(a);null!==this.metricsCaptor&&(this.metricsCaptor.flushTo(a),this.metricsCaptor=null);this.areMetricsInitialized=!0};a.prototype.updateMetricsSessionId=function(a){l.checkNotNullAndNotUndefined(a,"Reporting#updateMetricsSessionId: sessionId cannot be null or undefined");null!==this.metricsPublisher&&this.metricsPublisher.updateSessionId(a)};a.prototype.flush=function(){null!==this.flushLogs&&this.flushLogs()};a.prototype.addBeforeUnloadListener=
function(a){"undefined"!==typeof this._window.addEventListener?this._window.addEventListener("beforeunload",a):"undefined"!==typeof this._window.attachEvent&&this._window.attachEvent("onbeforeunload",a)};a.prototype.removeBeforeUnloadListener=function(a){"undefined"!==typeof this._window.addEventListener?this._window.removeEventListener("beforeunload",a):"undefined"!==typeof this._window.attachEvent&&this._window.detachEvent("onbeforeunload",a)};a.prototype.getClient=function(a){return b[a.getType()]};
return a}();h.exports=a},{"./LogCaptor":139,"./Logging":140,"./MetricsCaptor":141,ATVWebForesterClient:98,ATVWebMetrics:109,ATVWebUserAgent:158,"atv-objects":84,"atv-preconditions":85,"js-logger":164}],144:[function(a,h,g){g=a("./BlackHoleMetricsContext");var e=a("./MetricsContextFactory");a=a("./Reporter");h.exports={BlackHoleMetricsContext:g,MetricsContextFactory:e,Reporter:a}},{"./BlackHoleMetricsContext":137,"./MetricsContextFactory":142,"./Reporter":143}],145:[function(a,h,g){var e=a("./ScriptLoader"),
f=a("./SimpleURLAcquirer"),b=a("./SimpleOfflineStorage");a=function(){function a(d,c,l,g,h,m){void 0===d&&(d=12E4);void 0===c&&(c=2);void 0===l&&(l=new e);void 0===g&&(g=new f);void 0===h&&(h=new b);this.SCRIPT_STORAGE_NAME="ScriptStore";this.cachingEnabled=!1;this.xhrTimeoutMs=d;this.xhrRetries=c;this.scriptLoader=l;this.urlAcquirer=g;this.offlineStorage=h;this.createObjectURL="undefined"===typeof m&&"undefined"!==typeof window.URL?URL.createObjectURL:m}a.prototype.initialize=function(a,b){void 0===
b&&(b=!0);this.cachingEnabled=b;this.offlineStorage.initialize(this.SCRIPT_STORAGE_NAME,a)};a.prototype.get=function(a,b,c,e,f,g){var h=this,u=function(){h.scriptLoader.get(c,a,e,f,g)},k=function(a){f(a);u()},A=function(b,c,l){try{var g=new Blob([b],{type:"application/javascript"});h.scriptLoader.get(h.createObjectURL(g),a,function(a){e(c+a,l)},f,k)}catch(n){k(n)}};"undefined"!==typeof window.Blob&&this.urlAcquirer.isSupported()&&this.cachingEnabled?this.offlineStorage.get(a,function(e){e&&e.version===
b?A(e.data,0,!0):h.urlAcquirer.get(c,h.xhrTimeoutMs,h.xhrRetries,function(c,e){h.offlineStorage.set(a,{version:b,data:c});A(c,e,!1)},k)}):u()};return a}();h.exports=a},{"./ScriptLoader":146,"./SimpleOfflineStorage":147,"./SimpleURLAcquirer":148}],146:[function(a,h,g){a=function(){function a(e,b,c){var d=this;void 0===e&&(e=12E4);void 0===b&&(b=2);void 0===c&&(c=document);this.scriptErrorCount=0;this.scriptLoaded=!1;this.onScriptError=function(a,b,c){a&&(a.onload=a.onerror=a.onreadystatechange=null);
clearTimeout(d.scriptTimerId);if(!d.objectExists(d.resultName))if(++d.scriptErrorCount<d.maxAttempts)d.onError(b),d.setScript(c);else d.onFail(b)};this.scriptTimeoutMs=e;this.maxAttempts=b;this.documentInstance=c}a.prototype.get=function(a,b,c,d,e){this.resultName=b;this.onLoad=c;this.onError=d;this.onFail=e;this.scriptErrorCount=0;this.scriptLoaded=!1;clearTimeout(this.scriptTimerId);this.setScript(a)};a.prototype.setScript=function(a){var b=this;this.scriptTimerId=setTimeout(function(){b.onScriptError(d,
Error("Script load timed out. "+b.resultName+" for "+a),a)},this.scriptTimeoutMs);var c=(new Date).getTime(),d=this.documentInstance.createElement("script");d.onload=d.onreadystatechange=function(){if(!b.scriptLoaded&&("undefined"===typeof d.readyState||"loaded"===d.readyState||"complete"===d.readyState))if(b.objectExists(b.resultName))clearTimeout(b.scriptTimerId),b.scriptLoaded=!0,d.onload=d.onerror=d.onreadystatechange=null,b.onLoad((new Date).getTime()-c);else b.onScriptError(d,Error("Script loaded but missing result object. Expected "+
b.resultName+" for "+a),a)};d.onerror=function(){b.onScriptError(d,Error("Script onerror fired: "+b.resultName+" for "+a),a)};d.src=a;this.documentInstance.getElementsByTagName("head")[0].appendChild(d)};a.prototype.objectExists=function(a){return"undefined"!==typeof window[a]};return a}();h.exports=a},{}],147:[function(a,h,g){a=function(){function a(){this.VERSION=1;this.OBJECT_STORE_NAME="SimpleOfflineStorage"}a.prototype.initialize=function(a,b){var c=this;if(this.isSupported())try{var d=window.indexedDB.open(a,
this.VERSION);d.onsuccess=function(a){try{c.database=a.target.result}catch(d){}b()};d.onupgradeneeded=function(a){1>a.oldVersion&&(c.database=a.target.result,c.database.createObjectStore(c.OBJECT_STORE_NAME))};d.onerror=function(a){a.preventDefault();b()}}catch(e){b()}else b()};a.prototype.get=function(a,b){try{if(!this.isSupported()||!this.database)return b(null);var c=this.database.transaction([this.OBJECT_STORE_NAME],"readonly").objectStore(this.OBJECT_STORE_NAME).get(a);c.onsuccess=function(a){try{b(a.target.result)}catch(d){b(null)}};
c.onerror=function(){b(null)}}catch(d){b(null)}};a.prototype.set=function(a,b){try{this.isSupported()&&this.database&&this.database.transaction([this.OBJECT_STORE_NAME],"readwrite").objectStore(this.OBJECT_STORE_NAME).put(b,a)}catch(c){}};a.prototype.isSupported=function(){return"undefined"!==typeof window.indexedDB};return a}();h.exports=a},{}],148:[function(a,h,g){a=function(){function a(e){var b=this;void 0===e&&(e=XMLHttpRequest);this.makeXHRRequest=function(a,d,e,f,g){var h=function(h){0<e?b.makeXHRRequest(a,
d,--e,f,g):g(Error("XHR "+(h?h.type:"unknown error")+" for "+a+". Status: "+(r?r.status:"unknown")+", readyState: "+(r?r.readyState:"unknown")))},m=(new Date).getTime(),r=new b.XHR;r.addEventListener("load",function(){200===r.status?f(r.responseText,(new Date).getTime()-m):h({type:"bad response"})});r.addEventListener("error",h);r.addEventListener("timeout",h);r.open("GET",a);r.timeout=d;r.send()};this.XHR=e}a.prototype.isSupported=function(){return"withCredentials"in new this.XHR};a.prototype.get=
function(a,b,c,d,e){this.makeXHRRequest(a,b,c,d,e)};return a}();h.exports=a},{}],149:[function(a,h,g){a={CachingScriptLoader:a("./Modules/CachingScriptLoader")};h.exports=a},{"./Modules/CachingScriptLoader":145}],150:[function(a,h,g){var e=a("atv-math").CappedGeometricSequence,f=a("atv-objects"),b=a("atv-preconditions"),c=a("underscore");a=function(){function a(b){var d=this;void 0===b&&(b=new e);this.handleRetry=function(a,b){d.currentAttempt++;if(d.canStillRetry()){var c=d.delaySequence.getValue(d.currentAttempt);
0!=c?setTimeout(function(){return d.executeCode()},c):d.executeCode()}else f.isNullOrUndefined(a)&&(a=Error("Reached retries limit, and callable did not specify a more specific error")),d.handleFail(a,b)};this.handleSuccess=function(a){c.forEach(d.successCallbacks,function(b){b(a)})};this.handleFail=function(a,b){c.forEach(d.errorCallbacks,function(d){d(a,b)})};this.maxElapsedTimeMs=this.maxAttempts=-1;this.delaySequence=b;this.started=!1;this.currentAttempt=0;this.successCallbacks=[];this.errorCallbacks=
[]}a.prototype.withMaxAttempts=function(a){b.checkState(!this.started,"ExponentialBackoffRetry#withMaxAttempts cannot be called after execute");b.checkNotNullAndNotUndefined(a,"ExponentialBackoffRetry#withMaxAttempts: maxAttempts cannot be null or undefined");b.checkArgument(1<=a,"ExponentialBackoffRetry#withMaxAttempts: maxAttempts must be >= 1");this.maxAttempts=a;return this};a.prototype.withMaxElapsedTimeMs=function(a){b.checkState(!this.started,"ExponentialBackoffRetry#withMaxElapsedTimeMs cannot be called after execute");
b.checkNotNullAndNotUndefined(a,"ExponentialBackoffRetry#withMaxElapsedTimeMs: maxElapsedTimeMs cannot be null or undefined");b.checkArgument(0<a,"ExponentialBackoffRetry#withMaxElapsedTimeMs: maxElapsedTimeMs must be greater than 0.");this.maxElapsedTimeMs=a;return this};a.prototype.withInitialIntervalMs=function(a){b.checkState(!this.started,"ExponentialBackoffRetry#withInitialIntervalMs cannot be called after execute");b.checkNotNullAndNotUndefined(a,"ExponentialBackoffRetry#withInitialIntervalMs: initialIntervalMs cannot be null or undefined");
b.checkArgument(0<=a,"ExponentialBackoffRetry#withInitialIntervalMs: initialIntervalMs must be positive");this.delaySequence.withInitialValue(a);return this};a.prototype.withExponentialFactor=function(a){b.checkState(!this.started,"ExponentialBackoffRetry#withExponentialFactor cannot be called after execute");b.checkNotNullAndNotUndefined(a,"ExponentialBackoffRetry#withExponentialFactor: exponentialFactor cannot be null or undefined");b.checkArgument(0<a,"ExponentialBackoffRetry#withExponentialFactor: exponentialFactor must be greater than 0.");
this.delaySequence.withExponentialFactor(a);return this};a.prototype.withRandomizationFactor=function(a){b.checkState(!this.started,"ExponentialBackoffRetry#withRandomizationFactor cannot be called after execute");b.checkNotNullAndNotUndefined(a,"ExponentialBackoffRetry#withRandomizationFactor: randomizationFactor cannot be null or undefined");b.checkArgument(0<=a,"ExponentialBackoffRetry#withRandomizationFactor: randomizationFactor must be positive.");this.delaySequence.withRandomizationFactor(a);
return this};a.prototype.withMaxDelayMs=function(a){b.checkState(!this.started,"ExponentialBackoffRetry#withMaxDelayMs cannot be called after execute");b.checkNotNullAndNotUndefined(a,"ExponentialBackoffRetry#withMaxDelayMs: maxDelayMs cannot be null or undefined");b.checkArgument(0<a,"ExponentialBackoffRetry#withMaxDelayMs: maxDelayMs must be greater than 0.");this.delaySequence.withMaxValue(a);return this};a.prototype.onSuccess=function(a){b.checkState(!this.started,"ExponentialBackoffRetry#onSuccess cannot be called after execute");
b.checkNotNullAndNotUndefined(a,"ExponentialBackoffRetry#onSuccess: callback cannot be null or undefined");this.successCallbacks=c.union(this.successCallbacks,[a]);return this};a.prototype.onError=function(a){b.checkState(!this.started,"ExponentialBackoffRetry#onError cannot be called after execute");b.checkNotNullAndNotUndefined(a,"ExponentialBackoffRetry#onError: callback cannot be null or undefined");this.errorCallbacks=c.union(this.errorCallbacks,[a]);return this};a.prototype.onAttempt=function(a){b.checkState(!this.started,
"ExponentialBackoffRetry#onAttempt cannot be called after execute");b.checkNotNullAndNotUndefined(a,"ExponentialBackoffRetry#onAttempt: callable cannot be null or undefined");this.callable=a;return this};a.prototype.execute=function(){b.checkState(!this.started,"ExponentialBackoffRetry#execute cannot be called more than once.");b.checkNotNullAndNotUndefined(this.callable,"ExponentialBackoffRetry#execute cannot be called before #onAttempt.");this.started=!0;this.startTime=(new Date).getTime();this.executeCode()};
a.prototype.executeCode=function(){try{this.callable(this.currentAttempt,this.handleRetry,this.handleSuccess,this.handleFail)}catch(a){this.handleFail(a)}};a.prototype.canStillRetry=function(){return-1!=this.maxAttempts&&this.currentAttempt>=this.maxAttempts||-1!=this.maxElapsedTimeMs&&(new Date).getTime()-this.startTime>=this.maxElapsedTimeMs?!1:!0};return a}();h.exports=a},{"atv-math":77,"atv-objects":84,"atv-preconditions":85,underscore:173}],151:[function(a,h,g){a={ExponentialBackoffRetry:a("./ExponentialBackoffRetry")};
h.exports=a},{"./ExponentialBackoffRetry":150}],152:[function(a,h,g){var e=a("atv-objects"),f=a("atv-preconditions"),b=a("./BrowserType"),c=a("./Version");a=function(){function a(b,d){this.type=f.checkNotNullAndNotUndefined(b,"Browser#constructor: type cannot be null or undefined");this.version=e.isNullOrUndefined(d)?null:d}a.fromUserAgent=function(b){for(var e=0;e<a.REGEXES.length;e++){var f=a.REGEXES[e].regex.exec(b);if(f)return b=f[1]?c.fromString(f[1]):null,new a(a.REGEXES[e].type,b)}return new a(0)};
a.prototype.getType=function(){return this.type};a.prototype.getVersion=function(){return this.version};a.prototype.toString=function(){var a=b[this.type];null!==this.version&&(a+=" "+this.version);return a};a.prototype.equals=function(a){return this.type!==a.type?!1:null===this.version?null===a.version?!0:!1:this.version.equals(a.version)};a.REGEXES=[{regex:/(?:Camino|Chimera|hpwOS|webOS|Play[Ss]tation)\//,type:0},{regex:/Silk\/(\d+[.0-9\-]+)/,type:12},{regex:/(?:BlackBerry|BB10).*Version\/(\d+[.0-9]*)/,
type:2},{regex:/(?:OPR\/|Opera |Opera.*Version\/)(\d+[.0-9]*)/,type:9},{regex:/(?:Edge)\/(\d+[.0-9]*)/,type:5},{regex:/(?:MSIE |Trident.*rv:)(\d+[.0-9]*)/,type:8},{regex:/Chromium\/(\d+[.0-9]*)/,type:4},{regex:/(?:Chrome|CriOS)\/(\d+[.0-9]*)/,type:3},{regex:/SeaMonkey\/(\d+[.0-9]*)/,type:11},{regex:/x64;.*Firefox\/(\d+[.0-9]*)/,type:7},{regex:/Firefox\/(\d+[.0-9]*)/,type:6},{regex:/Android[ \-/](\d+[.0-9a-z\-]*)/,type:1},{regex:/Version\/(\d+[.0-9]*).*Safari/,type:10}];return a}();h.exports=a},{"./BrowserType":153,
"./Version":156,"atv-objects":84,"atv-preconditions":85}],153:[function(a,h,g){var e;a=e||(e={});a[a.Unknown=0]="Unknown";a[a.Android=1]="Android";a[a.BlackBerry=2]="BlackBerry";a[a.Chrome=3]="Chrome";a[a.Chromium=4]="Chromium";a[a.Edge=5]="Edge";a[a.Firefox=6]="Firefox";a[a.Firefox64=7]="Firefox64";a[a.IE=8]="IE";a[a.Opera=9]="Opera";a[a.Safari=10]="Safari";a[a.SeaMonkey=11]="SeaMonkey";a[a.Silk=12]="Silk";h.exports=e},{}],154:[function(a,h,g){var e=a("atv-objects"),f=a("atv-preconditions");a("./OperatingSystemFamily");
var b=a("./Version"),c=a("./WindowsVersion"),d={0:"Unknown",1:"Android",2:"BlackBerry",3:"Chrome OS",4:"Firefox OS",5:"Google TV",6:"iOS",7:"Linux",8:"Mac OS X",9:"Mac OS PPC",10:"Windows",11:"Windows Phone",12:"Windows RT",13:"Xbox One"};a=function(){function a(b,d,c){this.family=f.checkNotNullAndNotUndefined(b,"OperatingSystem#constructor: family cannot be null or undefined");this.version=e.isNullOrUndefined(d)?null:d;this.kernelVersion=e.isNullOrUndefined(c)?this.version:c}a.fromUserAgent=function(b){for(var d=
0;d<a.REGEXES.length;d++){var c=a.REGEXES[d].regex.exec(b);if(c)return a.REGEXES[d].handler(c)}return new a(0)};a.prototype.getFamily=function(){return this.family};a.prototype.getFamilyName=function(){return d[this.family]||null};a.prototype.getVersion=function(){return this.version};a.prototype.getKernelVersion=function(){return this.kernelVersion};a.prototype.toString=function(){var a=d[this.family];null!==this.version&&(a+=" "+this.version);return a};a.prototype.equals=function(a){return this.family!==
a.family?!1:null===this.version?null===a.version?!0:!1:this.version.equals(a.version)};a.MAC_OS_X_YOSEMITE=new a(8,b.fromString("10.10"));a.WINDOWS_2000=new a(10,c.WINDOWS_2000);a.WINDOWS_XP=new a(10,c.WINDOWS_XP);a.WINDOWS_VISTA=new a(10,c.WINDOWS_VISTA);a.WINDOWS_7=new a(10,c.WINDOWS_7);a.WINDOWS_8=new a(10,c.WINDOWS_8);a.WINDOWS_8_1=new a(10,c.WINDOWS_8_1);a.WINDOWS_10=new a(10,c.WINDOWS_10);a.REGEXES=[{regex:/Windows ?Mobile|Xbox(?!.*One)|Play[Ss]tation/,handler:function(){return new a(0)}},{regex:/Windows Phone(?: (?:OS[ /])?(\d+[.0-9]*))?/,
handler:function(d){d=d[1]?b.fromString(d[1]):null;return new a(11,d)}},{regex:/Xbox One(?: (?:OS[ /])?(\d+[.0-9]*))?/,handler:function(d){d=d[1]?b.fromString(d[1]):null;return new a(13,d)}},{regex:/(?:BB10|BlackBerry)(?:.*Version\/(\d+[.0-9]*))?/,handler:function(d){d=d[1]?b.fromString(d[1]):null;return new a(2,d)}},{regex:/GoogleTV(?:[ /]([0-9a-b]+[.0-9]*))?/,handler:function(d){d=d[1]?b.fromString(d[1]):null;return new a(5,d)}},{regex:/Android(?:[ \-/](\d+[.0-9a-z\-]*))?|\bSilk\b/,handler:function(d){d=
d[1]?b.fromString(d[1]):null;return new a(1,d)}},{regex:/CrOS(?: i686 (\d+[.0-9]*))?/,handler:function(d){d=d[1]?b.fromString(d[1]):null;return new a(3,d)}},{regex:/(?:iPad|iPhone|iPod)(?:.*OS (\d+[_.0-9]*))?/,handler:function(d){d=d[1]?b.fromString(d[1].replace(/_/g,".")):null;return new a(6,d)}},{regex:/Intel Mac OS X(?: (\d+[_.0-9]*))?/,handler:function(d){d=d[1]?b.fromString(d[1].replace(/_/g,".")):null;return new a(8,d)}},{regex:/PPC Mac OS(?: X)?(?: (\d+[_.0-9]*))?/,handler:function(d){d=d[1]?
b.fromString(d[1].replace(/_/g,".")):null;return new a(9,d)}},{regex:/Windows NT(?: (5\.[012]|6\.[01234]))?.*ARM/,handler:function(d){var e=d[1];d=e?c.fromKernelVersion(e):null;e=e?b.fromString(e):null;return new a(12,d,e)}},{regex:/Windows NT(?: (5\.[012]|6\.[01234]|10\.[012]))?/,handler:function(d){var e=d[1];d=e?c.fromKernelVersion(e):null;e=e?b.fromString(e):null;return new a(10,d,e)}},{regex:/Linux/,handler:function(){return new a(7)}},{regex:/Mozilla\/5.0 \((?:Mobile|Tablet); (?:[0-9A-Za-z .\-]+; )?rv:\d+[.0-9]*\) Gecko\/\d+[.0-9]* Firefox\/\d+[.0-9]*/,
handler:function(){return new a(4)}}];return a}();h.exports=a},{"./OperatingSystemFamily":155,"./Version":156,"./WindowsVersion":157,"atv-objects":84,"atv-preconditions":85}],155:[function(a,h,g){var e;a=e||(e={});a[a.Unknown=0]="Unknown";a[a.Android=1]="Android";a[a.BlackBerry=2]="BlackBerry";a[a.ChromeOS=3]="ChromeOS";a[a.FirefoxOS=4]="FirefoxOS";a[a.GoogleTV=5]="GoogleTV";a[a.iOS=6]="iOS";a[a.Linux=7]="Linux";a[a.Mac=8]="Mac";a[a.MacPPC=9]="MacPPC";a[a.Windows=10]="Windows";a[a.WindowsPhone=11]=
"WindowsPhone";a[a.WindowsRT=12]="WindowsRT";a[a.XboxOne=13]="XboxOne";h.exports=e},{}],156:[function(a,h,g){var e=a("atv-objects"),f=a("atv-preconditions"),b=a("underscore");a=function(){function a(b,c){f.checkNotNullAndNotUndefined(b,"Version#constructor: segments cannot be null or undefined");f.checkArgument(0<b.length,"Version#constructor: segments cannot be empty");f.checkNotNullAndNotUndefined(c,"Version#constructor: str cannot be null or undefined");this.segments=b;this.str=c}a.fromNumber=
function(b){f.checkNotNullAndNotUndefined(b,"Version#fromNumber: version cannot be null or undefined");return new a([b],b.toString())};a.fromString=function(b){f.checkNotNullAndNotUndefined(b,"Version#fromString: version cannot be null or undefined");return new a(a.split(b),b)};a.prototype.toString=function(){return this.str};a.prototype.equals=function(a){return 0===this.compareTo(a)};a.prototype.compareTo=function(a){if(this===a)return 0;if(e.isNullOrUndefined(a))return 1;for(var b=Math.min(this.segments.length,
a.segments.length),c=0;c<b;c++){if(this.segments[c]<a.segments[c])return-1;if(this.segments[c]>a.segments[c])return 1}return this.isGreaterThanZero(a.segments.slice(this.segments.length))?-1:this.isGreaterThanZero(this.segments.slice(a.segments.length))?1:0};a.prototype.isGreaterThanZero=function(a){for(var c=0;c<a.length;c++)if(b.isString(a[c])&&0<a[c].length||b.isNumber(a[c])&&0<a[c])return!0};a.split=function(a){return b.map(a.toLowerCase().match(/\d+|[a-z]+/g),function(a){return/^\d+$/.test(a)?
parseInt(a):a})};return a}();h.exports=a},{"atv-objects":84,"atv-preconditions":85,underscore:173}],157:[function(a,h,g){var e=this.__extends||function(a,b){function d(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);d.prototype=b.prototype;a.prototype=new d},f=a("atv-preconditions"),b=a("underscore");a=a("./Version");var c;(function(a){a[a.Windows2000=0]="Windows2000";a[a.WindowsXP=1]="WindowsXP";a[a.WindowsVista=2]="WindowsVista";a[a.Windows7=3]="Windows7";a[a.Windows8=4]="Windows8";
a[a.Windows8_1=5]="Windows8_1";a[a.Windows10=6]="Windows10"})(c||(c={}));var d={"5.0":0,"5.1":1,"5.2":1,"6.0":2,"6.1":3,"6.2":4,"6.3":5,"6.4":6,"10.0":6,"10.1":6,"10.2":6},n={0:"2000",1:"XP",2:"Vista",3:"7",4:"8",5:"8.1",6:"10"};c=function(a){function c(b){a.call(this,[b],n[b])}e(c,a);c.fromKernelVersion=function(a){f.checkNotNullAndNotUndefined(a,"WindowsVersion#fromKernelVersion: kernelVersion cannot be null or undefined");f.checkArgument(b.has(d,a),"WindowsVersion#fromKernelVersion: unsupported kernel version: "+
a);return new c(d[a])};c.WINDOWS_2000=new c(0);c.WINDOWS_XP=new c(1);c.WINDOWS_VISTA=new c(2);c.WINDOWS_7=new c(3);c.WINDOWS_8=new c(4);c.WINDOWS_8_1=new c(5);c.WINDOWS_10=new c(6);return c}(a);h.exports=c},{"./Version":156,"atv-preconditions":85,underscore:173}],158:[function(a,h,g){var e=a("./Browser");g=a("./BrowserType");var f=a("./OperatingSystem"),b=a("./OperatingSystemFamily"),c=a("./Version");a=a("./WindowsVersion");h.exports={Browser:e,BrowserType:g,OperatingSystem:f,OperatingSystemFamily:b,
Version:c,WindowsVersion:a,getBrowser:function(a){void 0===a&&(a=navigator.userAgent);return e.fromUserAgent(a)},getOperatingSystem:function(a){void 0===a&&(a=navigator.userAgent);return f.fromUserAgent(a)}}},{"./Browser":152,"./BrowserType":153,"./OperatingSystem":154,"./OperatingSystemFamily":155,"./Version":156,"./WindowsVersion":157}],159:[function(a,h,g){var e=a("atv-preconditions"),f=a("atv-objects");g=a("js-logger");var b=a("ATVWebHTTPRequest").HttpRequest,c=a("./WeblabTreatment"),d=g.get("WeblabClient");
a=function(){function a(d){void 0===d&&(d=b);this.httpRequest=d}a.prototype.initialize=function(b,d,c,f){e.checkNotNullAndNotUndefined(b,"WeblabClient requires a defined and non-null partnerServiceUrl");this.marketplaceId=e.checkNotNullAndNotUndefined(d,"Weblab client requires a defined and non-null marketplaceId");this.deviceId=e.checkNotNullAndNotUndefined(f,"WeblabClient requires a defined and non-null deviceId");this.deviceTypeId=e.checkNotNullAndNotUndefined(c,"WeblabClient requires a defined and non-null deviceTypeId");
this.url=b.replace(/\/$/,"")+a.SERVICE_ENDPOINT;this.initialized=!0};a.prototype.getWeblabs=function(b,c,g){var h=this;e.checkState(this.initialized,"WeblabClient must be initialized before being used");e.checkNotNullAndNotUndefined(b,"WeblabClient requires a defined and non-null list of weblab names");e.checkNotNullAndNotUndefined(c,"WeblabClient requires a defined and non-null onSuccess callback.");e.checkNotNullAndNotUndefined(g,"WeblabClient requires a defined and non-null onError callback.");
0!==b.length&&this.httpRequest.isSupported()?this.httpRequest.post(this.url).accept("application/json").timeout(a.HTTP_REQUEST_TIMEOUT_MS).query({firmware:"1",deviceId:this.deviceId,deviceTypeId:this.deviceTypeId,marketplaceId:this.marketplaceId}).body(this.createBody(b)).onError(function(a,b){f.isNullOrUndefined(b)?g(a):g(a,b.getLatencyMs())}).onLoad(function(a){var b={},e=a.getText();if(!f.isNullOrUndefined(e)){var l;try{l=JSON.parse(e)}catch(n){g(n,a.getLatencyMs());return}f.isNullOrUndefined(l)||
f.isNullOrUndefined(l.TreatmentList)||(e=l.TreatmentList,d.info("Received Weblabs.",e),e.forEach(function(a){var d=h.getTreatmentFromName(a.treatmentName);a=a.weblabName;null!==d&&(b[a]=d)}))}c(b,a.getLatencyMs())}).withCredentials().send():c({})};a.prototype.createBody=function(a){var b="<WeblabTreatmentRequest><WeblabList>";a.forEach(function(a){b+="<member>"+a+"</member>"});return b+"</WeblabList></WeblabTreatmentRequest>"};a.prototype.getTreatmentFromName=function(a){a=c[a];return f.isNullOrUndefined(a)?
null:a};a.SERVICE_ENDPOINT="/cdp/usage/GetWeblabTreatment";a.HTTP_REQUEST_TIMEOUT_MS=4E3;return a}();h.exports=a},{"./WeblabTreatment":160,ATVWebHTTPRequest:104,"atv-objects":84,"atv-preconditions":85,"js-logger":164}],160:[function(a,h,g){var e;a=e||(e={});a[a.T1=0]="T1";a[a.T2=1]="T2";a[a.T3=2]="T3";a[a.T4=3]="T4";a[a.T5=4]="T5";a[a.T6=5]="T6";a[a.T7=6]="T7";a[a.T8=7]="T8";a[a.T9=8]="T9";a[a.T10=9]="T10";a[a.T11=10]="T11";a[a.T12=11]="T12";a[a.T13=12]="T13";a[a.T14=13]="T14";a[a.T15=14]="T15";a[a.T16=
15]="T16";a[a.T17=16]="T17";a[a.T18=17]="T18";a[a.T19=18]="T19";a[a.T20=19]="T20";a[a.T21=20]="T21";a[a.T22=21]="T22";a[a.T23=22]="T23";a[a.T24=23]="T24";a[a.T25=24]="T25";a[a.T26=25]="T26";a[a.T27=26]="T27";a[a.T28=27]="T28";a[a.T29=28]="T29";a[a.T30=29]="T30";a[a.T31=30]="T31";a[a.T32=31]="T32";a[a.T33=32]="T33";a[a.T34=33]="T34";a[a.T35=34]="T35";a[a.T36=35]="T36";a[a.T37=36]="T37";a[a.T38=37]="T38";a[a.T39=38]="T39";a[a.T40=39]="T40";a[a.T41=40]="T41";a[a.T42=41]="T42";a[a.T43=42]="T43";a[a.T44=
43]="T44";a[a.T45=44]="T45";a[a.T46=45]="T46";a[a.T47=46]="T47";a[a.T48=47]="T48";a[a.T49=48]="T49";a[a.T50=49]="T50";h.exports=e},{}],161:[function(a,h,g){g=a("./WeblabClient");a=a("./WeblabTreatment");h.exports={WeblabClient:g,WeblabTreatment:a}},{"./WeblabClient":159,"./WeblabTreatment":160}],162:[function(a,h,g){function e(a,c){var d=[],e=[];c=c||function(a,b){var c=b,f=d.indexOf(c),g=[e[f]];for(f--;0<=f;f--)d[f][g[0]]===c&&(c=d[f],g.unshift(e[f]));return"[Circular ~"+g.join(".")+"]"};return function(f,
g){var h=g;"object"===typeof g&&g&&(-1!==d.indexOf(g)?h=c(f,g):(d.push(g),e.push(f)));a&&(h=a(f,h));return h}}function f(a,c,d,f){return JSON.stringify(a,e(c,f),d)}h.exports=f;f.getSerialize=e},{}],163:[function(a,h,g){!function(a){function f(){this._events={};this._conf&&b.call(this,this._conf)}function b(a){a&&(this._conf=a,a.delimiter&&(this.delimiter=a.delimiter),a.maxListeners&&(this._events.maxListeners=a.maxListeners),a.wildcard&&(this.wildcard=a.wildcard),a.newListener&&(this.newListener=
a.newListener),this.wildcard&&(this.listenerTree={}))}function c(a){this._events={};this.newListener=!1;b.call(this,a)}function d(a,b,c,e){if(!c)return[];var f=[],g,h,n,x;n=b.length;x=b[e];var E=b[e+1];if(e===n&&c._listeners){if("function"===typeof c._listeners)a&&a.push(c._listeners);else for(b=0,e=c._listeners.length;b<e;b++)a&&a.push(c._listeners[b]);return[c]}if("*"===x||"**"===x||c[x]){if("*"===x){for(g in c)"_listeners"!==g&&c.hasOwnProperty(g)&&(f=f.concat(d(a,b,c[g],e+1)));return f}if("**"===
x){(x=e+1===n||e+2===n&&"*"===E)&&c._listeners&&(f=f.concat(d(a,b,c,n)));for(g in c)"_listeners"!==g&&c.hasOwnProperty(g)&&("*"===g||"**"===g?(c[g]._listeners&&!x&&(f=f.concat(d(a,b,c[g],n))),f=f.concat(d(a,b,c[g],e))):f=g===E?f.concat(d(a,b,c[g],e+2)):f.concat(d(a,b,c[g],e)));return f}f=f.concat(d(a,b,c[x],e+1))}(h=c["*"])&&d(a,b,h,e+1);if(c=c["**"])if(e<n)for(g in c._listeners&&d(a,b,c,n),c)"_listeners"!==g&&c.hasOwnProperty(g)&&(g===E?d(a,b,c[g],e+2):g===x?d(a,b,c[g],e+1):(n={},n[g]=c[g],d(a,b,
{"**":n},e+1)));else c._listeners?d(a,b,c,n):c["*"]&&c["*"]._listeners&&d(a,b,c["*"],n);return f}var h=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)};c.prototype.delimiter=".";c.prototype.setMaxListeners=function(a){this._events||f.call(this);this._events.maxListeners=a;this._conf||(this._conf={});this._conf.maxListeners=a};c.prototype.event="";c.prototype.once=function(a,b){this.many(a,1,b);return this};c.prototype.many=function(a,b,c){function d(){0===
--b&&e.off(a,d);c.apply(this,arguments)}var e=this;if("function"!==typeof c)throw Error("many only accepts instances of Function");d._origin=c;this.on(a,d);return e};c.prototype.emit=function(){this._events||f.call(this);var a=arguments[0];if("newListener"===a&&!this.newListener&&!this._events.newListener)return!1;if(this._all){for(var b=arguments.length,c=Array(b-1),e=1;e<b;e++)c[e-1]=arguments[e];e=0;for(b=this._all.length;e<b;e++)this.event=a,this._all[e].apply(this,c)}if("error"===a&&!(this._all||
this._events.error||this.wildcard&&this.listenerTree.error)){if(arguments[1]instanceof Error)throw arguments[1];throw Error("Uncaught, unspecified 'error' event.");}var g;this.wildcard?(g=[],b="string"===typeof a?a.split(this.delimiter):a.slice(),d.call(this,g,b,this.listenerTree,0)):g=this._events[a];if("function"===typeof g){this.event=a;if(1===arguments.length)g.call(this);else if(1<arguments.length)switch(arguments.length){case 2:g.call(this,arguments[1]);break;case 3:g.call(this,arguments[1],
arguments[2]);break;default:b=arguments.length;c=Array(b-1);for(e=1;e<b;e++)c[e-1]=arguments[e];g.apply(this,c)}return!0}if(g){b=arguments.length;c=Array(b-1);for(e=1;e<b;e++)c[e-1]=arguments[e];g=g.slice();e=0;for(b=g.length;e<b;e++)this.event=a,g[e].apply(this,c);return 0<g.length||!!this._all}return!!this._all};c.prototype.on=function(a,b){if("function"===typeof a)return this.onAny(a),this;if("function"!==typeof b)throw Error("on only accepts instances of Function");this._events||f.call(this);
this.emit("newListener",a,b);if(this.wildcard){a:{for(var c=a,c="string"===typeof c?c.split(this.delimiter):c.slice(),d=0,e=c.length;d+1<e;d++)if("**"===c[d]&&"**"===c[d+1])break a;d=this.listenerTree;for(e=c.shift();e;){d[e]||(d[e]={});d=d[e];if(0===c.length){d._listeners?"function"===typeof d._listeners?d._listeners=[d._listeners,b]:h(d._listeners)&&(d._listeners.push(b),d._listeners.warned||(c=10,"undefined"!==typeof this._events.maxListeners&&(c=this._events.maxListeners),0<c&&d._listeners.length>
c&&(d._listeners.warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",d._listeners.length),console.trace()))):d._listeners=b;break a}e=c.shift()}}return this}this._events[a]?"function"===typeof this._events[a]?this._events[a]=[this._events[a],b]:h(this._events[a])&&(this._events[a].push(b),this._events[a].warned||(c=10,"undefined"!==typeof this._events.maxListeners&&(c=this._events.maxListeners),
0<c&&this._events[a].length>c&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),console.trace()))):this._events[a]=b;return this};c.prototype.onAny=function(a){if("function"!==typeof a)throw Error("onAny only accepts instances of Function");this._all||(this._all=[]);this._all.push(a);return this};c.prototype.addListener=c.prototype.on;c.prototype.off=function(a,
b){if("function"!==typeof b)throw Error("removeListener only takes instances of Function");var c,e=[];if(this.wildcard)c="string"===typeof a?a.split(this.delimiter):a.slice(),e=d.call(this,null,c,this.listenerTree,0);else{if(!this._events[a])return this;c=this._events[a];e.push({_listeners:c})}for(var f=0;f<e.length;f++){var g=e[f];c=g._listeners;if(h(c)){for(var k=-1,A=0,x=c.length;A<x;A++)if(c[A]===b||c[A].listener&&c[A].listener===b||c[A]._origin&&c[A]._origin===b){k=A;break}if(!(0>k)){this.wildcard?
g._listeners.splice(k,1):this._events[a].splice(k,1);0===c.length&&(this.wildcard?delete g._listeners:delete this._events[a]);break}}else if(c===b||c.listener&&c.listener===b||c._origin&&c._origin===b)this.wildcard?delete g._listeners:delete this._events[a]}return this};c.prototype.offAny=function(a){var b=0,c=0,d;if(a&&this._all&&0<this._all.length)for(d=this._all,b=0,c=d.length;b<c;b++){if(a===d[b]){d.splice(b,1);break}}else this._all=[];return this};c.prototype.removeListener=c.prototype.off;c.prototype.removeAllListeners=
function(a){if(0===arguments.length)return!this._events||f.call(this),this;if(this.wildcard)for(var b="string"===typeof a?a.split(this.delimiter):a.slice(),b=d.call(this,null,b,this.listenerTree,0),c=0;c<b.length;c++)b[c]._listeners=null;else{if(!this._events[a])return this;this._events[a]=null}return this};c.prototype.listeners=function(a){if(this.wildcard){var b=[];a="string"===typeof a?a.split(this.delimiter):a.slice();d.call(this,b,a,this.listenerTree,0);return b}this._events||f.call(this);this._events[a]||
(this._events[a]=[]);h(this._events[a])||(this._events[a]=[this._events[a]]);return this._events[a]};c.prototype.listenersAny=function(){return this._all?this._all:[]};"function"===typeof define&&define.amd?define(function(){return c}):"object"===typeof g?g.EventEmitter2=c:window.EventEmitter2=c}()},{}],164:[function(a,h,g){(function(a){var f={VERSION:"0.9.14"},b,c={},d=function(a,b){return function(){return b.apply(a,arguments)}},g=function(){var a=arguments,b=a[0],c,d;for(d=1;d<a.length;d++)for(c in a[d])c in
b||!a[d].hasOwnProperty(c)||(b[c]=a[d][c]);return b};f.DEBUG={value:1,name:"DEBUG"};f.INFO={value:2,name:"INFO"};f.WARN={value:4,name:"WARN"};f.ERROR={value:8,name:"ERROR"};f.OFF={value:99,name:"OFF"};var l=function(a){this.context=a;this.setLevel(a.filterLevel);this.log=this.info};l.prototype={setLevel:function(a){a&&"value"in a&&(this.context.filterLevel=a)},enabledFor:function(a){return a.value>=this.context.filterLevel.value},debug:function(){this.invoke(f.DEBUG,arguments)},info:function(){this.invoke(f.INFO,
arguments)},warn:function(){this.invoke(f.WARN,arguments)},error:function(){this.invoke(f.ERROR,arguments)},invoke:function(a,c){b&&this.enabledFor(a)&&b(c,g({level:a},this.context))}};var p=new l({filterLevel:f.OFF});f.enabledFor=d(p,p.enabledFor);f.debug=d(p,p.debug);f.info=d(p,p.info);f.warn=d(p,p.warn);f.error=d(p,p.error);f.log=f.info;f.setHandler=function(a){b=a};f.setLevel=function(a){p.setLevel(a);for(var b in c)c.hasOwnProperty(b)&&c[b].setLevel(a)};f.get=function(a){return c[a]||(c[a]=new l(g({name:a},
p.context)))};f.useDefaults=function(a){"undefined"!==typeof console&&(f.setLevel(a||f.DEBUG),f.setHandler(function(a,b){var c=console.log;b.name&&(a[0]="["+b.name+"] "+a[0]);b.level===f.WARN&&console.warn?c=console.warn:b.level===f.ERROR&&console.error?c=console.error:b.level===f.INFO&&console.info&&(c=console.info);Function.prototype.apply.call(c,console,a)}))};"function"===typeof define&&define.amd?define(f):"undefined"!==typeof h&&h.exports?h.exports=f:(f._prevLogger=a.Logger,f.noConflict=function(){a.Logger=
f._prevLogger;return f},a.Logger=f)})(this)},{}],165:[function(a,h,g){(function(a){function f(a,b,e){var f=0,g=[0],h="",w=null,h=e||"UTF8";if("UTF8"!==h&&"UTF16"!==h)throw"encoding must be UTF8 or UTF16";if("HEX"===b){if(0!==a.length%2)throw"srcString of HEX type must be in byte increments";w=d(a);f=w.binLen;g=w.value}else if("ASCII"===b||"TEXT"===b)w=c(a,h),f=w.binLen,g=w.value;else if("B64"===b)w=n(a),f=w.binLen,g=w.value;else throw"inputFormat must be HEX, TEXT, ASCII, or B64";this.getHash=function(a,
b,c,d){var e=null,h=g.slice(),w=f,k;3===arguments.length?"number"!==typeof c&&(d=c,c=1):2===arguments.length&&(c=1);if(c!==parseInt(c,10)||1>c)throw"numRounds must a integer >= 1";switch(b){case "HEX":e=l;break;case "B64":e=p;break;default:throw"format must be HEX or B64";}if("SHA-1"===a)for(k=0;k<c;k++)h=J(h,w),w=160;else if("SHA-224"===a)for(k=0;k<c;k++)h=C(h,w,a),w=224;else if("SHA-256"===a)for(k=0;k<c;k++)h=C(h,w,a),w=256;else if("SHA-384"===a)for(k=0;k<c;k++)h=C(h,w,a),w=384;else if("SHA-512"===
a)for(k=0;k<c;k++)h=C(h,w,a),w=512;else throw"Chosen SHA variant is not supported";return e(h,q(d))};this.getHMAC=function(a,b,e,w,k){var D,v,z,G,B=[],S=[];switch(w){case "HEX":w=l;break;case "B64":w=p;break;default:throw"outputFormat must be HEX or B64";}if("SHA-1"===e)v=64,G=160;else if("SHA-224"===e)v=64,G=224;else if("SHA-256"===e)v=64,G=256;else if("SHA-384"===e)v=128,G=384;else if("SHA-512"===e)v=128,G=512;else throw"Chosen SHA variant is not supported";if("HEX"===b)D=d(a),z=D.binLen,D=D.value;
else if("ASCII"===b||"TEXT"===b)D=c(a,h),z=D.binLen,D=D.value;else if("B64"===b)D=n(a),z=D.binLen,D=D.value;else throw"inputFormat must be HEX, TEXT, ASCII, or B64";a=8*v;b=v/4-1;v<z/8?(D="SHA-1"===e?J(D,z):C(D,z,e),D[b]&=4294967040):v>z/8&&(D[b]&=4294967040);for(v=0;v<=b;v+=1)B[v]=D[v]^909522486,S[v]=D[v]^1549556828;e="SHA-1"===e?J(S.concat(J(B.concat(g),a+f)),a+G):C(S.concat(C(B.concat(g),a+f,e)),a+G,e);return w(e,q(k))}}function b(a,b){this.a=a;this.b=b}function c(a,b){var c=[],d,e=[],f=0,g;if("UTF8"===
b)for(g=0;g<a.length;g+=1)for(d=a.charCodeAt(g),e=[],2048<d?(e[0]=224|(d&61440)>>>12,e[1]=128|(d&4032)>>>6,e[2]=128|d&63):128<d?(e[0]=192|(d&1984)>>>6,e[1]=128|d&63):e[0]=d,d=0;d<e.length;d+=1)c[f>>>2]|=e[d]<<24-f%4*8,f+=1;else if("UTF16"===b)for(g=0;g<a.length;g+=1)c[f>>>2]|=a.charCodeAt(g)<<16-f%4*8,f+=2;return{value:c,binLen:8*f}}function d(a){var b=[],c=a.length,d,e;if(0!==c%2)throw"String of HEX type must be in byte increments";for(d=0;d<c;d+=2){e=parseInt(a.substr(d,2),16);if(isNaN(e))throw"String of HEX type contains invalid characters";
b[d>>>3]|=e<<24-d%8*4}return{value:b,binLen:4*c}}function n(a){var b=[],c=0,d,e,f,g,h;if(-1===a.search(/^[a-zA-Z0-9=+\/]+$/))throw"Invalid character in base-64 string";d=a.indexOf("=");a=a.replace(/\=/g,"");if(-1!==d&&d<a.length)throw"Invalid '=' found in base-64 string";for(e=0;e<a.length;e+=4){h=a.substr(e,4);for(f=g=0;f<h.length;f+=1)d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(h[f]),g|=d<<18-6*f;for(f=0;f<h.length-1;f+=1)b[c>>2]|=(g>>>16-8*f&255)<<24-c%4*8,c+=1}return{value:b,
binLen:8*c}}function l(a,b){var c="",d=4*a.length,e,f;for(e=0;e<d;e+=1)f=a[e>>>2]>>>8*(3-e%4),c+="0123456789abcdef".charAt(f>>>4&15)+"0123456789abcdef".charAt(f&15);return b.outputUpper?c.toUpperCase():c}function p(a,b){var c="",d=4*a.length,e,f,g;for(e=0;e<d;e+=3)for(g=(a[e>>>2]>>>8*(3-e%4)&255)<<16|(a[e+1>>>2]>>>8*(3-(e+1)%4)&255)<<8|a[e+2>>>2]>>>8*(3-(e+2)%4)&255,f=0;4>f;f+=1)c=8*e+6*f<=32*a.length?c+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(g>>>6*(3-f)&63):c+b.b64Pad;
return c}function q(a){var b={outputUpper:!1,b64Pad:"="};try{a.hasOwnProperty("outputUpper")&&(b.outputUpper=a.outputUpper),a.hasOwnProperty("b64Pad")&&(b.b64Pad=a.b64Pad)}catch(c){}if("boolean"!==typeof b.outputUpper)throw"Invalid outputUpper formatting option";if("string"!==typeof b.b64Pad)throw"Invalid b64Pad formatting option";return b}function m(a,b){return a<<b|a>>>32-b}function r(a,b){return a>>>b|a<<32-b}function u(a,c){var d=null,d=new b(a.a,a.b);return 32>=c?new b(d.a>>>c|d.b<<32-c&4294967295,
d.b>>>c|d.a<<32-c&4294967295):new b(d.b>>>c-32|d.a<<64-c&4294967295,d.a>>>c-32|d.b<<64-c&4294967295)}function k(a,c){return 32>=c?new b(a.a>>>c,a.b>>>c|a.a<<32-c&4294967295):new b(0,a.a>>>c-32)}function A(a,b,c){return a^b^c}function x(a,b,c){return a&b^~a&c}function E(a,c,d){return new b(a.a&c.a^~a.a&d.a,a.b&c.b^~a.b&d.b)}function y(a,b,c){return a&b^a&c^b&c}function M(a,c,d){return new b(a.a&c.a^a.a&d.a^c.a&d.a,a.b&c.b^a.b&d.b^c.b&d.b)}function K(a){return r(a,2)^r(a,13)^r(a,22)}function F(a){var c=
u(a,28),d=u(a,34);a=u(a,39);return new b(c.a^d.a^a.a,c.b^d.b^a.b)}function I(a){return r(a,6)^r(a,11)^r(a,25)}function P(a){var c=u(a,14),d=u(a,18);a=u(a,41);return new b(c.a^d.a^a.a,c.b^d.b^a.b)}function U(a){return r(a,7)^r(a,18)^a>>>3}function N(a){var c=u(a,1),d=u(a,8);a=k(a,7);return new b(c.a^d.a^a.a,c.b^d.b^a.b)}function H(a){return r(a,17)^r(a,19)^a>>>10}function R(a){var c=u(a,19),d=u(a,61);a=k(a,6);return new b(c.a^d.a^a.a,c.b^d.b^a.b)}function w(a,b){var c=(a&65535)+(b&65535);return((a>>>
16)+(b>>>16)+(c>>>16)&65535)<<16|c&65535}function D(a,b,c,d){var e=(a&65535)+(b&65535)+(c&65535)+(d&65535);return((a>>>16)+(b>>>16)+(c>>>16)+(d>>>16)+(e>>>16)&65535)<<16|e&65535}function v(a,b,c,d,e){var f=(a&65535)+(b&65535)+(c&65535)+(d&65535)+(e&65535);return((a>>>16)+(b>>>16)+(c>>>16)+(d>>>16)+(e>>>16)+(f>>>16)&65535)<<16|f&65535}function G(a,c){var d,e,f;d=(a.b&65535)+(c.b&65535);e=(a.b>>>16)+(c.b>>>16)+(d>>>16);f=(e&65535)<<16|d&65535;d=(a.a&65535)+(c.a&65535)+(e>>>16);e=(a.a>>>16)+(c.a>>>16)+
(d>>>16);return new b((e&65535)<<16|d&65535,f)}function B(a,c,d,e){var f,g,h;f=(a.b&65535)+(c.b&65535)+(d.b&65535)+(e.b&65535);g=(a.b>>>16)+(c.b>>>16)+(d.b>>>16)+(e.b>>>16)+(f>>>16);h=(g&65535)<<16|f&65535;f=(a.a&65535)+(c.a&65535)+(d.a&65535)+(e.a&65535)+(g>>>16);g=(a.a>>>16)+(c.a>>>16)+(d.a>>>16)+(e.a>>>16)+(f>>>16);return new b((g&65535)<<16|f&65535,h)}function L(a,c,d,e,f){var g,h,w;g=(a.b&65535)+(c.b&65535)+(d.b&65535)+(e.b&65535)+(f.b&65535);h=(a.b>>>16)+(c.b>>>16)+(d.b>>>16)+(e.b>>>16)+(f.b>>>
16)+(g>>>16);w=(h&65535)<<16|g&65535;g=(a.a&65535)+(c.a&65535)+(d.a&65535)+(e.a&65535)+(f.a&65535)+(h>>>16);h=(a.a>>>16)+(c.a>>>16)+(d.a>>>16)+(e.a>>>16)+(f.a>>>16)+(g>>>16);return new b((h&65535)<<16|g&65535,w)}function J(a,b){var c=[],d,e,f,g,h,k,D=x,l=A,n=y,p=m,G=w,q,B,L=v,K,F=[1732584193,4023233417,2562383102,271733878,3285377520];a[b>>>5]|=128<<24-b%32;a[(b+65>>>9<<4)+15]=b;K=a.length;for(q=0;q<K;q+=16){d=F[0];e=F[1];f=F[2];g=F[3];h=F[4];for(B=0;80>B;B+=1)c[B]=16>B?a[B+q]:p(c[B-3]^c[B-8]^c[B-
14]^c[B-16],1),k=20>B?L(p(d,5),D(e,f,g),h,1518500249,c[B]):40>B?L(p(d,5),l(e,f,g),h,1859775393,c[B]):60>B?L(p(d,5),n(e,f,g),h,2400959708,c[B]):L(p(d,5),l(e,f,g),h,3395469782,c[B]),h=g,g=f,f=p(e,30),e=d,d=k;F[0]=G(d,F[0]);F[1]=G(e,F[1]);F[2]=G(f,F[2]);F[3]=G(g,F[3]);F[4]=G(h,F[4])}return F}function C(a,c,d){var e,f,g,h,k,l,n,p,q,m,r,J,u,C,A,O,X,Y,Z,$,aa,Q,ba,ca,t,T=[],V,s=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,
1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,
2361852424,2428436474,2756734187,3204031479,3329325298];m=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428];f=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];if("SHA-224"===d||"SHA-256"===d)r=64,e=(c+65>>>9<<4)+15,C=16,A=1,t=Number,O=w,X=D,Y=v,Z=U,$=H,aa=K,Q=I,ca=y,ba=x,m="SHA-224"===d?m:f;else if("SHA-384"===d||"SHA-512"===d)r=80,e=(c+128>>>10<<5)+31,C=32,A=2,t=b,O=G,X=B,Y=L,Z=N,$=R,aa=F,Q=P,ca=M,ba=E,s=[new t(s[0],3609767458),
new t(s[1],602891725),new t(s[2],3964484399),new t(s[3],2173295548),new t(s[4],4081628472),new t(s[5],3053834265),new t(s[6],2937671579),new t(s[7],3664609560),new t(s[8],2734883394),new t(s[9],1164996542),new t(s[10],1323610764),new t(s[11],3590304994),new t(s[12],4068182383),new t(s[13],991336113),new t(s[14],633803317),new t(s[15],3479774868),new t(s[16],2666613458),new t(s[17],944711139),new t(s[18],2341262773),new t(s[19],2007800933),new t(s[20],1495990901),new t(s[21],1856431235),new t(s[22],
3175218132),new t(s[23],2198950837),new t(s[24],3999719339),new t(s[25],766784016),new t(s[26],2566594879),new t(s[27],3203337956),new t(s[28],1034457026),new t(s[29],2466948901),new t(s[30],3758326383),new t(s[31],168717936),new t(s[32],1188179964),new t(s[33],1546045734),new t(s[34],1522805485),new t(s[35],2643833823),new t(s[36],2343527390),new t(s[37],1014477480),new t(s[38],1206759142),new t(s[39],344077627),new t(s[40],1290863460),new t(s[41],3158454273),new t(s[42],3505952657),new t(s[43],
106217008),new t(s[44],3606008344),new t(s[45],1432725776),new t(s[46],1467031594),new t(s[47],851169720),new t(s[48],3100823752),new t(s[49],1363258195),new t(s[50],3750685593),new t(s[51],3785050280),new t(s[52],3318307427),new t(s[53],3812723403),new t(s[54],2003034995),new t(s[55],3602036899),new t(s[56],1575990012),new t(s[57],1125592928),new t(s[58],2716904306),new t(s[59],442776044),new t(s[60],593698344),new t(s[61],3733110249),new t(s[62],2999351573),new t(s[63],3815920427),new t(3391569614,
3928383900),new t(3515267271,566280711),new t(3940187606,3454069534),new t(4118630271,4000239992),new t(116418474,1914138554),new t(174292421,2731055270),new t(289380356,3203993006),new t(460393269,320620315),new t(685471733,587496836),new t(852142971,1086792851),new t(1017036298,365543100),new t(1126000580,2618297676),new t(1288033470,3409855158),new t(1501505948,4234509866),new t(1607167915,987167468),new t(1816402316,1246189591)],m="SHA-384"===d?[new t(3418070365,m[0]),new t(1654270250,m[1]),new t(2438529370,
m[2]),new t(355462360,m[3]),new t(1731405415,m[4]),new t(41048885895,m[5]),new t(3675008525,m[6]),new t(1203062813,m[7])]:[new t(f[0],4089235720),new t(f[1],2227873595),new t(f[2],4271175723),new t(f[3],1595750129),new t(f[4],2917565137),new t(f[5],725511199),new t(f[6],4215389547),new t(f[7],327033209)];else throw"Unexpected error in SHA-2 implementation";a[c>>>5]|=128<<24-c%32;a[e]=c;V=a.length;for(J=0;J<V;J+=C){c=m[0];e=m[1];f=m[2];g=m[3];h=m[4];k=m[5];l=m[6];n=m[7];for(u=0;u<r;u+=1)T[u]=16>u?
new t(a[u*A+J],a[u*A+J+1]):X($(T[u-2]),T[u-7],Z(T[u-15]),T[u-16]),p=Y(n,Q(h),ba(h,k,l),s[u],T[u]),q=O(aa(c),ca(c,e,f)),n=l,l=k,k=h,h=O(g,p),g=f,f=e,e=c,c=O(p,q);m[0]=O(c,m[0]);m[1]=O(e,m[1]);m[2]=O(f,m[2]);m[3]=O(g,m[3]);m[4]=O(h,m[4]);m[5]=O(k,m[5]);m[6]=O(l,m[6]);m[7]=O(n,m[7])}if("SHA-224"===d)a=[m[0],m[1],m[2],m[3],m[4],m[5],m[6]];else if("SHA-256"===d)a=m;else if("SHA-384"===d)a=[m[0].a,m[0].b,m[1].a,m[1].b,m[2].a,m[2].b,m[3].a,m[3].b,m[4].a,m[4].b,m[5].a,m[5].b];else if("SHA-512"===d)a=[m[0].a,
m[0].b,m[1].a,m[1].b,m[2].a,m[2].b,m[3].a,m[3].b,m[4].a,m[4].b,m[5].a,m[5].b,m[6].a,m[6].b,m[7].a,m[7].b];else throw"Unexpected error in SHA-2 implementation";return a}"function"===typeof define&&typeof define.amd?define(function(){return f}):"undefined"!==typeof g?"undefined"!==typeof h&&h.exports?h.exports=g=f:g=f:a.jsSHA=f})(this)},{}],166:[function(a,h,g){(function(a,f){if("object"===typeof g&&g)f(g);else{var b={};f(b);"function"===typeof define&&define.amd?define(b):a.Mustache=b}})(this,function(a){function f(a){return"function"===
typeof a}function b(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function c(a){if(!r(a)||2!==a.length)throw Error("Invalid tags: "+a);return[RegExp(b(a[0])+"\\s*"),RegExp("\\s*"+b(a[1]))]}function d(a){this.tail=this.string=a;this.pos=0}function g(a,b){this.view=null==a?{}:a;this.cache={".":this.view};this.parent=b}function h(){this.cache={}}var p=RegExp.prototype.test,q=/\S/,m=Object.prototype.toString,r=Array.isArray||function(a){return"[object Array]"===m.call(a)},u={"&":"&amp;","<":"&lt;",
">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},k=/\s*/,A=/\s+/,x=/\s*=/,E=/\s*\}/,y=/#|\^|\/|>|\{|&|=|!/;d.prototype.eos=function(){return""===this.tail};d.prototype.scan=function(a){return(a=this.tail.match(a))&&0===a.index?(a=a[0],this.tail=this.tail.substring(a.length),this.pos+=a.length,a):""};d.prototype.scanUntil=function(a){a=this.tail.search(a);var b;switch(a){case -1:b=this.tail;this.tail="";break;case 0:b="";break;default:b=this.tail.substring(0,a),this.tail=this.tail.substring(a)}this.pos+=
b.length;return b};g.prototype.push=function(a){return new g(a,this)};g.prototype.lookup=function(a){var b;if(a in this.cache)b=this.cache[a];else{for(var c=this;c;){if(0<a.indexOf(".")){b=c.view;for(var d=a.split("."),e=0;null!=b&&e<d.length;)b=b[d[e++]]}else b=c.view[a];if(null!=b)break;c=c.parent}this.cache[a]=b}f(b)&&(b=b.call(this.view));return b};h.prototype.clearCache=function(){this.cache={}};h.prototype.parse=function(f,g){var h=this.cache,l=h[f];if(null==l){var n;n=g||a.tags;l=f||"";"string"===
typeof n&&(n=n.split(A));for(var m=c(n),r=new d(l),u=[],l=[],w=[],D=!1,v=!1,G,B,L,J;!r.eos();){G=r.pos;if(L=r.scanUntil(m[0])){J=0;for(var C=L.length;J<C;++J)if(B=L.charAt(J),p.call(q,B)?v=!0:w.push(l.length),l.push(["text",B,G,G+1]),G+=1,"\n"===B){if(D&&!v)for(;w.length;)delete l[w.pop()];else w=[];v=D=!1}}if(!r.scan(m[0]))break;D=!0;B=r.scan(y)||"name";r.scan(k);"="===B?(L=r.scanUntil(x),r.scan(x),r.scanUntil(m[1])):"{"===B?(L=r.scanUntil(RegExp("\\s*"+b("}"+n[1]))),r.scan(E),r.scanUntil(m[1]),
B="&"):L=r.scanUntil(m[1]);if(!r.scan(m[1]))throw Error("Unclosed tag at "+r.pos);J=[B,L,G,r.pos];l.push(J);if("#"===B||"^"===B)u.push(J);else if("/"===B){B=u.pop();if(!B)throw Error('Unopened section "'+L+'" at '+G);if(B[1]!==L)throw Error('Unclosed section "'+B[1]+'" at '+G);}else"name"===B||"{"===B||"&"===B?v=!0:"="===B&&(m=c(n=L.split(A)))}if(B=u.pop())throw Error('Unclosed section "'+B[1]+'" at '+r.pos);n=[];for(var z,r=0,u=l.length;r<u;++r)if(m=l[r])"text"===m[0]&&z&&"text"===z[0]?(z[1]+=m[1],
z[3]=m[3]):(n.push(m),z=m);w=z=[];l=[];r=0;for(u=n.length;r<u;++r)switch(m=n[r],m[0]){case "#":case "^":w.push(m);l.push(m);w=m[4]=[];break;case "/":w=l.pop();w[5]=m[2];w=0<l.length?l[l.length-1][4]:z;break;default:w.push(m)}l=h[f]=z}return l};h.prototype.render=function(a,b,c){var d=this.parse(a);b=b instanceof g?b:new g(b);return this.renderTokens(d,b,c,a)};h.prototype.renderTokens=function(b,c,d,g){function h(a){return l.render(a,c,d)}for(var k="",l=this,n,w,D=0,v=b.length;D<v;++D)switch(n=b[D],
n[0]){case "#":w=c.lookup(n[1]);if(!w)continue;if(r(w))for(var p=0,m=w.length;p<m;++p)k+=this.renderTokens(n[4],c.push(w[p]),d,g);else if("object"===typeof w||"string"===typeof w)k+=this.renderTokens(n[4],c.push(w),d,g);else if(f(w)){if("string"!==typeof g)throw Error("Cannot use higher-order sections without the original template");w=w.call(c.view,g.slice(n[3],n[5]),h);null!=w&&(k+=w)}else k+=this.renderTokens(n[4],c,d,g);break;case "^":w=c.lookup(n[1]);if(!w||r(w)&&0===w.length)k+=this.renderTokens(n[4],
c,d,g);break;case ">":if(!d)continue;w=f(d)?d(n[1]):d[n[1]];null!=w&&(k+=this.renderTokens(this.parse(w),c,d,w));break;case "&":w=c.lookup(n[1]);null!=w&&(k+=w);break;case "name":w=c.lookup(n[1]);null!=w&&(k+=a.escape(w));break;case "text":k+=n[1]}return k};a.name="mustache.js";a.version="0.8.1";a.tags=["{{","}}"];var M=new h;a.clearCache=function(){return M.clearCache()};a.parse=function(a,b){return M.parse(a,b)};a.render=function(a,b,c){return M.render(a,b,c)};a.to_html=function(b,c,d,g){b=a.render(b,
c,d);if(f(g))g(b);else return b};a.escape=function(a){return String(a).replace(/[&<>"'\/]/g,function(a){return u[a]})};a.Scanner=d;a.Context=g;a.Writer=h})},{}],167:[function(a,h,g){(function(){function e(a,b){var c=b||0,d=m;return d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]+"-"+d[a[c++]]+d[a[c++]]+"-"+d[a[c++]]+d[a[c++]]+"-"+d[a[c++]]+d[a[c++]]+"-"+d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]}function f(a,b,d){d=b&&d||0;"string"==typeof a&&(b="binary"==a?new q(16):null,a=null);a=a||{};
a=a.random||(a.rng||c)();a[6]=a[6]&15|64;a[8]=a[8]&63|128;if(b)for(var f=0;16>f;f++)b[d+f]=a[f];return b||e(a)}var b=this,c;if("function"==typeof a)try{var d=a("crypto").randomBytes;c=d&&function(){return d(16)}}catch(g){}if(!c&&b.crypto&&crypto.getRandomValues){var l=new Uint8Array(16);c=function(){crypto.getRandomValues(l);return l}}if(!c){var p=Array(16);c=function(){for(var a=0,b;16>a;a++)0===(a&3)&&(b=4294967296*Math.random()),p[a]=b>>>((a&3)<<3)&255;return p}}for(var q="function"==typeof Buffer?
Buffer:Array,m=[],r={},u=0;256>u;u++)m[u]=(u+256).toString(16).substr(1),r[m[u]]=u;var u=c(),k=[u[0]|1,u[1],u[2],u[3],u[4],u[5]],A=(u[6]<<8|u[7])&16383,x=0,E=0;f.v1=function(a,b,c){c=b&&c||0;var d=b||[];a=a||{};var f=null!=a.clockseq?a.clockseq:A,g=null!=a.msecs?a.msecs:(new Date).getTime(),h=null!=a.nsecs?a.nsecs:E+1,l=g-x+(h-E)/1E4;0>l&&null==a.clockseq&&(f=f+1&16383);(0>l||g>x)&&null==a.nsecs&&(h=0);if(1E4<=h)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");x=g;E=h;A=f;g+=122192928E5;
h=(1E4*(g&268435455)+h)%4294967296;d[c++]=h>>>24&255;d[c++]=h>>>16&255;d[c++]=h>>>8&255;d[c++]=h&255;g=g/4294967296*1E4&268435455;d[c++]=g>>>8&255;d[c++]=g&255;d[c++]=g>>>24&15|16;d[c++]=g>>>16&255;d[c++]=f>>>8|128;d[c++]=f&255;a=a.node||k;for(f=0;6>f;f++)d[c+f]=a[f];return b?b:e(d)};f.v4=f;f.parse=function(a,b,c){var d=b&&c||0,e=0;b=b||[];for(a.toLowerCase().replace(/[0-9a-f]{2}/g,function(a){16>e&&(b[d+e++]=r[a])});16>e;)b[d+e++]=0;return b};f.unparse=e;f.BufferClass=q;if("function"===typeof define&&
define.amd)define(function(){return f});else if("undefined"!=typeof h&&h.exports)h.exports=f;else{var y=b.uuid;f.noConflict=function(){b.uuid=y;return f};b.uuid=f}}).call(this)},{crypto:void 0}],168:[function(a,h,g){h.exports=a("./lib/")},{"./lib/":169}],169:[function(a,h,g){g=a("./stringify");a=a("./parse");h.exports={stringify:g,parse:a}},{"./parse":170,"./stringify":171}],170:[function(a,h,g){var e=a("./utils"),f={delimiter:"&",depth:5,arrayLimit:20,parameterLimit:1E3,parseValues:function(a,c){for(var d=
{},f=a.split(c.delimiter,Infinity===c.parameterLimit?void 0:c.parameterLimit),g=0,h=f.length;g<h;++g){var q=f[g],m=-1===q.indexOf("]=")?q.indexOf("="):q.indexOf("]=")+1;if(-1===m)d[e.decode(q)]="";else{var r=e.decode(q.slice(0,m)),q=e.decode(q.slice(m+1));d.hasOwnProperty(r)?d[r]=[].concat(d[r]).concat(q):d[r]=q}}return d},parseObject:function(a,c,d){if(!a.length)return c;var e=a.shift(),g={};if("[]"===e)g=[],g=g.concat(f.parseObject(a,c,d));else{var h="["===e[0]&&"]"===e[e.length-1]?e.slice(1,e.length-
1):e,q=parseInt(h,10),m=""+q;!isNaN(q)&&e!==h&&m===h&&0<=q&&q<=d.arrayLimit?(g=[],g[q]=f.parseObject(a,c,d)):g[h]=f.parseObject(a,c,d)}return g},parseKeys:function(a,c,d){if(a){var e=/(\[[^\[\]]*\])/g,g=/^([^\[\]]*)/.exec(a);if(!Object.prototype.hasOwnProperty(g[1])){var h=[];g[1]&&h.push(g[1]);for(var q=0;null!==(g=e.exec(a))&&q<d.depth;)++q,Object.prototype.hasOwnProperty(g[1].replace(/\[|\]/g,""))||h.push(g[1]);g&&h.push("["+a.slice(g.index)+"]");return f.parseObject(h,c,d)}}}};h.exports=function(a,
c){if(""===a||null===a||"undefined"===typeof a)return{};c=c||{};c.delimiter="string"===typeof c.delimiter||e.isRegExp(c.delimiter)?c.delimiter:f.delimiter;c.depth="number"===typeof c.depth?c.depth:f.depth;c.arrayLimit="number"===typeof c.arrayLimit?c.arrayLimit:f.arrayLimit;c.parameterLimit="number"===typeof c.parameterLimit?c.parameterLimit:f.parameterLimit;for(var d="string"===typeof a?f.parseValues(a,c):a,g={},h=Object.keys(d),p=0,q=h.length;p<q;++p)var m=h[p],m=f.parseKeys(m,d[m],c),g=e.merge(g,
m);return e.compact(g)}},{"./utils":172}],171:[function(a,h,g){var e=a("./utils"),f={delimiter:"&",indices:!0,stringify:function(a,c,d){e.isBuffer(a)?a=a.toString():a instanceof Date?a=a.toISOString():null===a&&(a="");if("string"===typeof a||"number"===typeof a||"boolean"===typeof a)return[encodeURIComponent(c)+"="+encodeURIComponent(a)];var g=[];if("undefined"===typeof a)return g;for(var h=Object.keys(a),p=0,q=h.length;p<q;++p)var m=h[p],g=!d.indices&&Array.isArray(a)?g.concat(f.stringify(a[m],c,
d)):g.concat(f.stringify(a[m],c+"["+m+"]",d));return g}};h.exports=function(a,c){c=c||{};var d="undefined"===typeof c.delimiter?f.delimiter:c.delimiter;c.indices="boolean"===typeof c.indices?c.indices:f.indices;var e=[];if("object"!==typeof a||null===a)return"";for(var g=Object.keys(a),h=0,q=g.length;h<q;++h)var m=g[h],e=e.concat(f.stringify(a[m],m,c));return e.join(d)}},{"./utils":172}],172:[function(a,h,g){g.arrayToObject=function(a){for(var f={},b=0,c=a.length;b<c;++b)"undefined"!==typeof a[b]&&
(f[b]=a[b]);return f};g.merge=function(a,f){if(!f)return a;if("object"!==typeof f)return Array.isArray(a)?a.push(f):a[f]=!0,a;if("object"!==typeof a)return a=[a].concat(f);Array.isArray(a)&&!Array.isArray(f)&&(a=g.arrayToObject(a));for(var b=Object.keys(f),c=0,d=b.length;c<d;++c){var h=b[c],l=f[h];a[h]=a[h]?g.merge(a[h],l):l}return a};g.decode=function(a){try{return decodeURIComponent(a.replace(/\+/g," "))}catch(f){return a}};g.compact=function(a,f){if("object"!==typeof a||null===a)return a;f=f||
[];var b=f.indexOf(a);if(-1!==b)return f[b];f.push(a);if(Array.isArray(a)){for(var c=[],b=0,d=a.length;b<d;++b)"undefined"!==typeof a[b]&&c.push(a[b]);return c}c=Object.keys(a);b=0;for(d=c.length;b<d;++b){var h=c[b];a[h]=g.compact(a[h],f)}return a};g.isRegExp=function(a){return"[object RegExp]"===Object.prototype.toString.call(a)};g.isBuffer=function(a){return null===a||"undefined"===typeof a?!1:!!(a.constructor&&a.constructor.isBuffer&&a.constructor.isBuffer(a))}},{}],173:[function(a,h,g){(function(){var a=
this,f=a._,b={},c=Array.prototype,d=Object.prototype,n=c.push,l=c.slice,p=c.concat,q=d.toString,m=d.hasOwnProperty,d=Array.isArray,r=Object.keys,u=Function.prototype.bind,k=function(a){if(a instanceof k)return a;if(!(this instanceof k))return new k(a);this._wrapped=a};"undefined"!==typeof g?("undefined"!==typeof h&&h.exports&&(g=h.exports=k),g._=k):a._=k;k.VERSION="1.6.0";k.each=k.forEach=function(a,c,d){if(null==a)return a;if(a.length===+a.length)for(var e=0,f=a.length;e<f;e++){if(c.call(d,a[e],
e,a)===b)return}else for(var g=k.keys(a),e=0,f=g.length;e<f;e++)if(c.call(d,a[g[e]],g[e],a)===b)return;return a};k.map=k.collect=function(a,b,c){var d=[];if(null==a)return d;k.each(a,function(a,e,f){d.push(b.call(c,a,e,f))});return d};k.reduce=k.foldl=k.inject=function(a,b,c,d){var e=2<arguments.length;null==a&&(a=[]);k.each(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)});if(!e)throw new TypeError("Reduce of empty array with no initial value");return c};k.reduceRight=k.foldr=function(a,b,c,d){var e=
2<arguments.length;null==a&&(a=[]);var f=a.length;if(f!==+f)var g=k.keys(a),f=g.length;k.each(a,function(h,k,l){k=g?g[--f]:--f;e?c=b.call(d,c,a[k],k,l):(c=a[k],e=!0)});if(!e)throw new TypeError("Reduce of empty array with no initial value");return c};k.find=k.detect=function(a,b,c){var d;k.some(a,function(a,e,f){if(b.call(c,a,e,f))return d=a,!0});return d};k.filter=k.select=function(a,b,c){var d=[];if(null==a)return d;k.each(a,function(a,e,f){b.call(c,a,e,f)&&d.push(a)});return d};k.reject=function(a,
b,c){return k.filter(a,k.negate(b),c)};k.every=k.all=function(a,c,d){c||(c=k.identity);var e=!0;if(null==a)return e;k.each(a,function(a,f,g){if(!(e=e&&c.call(d,a,f,g)))return b});return!!e};k.some=k.any=function(a,c,d){c||(c=k.identity);var e=!1;if(null==a)return e;k.each(a,function(a,f,g){if(e||(e=c.call(d,a,f,g)))return b});return!!e};k.contains=k.include=function(a,b){return null==a?!1:a.length===+a.length?0<=k.indexOf(a,b):k.some(a,function(a){return a===b})};k.invoke=function(a,b){var c=l.call(arguments,
2),d=k.isFunction(b);return k.map(a,function(a){return(d?b:a[b]).apply(a,c)})};k.pluck=function(a,b){return k.map(a,k.property(b))};k.where=function(a,b){return k.filter(a,k.matches(b))};k.findWhere=function(a,b){return k.find(a,k.matches(b))};k.max=function(a,b,c){var d=-Infinity,e=-Infinity,f,g;if(!b&&k.isArray(a))for(var h=0,l=a.length;h<l;h++)f=a[h],f>d&&(d=f);else k.each(a,function(a,f,h){g=b?b.call(c,a,f,h):a;g>e&&(d=a,e=g)});return d};k.min=function(a,b,c){var d=Infinity,e=Infinity,f,g;if(!b&&
k.isArray(a))for(var h=0,l=a.length;h<l;h++)f=a[h],f<d&&(d=f);else k.each(a,function(a,f,h){g=b?b.call(c,a,f,h):a;g<e&&(d=a,e=g)});return d};k.shuffle=function(a){var b,c=0,d=[];k.each(a,function(a){b=k.random(c++);d[c-1]=d[b];d[b]=a});return d};k.sample=function(a,b,c){return null==b||c?(a.length!==+a.length&&(a=k.values(a)),a[k.random(a.length-1)]):k.shuffle(a).slice(0,Math.max(0,b))};var A=function(a,b){return null==a?k.identity:k.isFunction(a)?b?function(){return a.apply(b,arguments)}:a:k.property(a)};
k.sortBy=function(a,b,c){b=A(b,c);return k.pluck(k.map(a,function(a,c,d){return{value:a,index:c,criteria:b(a,c,d)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(c<d||void 0===d)return-1}return a.index-b.index}),"value")};var x=function(a){return function(b,c,d){var e={};c=A(c,d);k.each(b,function(d,f){var g=c(d,f,b);a(e,g,d)});return e}};k.groupBy=x(function(a,b,c){k.has(a,b)?a[b].push(c):a[b]=[c]});k.indexBy=x(function(a,b,c){a[b]=c});k.countBy=x(function(a,
b){k.has(a,b)?a[b]++:a[b]=1});k.sortedIndex=function(a,b,c,d){c=A(c,d);b=c(b);d=0;for(var e=a.length;d<e;){var f=d+e>>>1;c(a[f])<b?d=f+1:e=f}return d};k.toArray=function(a){return a?k.isArray(a)?l.call(a):a.length===+a.length?k.map(a,k.identity):k.values(a):[]};k.size=function(a){return null==a?0:a.length===+a.length?a.length:k.keys(a).length};k.first=k.head=k.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:0>b?[]:l.call(a,0,b)};k.initial=function(a,b,c){return l.call(a,0,Math.max(0,a.length-
(null==b||c?1:b)))};k.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:l.call(a,Math.max(a.length-b,0))};k.rest=k.tail=k.drop=function(a,b,c){return l.call(a,null==b||c?1:b)};k.compact=function(a){return k.filter(a,k.identity)};var E=function(a,b,c,d){if(b&&k.every(a,k.isArray))return p.apply(d,a);for(var e=0,f=a.length;e<f;e++){var g=a[e];k.isArray(g)||k.isArguments(g)?b?n.apply(d,g):E(g,b,c,d):c||d.push(g)}return d};k.flatten=function(a,b){return E(a,b,!1,[])};k.without=function(a){return k.difference(a,
l.call(arguments,1))};k.partition=function(a,b,c){b=A(b,c);var d=[],e=[];k.each(a,function(a){(b(a)?d:e).push(a)});return[d,e]};k.uniq=k.unique=function(a,b,c,d){if(null==a)return[];k.isFunction(b)&&(d=c,c=b,b=!1);for(var e=[],f=[],g=0,h=a.length;g<h;g++){var l=a[g];c&&(l=c.call(d,l,g,a));(b?g&&f===l:k.contains(f,l))||(b?f=l:f.push(l),e.push(a[g]))}return e};k.union=function(){return k.uniq(E(arguments,!0,!0,[]))};k.intersection=function(a){if(null==a)return[];for(var b=[],c=arguments.length,d=0,
e=a.length;d<e;d++){var f=a[d];if(!k.contains(b,f)){for(var g=1;g<c&&k.contains(arguments[g],f);g++);g===c&&b.push(f)}}return b};k.difference=function(a){var b=E(l.call(arguments,1),!0,!0,[]);return k.filter(a,function(a){return!k.contains(b,a)})};k.zip=function(){for(var a=k.max(k.pluck(arguments,"length").concat(0)),b=Array(a),c=0;c<a;c++)b[c]=k.pluck(arguments,""+c);return b};k.object=function(a,b){if(null==a)return{};for(var c={},d=0,e=a.length;d<e;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c};
k.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c)if("number"==typeof c)d=0>c?Math.max(0,e+c):c;else return d=k.sortedIndex(a,b),a[d]===b?d:-1;for(;d<e;d++)if(a[d]===b)return d;return-1};k.lastIndexOf=function(a,b,c){if(null==a)return-1;for(c=null==c?a.length:c;c--;)if(a[c]===b)return c;return-1};k.range=function(a,b,c){1>=arguments.length&&(b=a||0,a=0);c=arguments[2]||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=Array(d);e<d;)f[e++]=a,a+=c;return f};var y=function(){};k.bind=
function(a,b){var c,d;if(u&&a.bind===u)return u.apply(a,l.call(arguments,1));if(!k.isFunction(a))throw new TypeError;c=l.call(arguments,2);return d=function(){if(!(this instanceof d))return a.apply(b,c.concat(l.call(arguments)));y.prototype=a.prototype;var e=new y;y.prototype=null;var f=a.apply(e,c.concat(l.call(arguments)));return Object(f)===f?f:e}};k.partial=function(a){var b=l.call(arguments,1);return function(){for(var c=0,d=b.slice(),e=0,f=d.length;e<f;e++)d[e]===k&&(d[e]=arguments[c++]);for(;c<
arguments.length;)d.push(arguments[c++]);return a.apply(this,d)}};k.bindAll=function(a){var b=l.call(arguments,1);if(0===b.length)throw Error("bindAll must be passed function names");k.each(b,function(b){a[b]=k.bind(a[b],a)});return a};k.memoize=function(a,b){var c={};b||(b=k.identity);return function(){var d=b.apply(this,arguments);return k.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}};k.delay=function(a,b){var c=l.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)};k.defer=
function(a){return k.delay.apply(k,[a,1].concat(l.call(arguments,1)))};k.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var l=function(){h=!1===c.leading?0:k.now();g=null;f=a.apply(d,e);d=e=null};return function(){var m=k.now();h||!1!==c.leading||(h=m);var n=b-(m-h);d=this;e=arguments;0>=n||n>b?(clearTimeout(g),g=null,h=m,f=a.apply(d,e),d=e=null):g||!1===c.trailing||(g=setTimeout(l,n));return f}};k.debounce=function(a,b,c){var d,e,f,g,h,l=function(){var m=k.now()-g;m<b&&0<m?d=setTimeout(l,
b-m):(d=null,c||(h=a.apply(f,e),f=e=null))};return function(){f=this;e=arguments;g=k.now();var m=c&&!d;d||(d=setTimeout(l,b));m&&(h=a.apply(f,e),f=e=null);return h}};k.once=function(a){var b=!1,c;return function(){if(b)return c;b=!0;c=a.apply(this,arguments);a=null;return c}};k.wrap=function(a,b){return k.partial(b,a)};k.negate=function(a){return function(){return!a.apply(this,arguments)}};k.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;0<=c;c--)b=[a[c].apply(this,
b)];return b[0]}};k.after=function(a,b){return function(){if(1>--a)return b.apply(this,arguments)}};k.keys=function(a){if(!k.isObject(a))return[];if(r)return r(a);var b=[],c;for(c in a)k.has(a,c)&&b.push(c);return b};k.values=function(a){for(var b=k.keys(a),c=b.length,d=Array(c),e=0;e<c;e++)d[e]=a[b[e]];return d};k.pairs=function(a){for(var b=k.keys(a),c=b.length,d=Array(c),e=0;e<c;e++)d[e]=[b[e],a[b[e]]];return d};k.invert=function(a){for(var b={},c=k.keys(a),d=0,e=c.length;d<e;d++)b[a[c[d]]]=c[d];
return b};k.functions=k.methods=function(a){var b=[],c;for(c in a)k.isFunction(a[c])&&b.push(c);return b.sort()};k.extend=function(a){k.each(l.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]});return a};k.pick=function(a,b,c){var d={};if(k.isFunction(b))for(var e in a){var f=a[e];b.call(c,f,e,a)&&(d[e]=f)}else for(var f=p.apply([],l.call(arguments,1)),g=0,h=f.length;g<h;g++)e=f[g],e in a&&(d[e]=a[e]);return d};k.omit=function(a,b,c){var d;k.isFunction(b)?b=k.negate(b):(d=k.map(p.apply([],
l.call(arguments,1)),String),b=function(a,b){return!k.contains(d,b)});return k.pick(a,b,c)};k.defaults=function(a){k.each(l.call(arguments,1),function(b){if(b)for(var c in b)void 0===a[c]&&(a[c]=b[c])});return a};k.clone=function(a){return k.isObject(a)?k.isArray(a)?a.slice():k.extend({},a):a};k.tap=function(a,b){b(a);return a};var M=function(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a instanceof k&&(a=a._wrapped);b instanceof k&&(b=b._wrapped);var e=q.call(a);if(e!=
q.call(b))return!1;switch(e){case "[object String]":return a==String(b);case "[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case "[object Date]":case "[object Boolean]":return+a==+b;case "[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var f=c.length;f--;)if(c[f]==a)return d[f]==b;var f=a.constructor,g=b.constructor;if(f!==g&&!(k.isFunction(f)&&f instanceof f&&k.isFunction(g)&&
g instanceof g)&&"constructor"in a&&"constructor"in b)return!1;c.push(a);d.push(b);f=0;g=!0;if("[object Array]"==e){if(f=a.length,g=f==b.length)for(;f--&&(g=M(a[f],b[f],c,d)););}else{for(var h in a)if(k.has(a,h)&&(f++,!(g=k.has(b,h)&&M(a[h],b[h],c,d))))break;if(g){for(h in b)if(k.has(b,h)&&!f--)break;g=!f}}c.pop();d.pop();return g};k.isEqual=function(a,b){return M(a,b,[],[])};k.isEmpty=function(a){if(null==a)return!0;if(k.isArray(a)||k.isString(a)||k.isArguments(a))return 0===a.length;for(var b in a)if(k.has(a,
b))return!1;return!0};k.isElement=function(a){return!(!a||1!==a.nodeType)};k.isArray=d||function(a){return"[object Array]"==q.call(a)};k.isObject=function(a){return a===Object(a)};k.each("Arguments Function String Number Date RegExp".split(" "),function(a){k["is"+a]=function(b){return q.call(b)=="[object "+a+"]"}});k.isArguments(arguments)||(k.isArguments=function(a){return!(!a||!k.has(a,"callee"))});"function"!==typeof/./&&(k.isFunction=function(a){return"function"===typeof a});k.isFinite=function(a){return isFinite(a)&&
!isNaN(parseFloat(a))};k.isNaN=function(a){return k.isNumber(a)&&a!=+a};k.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"==q.call(a)};k.isNull=function(a){return null===a};k.isUndefined=function(a){return void 0===a};k.has=function(a,b){return m.call(a,b)};k.noConflict=function(){a._=f;return this};k.identity=function(a){return a};k.constant=function(a){return function(){return a}};k.noop=function(){};k.property=function(a){return function(b){return b[a]}};k.matches=function(a){return function(b){if(null==
b)return k.isEmpty(a);if(b===a)return!0;for(var c in a)if(a[c]!==b[c])return!1;return!0}};k.times=function(a,b,c){for(var d=Array(Math.max(0,a)),e=0;e<a;e++)d[e]=b.call(c,e);return d};k.random=function(a,b){null==b&&(b=a,a=0);return a+Math.floor(Math.random()*(b-a+1))};k.now=Date.now||function(){return(new Date).getTime()};var K={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};K.unescape=k.invert(K.escape);var F={escape:RegExp("["+k.keys(K.escape).join("")+"]","g"),unescape:RegExp("("+
k.keys(K.unescape).join("|")+")","g")};k.each(["escape","unescape"],function(a){k[a]=function(b){return null==b?"":(""+b).replace(F[a],function(b){return K[a][b]})}});k.result=function(a,b){if(null!=a){var c=a[b];return k.isFunction(c)?c.call(a):c}};k.mixin=function(a){k.each(k.functions(a),function(b){var c=k[b]=a[b];k.prototype[b]=function(){var a=[this._wrapped];n.apply(a,arguments);return R.call(this,c.apply(k,a))}})};var I=0;k.uniqueId=function(a){var b=++I+"";return a?a+b:b};k.templateSettings=
{evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var P=/(.)^/,U={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},N=/\\|'|\r|\n|\u2028|\u2029/g,H=function(a){return"\\"+U[a]};k.template=function(a,b,c){c=k.defaults({},c,k.templateSettings);var d=RegExp([(c.escape||P).source,(c.interpolate||P).source,(c.evaluate||P).source].join("|")+"|$","g"),e=0,f="__p+='";a.replace(d,function(b,c,d,g,h){f+=a.slice(e,h).replace(N,H);e=h+b.length;c?f+="'+\n((__t=("+
c+"))==null?'':_.escape(__t))+\n'":d?f+="'+\n((__t=("+d+"))==null?'':__t)+\n'":g&&(f+="';\n"+g+"\n__p+='");return b});f+="';\n";c.variable||(f="with(obj||{}){\n"+f+"}\n");f="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+f+"return __p;\n";try{var g=new Function(c.variable||"obj","_",f)}catch(h){throw h.source=f,h;}if(b)return g(b,k);b=function(a){return g.call(this,a,k)};b.source="function("+(c.variable||"obj")+"){\n"+f+"}";return b};k.chain=function(a){return k(a).chain()};
var R=function(a){return this._chain?k(a).chain():a};k.mixin(k);k.each("pop push reverse shift sort splice unshift".split(" "),function(a){var b=c[a];k.prototype[a]=function(){var c=this._wrapped;b.apply(c,arguments);"shift"!=a&&"splice"!=a||0!==c.length||delete c[0];return R.call(this,c)}});k.each(["concat","join","slice"],function(a){var b=c[a];k.prototype[a]=function(){return R.call(this,b.apply(this._wrapped,arguments))}});k.extend(k.prototype,{chain:function(){this._chain=!0;return this},value:function(){return this._wrapped}});
"function"===typeof define&&define.amd&&define("underscore",[],function(){return k})}).call(this)},{}]},{},[54]);
/*******************************************************************************

This software incorporates the following open-source software:


EventEmitter2
https://github.com/asyncly/EventEmitter2

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.


jQuery
http://jquery.com/

Copyright 2005, 2014 jQuery Foundation and other contributors,
https://jquery.org/

This software consists of voluntary contributions made by many
individuals. For exact contribution history, see the revision history
available at https://github.com/jquery/jquery

The following license applies to all parts of this software except as
documented below:

====

Permission is hereby granted, free of charge, to any person obtaining
a copy of this software and associated documentation files (the
"Software"), to deal in the Software without restriction, including
without limitation the rights to use, copy, modify, merge, publish,
distribute, sublicense, and/or sell copies of the Software, and to
permit persons to whom the Software is furnished to do so, subject to
the following conditions:

The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

====

All files located in the node_modules and external directories are
externally maintained libraries used by this software which have their
own licenses; we recommend you read them, as their terms may differ from
the terms above.


js-logger
https://github.com/jonnyreeves/js-logger

Copyright (c) 2012 Jonny Reeves, http://jonnyreeves.co.uk/

Permission is hereby granted, free of charge, to any person obtaining
a copy of this software and associated documentation files (the
"Software"), to deal in the Software without restriction, including
without limitation the rights to use, copy, modify, merge, publish,
distribute, sublicense, and/or sell copies of the Software, and to
permit persons to whom the Software is furnished to do so, subject to
the following conditions:

The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.


json-stringify-safe
https://github.com/isaacs/json-stringify-safe

Copyright (c) Isaac Z. Schlueter ("Author")
All rights reserved.

The BSD License

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions
are met:

1. Redistributions of source code must retain the above copyright
   notice, this list of conditions and the following disclaimer.

2. Redistributions in binary form must reproduce the above copyright
   notice, this list of conditions and the following disclaimer in the
   documentation and/or other materials provided with the distribution.

THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS ``AS IS'' AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS
BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR
BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE
OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN
IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.


jsSHA
https://github.com/Caligatio/jsSHA

Copyright (c) 2008-2013, Brian Turek
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

 * Redistributions of source code must retain the above copyright notice, this
   list of conditions and the following disclaimer.
 * Redistributions in binary form must reproduce the above copyright notice,
   this list of conditions and the following disclaimer in the documentation
   and/or other materials provided with the distribution.
 * The names of the contributors may not be used to endorse or promote products
   derived from this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
ANDANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
IMPLIEDWARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED.IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
ANY DIRECT,INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING,BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 LOSS OF USE,DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
ANY THEORY OFLIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCEOR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISEDOF THE POSSIBILITY OF SUCH DAMAGE.


mustache.js
https://github.com/janl/mustache.js

The MIT License

Copyright (c) 2009 Chris Wanstrath (Ruby)
Copyright (c) 2010-2014 Jan Lehnardt (JavaScript)

Permission is hereby granted, free of charge, to any person obtaining a copy of
this software and associated documentation files (the "Software"), to deal in
the Software without restriction, including without limitation the rights to
use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
the Software, and to permit persons to whom the Software is furnished to do so,
subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.


node-uuid
https://github.com/broofa/node-uuid

Copyright (c) 2010-2012 Robert Kieffer
MIT License - http://opensource.org/licenses/mit-license.php


qs
https://github.com/hapijs/qs

Copyright (c) 2014 Nathan LaFreniere and other contributors.
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:
    * Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in the
      documentation and/or other materials provided with the distribution.
    * The names of any contributors may not be used to endorse or promote
      products derived from this software without specific prior written
      permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDERS AND CONTRIBUTORS BE LIABLE FOR ANY
DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

                                  *   *   *

The complete list of contributors can be found at: https://github.com/hapijs/qs/graphs/contributors


Silverlight.js

This file is provided by Microsoft as a helper file for websites that
incorporate Silverlight Objects. This file is provided under the Microsoft
Public License available at
http://code.msdn.microsoft.com/silverlightjs/Project/License.aspx.
You may not use or distribute this file or the code in this file except as
expressly permitted under that license.

Copyright (c) Microsoft Corporation. All rights reserved.


Underscore.js
http://underscorejs.org

Copyright (c) 2009-2014 Jeremy Ashkenas, DocumentCloud and Investigative
Reporters & Editors

Permission is hereby granted, free of charge, to any person
obtaining a copy of this software and associated documentation
files (the "Software"), to deal in the Software without
restriction, including without limitation the rights to use,
copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the
Software is furnished to do so, subject to the following
conditions:

The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
OTHER DEALINGS IN THE SOFTWARE.

*******************************************************************************/
